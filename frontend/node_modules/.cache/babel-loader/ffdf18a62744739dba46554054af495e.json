{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\lenovo\\\\Desktop\\\\smartFarm\\\\backoffice\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\lenovo\\\\Desktop\\\\smartFarm\\\\backoffice\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\lenovo\\\\Desktop\\\\smartFarm\\\\backoffice\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\lenovo\\\\Desktop\\\\smartFarm\\\\backoffice\\\\frontend\\\\src\\\\views\\\\MarkerMap.js\";\nimport React, { useState, useEffect, useRef, useMemo, useCallback } from \"react\";\nimport { Marker, Popup, useMap } from \"react-leaflet\";\nimport { Button } from 'shards-react';\nimport api from '../api/api';\nimport L from 'leaflet';\nexport default function Markerwhatever(props) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      draggable = _useState2[0],\n      setDraggable = _useState2[1];\n\n  var _useState3 = useState({\n    lat: props.lat,\n    lng: props.long\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      position = _useState4[0],\n      setPosition = _useState4[1];\n\n  var markerRef = useRef(null);\n  var map = useMap();\n  var center = props.center;\n  if (typeof center !== \"undefined\" && center.length > 0 && props.fromAction === true) map.setView(center, props.zoom);\n  var eventHandlers = useMemo(function () {\n    return {\n      dragend: function dragend() {\n        var marker = markerRef.current;\n\n        if (marker != null) {\n          setPosition(marker.getLatLng());\n        }\n      },\n      click: function click(e) {\n        map.flyTo(e.latlng, 9);\n      }\n    };\n  }, []);\n  var toggleDraggable = useCallback(function () {\n    setDraggable(function (d) {\n      return !d;\n    });\n  }, []);\n\n  var savePosition = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var Latitude, Longitude, idFarm;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              Latitude = position.lat;\n              Longitude = position.lng;\n              idFarm = props.id;\n              _context.next = 5;\n              return api.post('/farm/set-farm-position', {\n                idFarm: idFarm,\n                Latitude: Latitude,\n                Longitude: Longitude\n              }).then(function (res) {\n                console.log(res);\n              }).catch(function (error) {\n                console.log(error);\n              });\n\n            case 5:\n              setDraggable(false);\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function savePosition() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var Iconsensor = new L.Icon({\n    iconUrl: require('../images/smartfarm_capteur.png'),\n    iconSize: [48, 52],\n    iconAnchor: [17, 45],\n    popupAnchor: [3, -46]\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Marker, {\n    eventHandlers: eventHandlers,\n    draggable: draggable,\n    position: position,\n    ref: markerRef,\n    icon: Iconsensor,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Popup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, draggable ? /*#__PURE__*/React.createElement(\"i\", {\n    onClick: savePosition,\n    class: \"fa fa-check mx-2\",\n    title: \"save position\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }) : /*#__PURE__*/React.createElement(\"i\", {\n    onClick: toggleDraggable,\n    className: \"material-icons\",\n    title: \"edit position\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }, \"\\uE3C9\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, props.name))));\n}","map":{"version":3,"names":["React","useState","useEffect","useRef","useMemo","useCallback","Marker","Popup","useMap","Button","api","L","Markerwhatever","props","draggable","setDraggable","lat","lng","long","position","setPosition","markerRef","map","center","length","fromAction","setView","zoom","eventHandlers","dragend","marker","current","getLatLng","click","e","flyTo","latlng","toggleDraggable","d","savePosition","Latitude","Longitude","idFarm","id","post","then","res","console","log","catch","error","Iconsensor","Icon","iconUrl","require","iconSize","iconAnchor","popupAnchor","name"],"sources":["C:/Users/lenovo/Desktop/smartFarm/backoffice/frontend/src/views/MarkerMap.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useMemo, useCallback } from \"react\";\r\nimport { Marker, Popup, useMap } from \"react-leaflet\";\r\nimport { Button } from 'shards-react'\r\nimport api from '../api/api';\r\nimport L from 'leaflet';\r\n\r\nexport default function Markerwhatever(props) {\r\n  const [draggable, setDraggable] = useState(false)\r\n  const [position, setPosition] = useState({lat:props.lat, lng:props.long})\r\n  const markerRef = useRef(null)\r\n\r\n\r\n  const map = useMap();\r\n  let center = props.center\r\n  if(typeof center !== \"undefined\" && center.length > 0 && props.fromAction === true)\r\n    map.setView(center, props.zoom);\r\n      \r\n  \r\n  const eventHandlers = useMemo(\r\n    () => ({\r\n      dragend() {\r\n        const marker = markerRef.current\r\n        if (marker != null) {\r\n          setPosition(marker.getLatLng())\r\n        }\r\n      },\r\n      click: (e) => {\r\n        map.flyTo(e.latlng, 9);\r\n      }\r\n    }),\r\n    [],\r\n  )\r\n  const toggleDraggable = useCallback(() => {\r\n    setDraggable((d) => !d)\r\n  }, [])\r\n\r\n  const savePosition = async() => {\r\n    let Latitude = position.lat\r\n    let Longitude = position.lng\r\n    let idFarm = props.id\r\n    await api.post('/farm/set-farm-position', { idFarm, Latitude ,Longitude })\r\n      .then(res => {\r\n        console.log(res)\r\n      }).catch((error)=>{\r\n        console.log(error)\r\n      })\r\n    setDraggable(false)\r\n  }\r\n  const Iconsensor = new L.Icon({\r\n    iconUrl: require('../images/smartfarm_capteur.png'),\r\n    iconSize: [48, 52],\r\n    iconAnchor: [17, 45],\r\n    popupAnchor: [3, -46]\r\n  })\r\n  return (\r\n    <div>\r\n      <Marker\r\n        eventHandlers={eventHandlers}\r\n        draggable={draggable}\r\n        position={position}\r\n        ref={markerRef}\r\n        icon={Iconsensor}\r\n      >\r\n      <Popup>\r\n      {draggable ?\r\n        <i onClick={savePosition} class=\"fa fa-check mx-2\" title='save position'></i>\r\n        : <i  onClick={toggleDraggable} className=\"material-icons\" title='edit position'>&#xe3c9;</i> \r\n        }\r\n        \r\n        <div>\r\n        {props.name}\r\n        </div>\r\n      </Popup>\r\n      \r\n      </Marker>\r\n    </div>\r\n  );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}