{"ast":null,"code":"import _regeneratorRuntime from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/var/www/prod/smartfarm/backoffice/frontend/src/views/Calendar.js\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { Container, Row, Col, Card, CardHeader, CardBody, Form, FormGroup, Nav, NavItem, NavLink, FormInput, FormSelect, Button } from 'shards-react';\nimport PageTitle from \"../components/common/PageTitle\";\nimport { useTranslation } from \"react-i18next\";\nimport { Calendar, momentLocalizer } from \"react-big-calendar\";\nimport \"react-big-calendar/lib/css/react-big-calendar.css\";\nimport moment from \"moment\";\nimport \"moment/locale/nb\";\nimport api from \"../api/api\";\nvar localizer = momentLocalizer(moment);\n\nvar MyCalendar = function MyCalendar(props) {\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t,\n      i18n = _useTranslation.i18n;\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      isLoading = _useState2[0],\n      setIsLoading = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      events = _useState4[0],\n      setEvents = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      allSimulations = _useState6[0],\n      setAllSimulations = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      singleSimulation = _useState8[0],\n      setSingleSimulation = _useState8[1];\n\n  var _useState9 = useState(''),\n      _useState10 = _slicedToArray(_useState9, 2),\n      simulationId = _useState10[0],\n      setSimulationId = _useState10[1];\n\n  useEffect(function () {\n    var getAllSimulations = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return api.get('/simulation/get-simulations').then(function (result) {\n                  var listSimulations = result.data.simulations;\n\n                  if (result.data.type === \"success\") {\n                    setAllSimulations(listSimulations);\n                  }\n                }).catch(function (err) {\n                  console.log(err);\n                }).finally(function () {\n                  return setIsLoading(false);\n                });\n\n              case 3:\n                _context.next = 7;\n                break;\n\n              case 5:\n                _context.prev = 5;\n                _context.t0 = _context[\"catch\"](0);\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 5]]);\n      }));\n\n      return function getAllSimulations() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    getAllSimulations();\n  }, []);\n\n  var getSingleSimulation = function getSingleSimulation(simulationId) {\n    setSimulationId(simulationId);\n    var data = {\n      simulation_id: simulationId\n    };\n\n    try {\n      api.post('/simulation/single-simulation', data).then(function (result) {\n        var simulation = result.data.Simulation;\n\n        if (result.data.type === \"success\") {\n          setSingleSimulation(simulation.result);\n        }\n      }).catch(function (err) {});\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useEffect(function () {\n    var data = [];\n    var irrig = singleSimulation.filter(function (simulation) {\n      return simulation.irrigationNbr === 1;\n    });\n\n    if (irrig) {\n      irrig.map(function (irrigDay) {\n        data.push({\n          title: \"Irrigation\",\n          allDay: true,\n          start: new Date(irrigDay.date),\n          end: new Date(irrigDay.date)\n        });\n      });\n      setEvents(data);\n    }\n  }, [singleSimulation]);\n  return /*#__PURE__*/React.createElement(Container, {\n    fluid: true,\n    className: \"main-content-container p-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    noGutters: true,\n    className: \"page-header py-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(PageTitle, {\n    sm: \"4\",\n    title: t('Irrigations schedule'),\n    subtitle: t('overview'),\n    className: \"text-sm-left\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Row, {\n    className: \" d-flex justify-content-center align-items-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(FormGroup, {\n    className: \"text-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"select\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 11\n    }\n  }, \"Select Name\"), /*#__PURE__*/React.createElement(FormSelect, {\n    id: \"select\",\n    value: simulationId,\n    onChange: function onChange(e) {\n      return getSingleSimulation(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }, \"Select Name\"), allSimulations.map(function (simulation) {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      value: simulation.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 24\n      }\n    }, simulation.name);\n  })))), /*#__PURE__*/React.createElement(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: \"12\",\n    md: \"12\",\n    sm: \"12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CardBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      height: 590\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Calendar, {\n    localizer: localizer,\n    culture: \"en-GB\",\n    views: [\"month\", \"week\"],\n    events: events,\n    startAccessor: \"start\",\n    endAccessor: \"end\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }\n  })))))));\n};\n\nexport default MyCalendar;","map":{"version":3,"names":["React","useState","useEffect","Container","Row","Col","Card","CardHeader","CardBody","Form","FormGroup","Nav","NavItem","NavLink","FormInput","FormSelect","Button","PageTitle","useTranslation","Calendar","momentLocalizer","moment","api","localizer","MyCalendar","props","t","i18n","isLoading","setIsLoading","events","setEvents","allSimulations","setAllSimulations","singleSimulation","setSingleSimulation","simulationId","setSimulationId","getAllSimulations","get","then","result","listSimulations","data","simulations","type","catch","err","console","log","finally","getSingleSimulation","simulation_id","post","simulation","Simulation","error","irrig","filter","irrigationNbr","map","irrigDay","push","title","allDay","start","Date","date","end","e","target","value","id","name","height"],"sources":["/var/www/prod/smartfarm/backoffice/frontend/src/views/Calendar.js"],"sourcesContent":["import React, { useState ,useEffect} from \"react\";\nimport { Container, Row, Col, Card, CardHeader, CardBody, Form, FormGroup, Nav, NavItem, NavLink, FormInput, FormSelect, Button } from 'shards-react'\nimport PageTitle from \"../components/common/PageTitle\";\nimport { useTranslation } from \"react-i18next\";\nimport { Calendar, momentLocalizer } from \"react-big-calendar\";\nimport \"react-big-calendar/lib/css/react-big-calendar.css\";\nimport moment from \"moment\";\nimport \"moment/locale/nb\";\nimport api from \"../api/api\";\n\nconst localizer = momentLocalizer(moment);\n\nconst MyCalendar = props => {\n  const { t, i18n } = useTranslation();\n  const [isLoading, setIsLoading] = useState(true)\n\n  const [events, setEvents] = useState([]);\n  const [allSimulations, setAllSimulations] = useState([])\n  const [singleSimulation, setSingleSimulation] = useState([])\n  const [simulationId, setSimulationId] = useState('')\n\n  useEffect(() => {\n      const getAllSimulations = async () => {\n          try {\n              await api.get('/simulation/get-simulations')\n                  .then(result => {\n                      let listSimulations = result.data.simulations\n                      if (result.data.type === \"success\") {\n                          setAllSimulations(listSimulations)\n                      }\n                  }).catch(err => {\n                      console.log(err)\n                  }).finally(() => setIsLoading(false))\n          } catch (error) {\n\n          }\n      }\n      getAllSimulations()\n  }, [])\n\n\n  const getSingleSimulation = (simulationId) => {\n    setSimulationId(simulationId)\n      let data = {\n        simulation_id : simulationId\n      }\n      try {\n        api.post('/simulation/single-simulation',data)\n        .then(result => {\n          let simulation = result.data.Simulation\n          if(result.data.type === \"success\"){\n            setSingleSimulation(simulation.result)\n          }\n        }).catch(err=>{\n\n        })\n      } catch (error) {\n          console.log(error)\n      }\n  }\n    useEffect(()=>{\n     let data = [] \n     let irrig =  singleSimulation.filter(simulation=>{\n        \n        return simulation.irrigationNbr === 1\n      })\n      if(irrig){\n        irrig.map(irrigDay=>{\n          data.push({\n            title: \"Irrigation\",\n            allDay: true,\n            start: new Date(irrigDay.date),\n            end: new Date(irrigDay.date)\n          })\n        })\n        setEvents(data)\n      }\n    },[singleSimulation])\n\n  return (\n    <Container fluid className=\"main-content-container p-4\">\n      <Row noGutters className=\"page-header py-4\">\n        <PageTitle\n          sm=\"4\"\n          title={t('Irrigations schedule')}\n          subtitle={t('overview')}\n          className=\"text-sm-left\"\n        />\n      </Row>\n      <Row className=\" d-flex justify-content-center align-items-center\">\n        <FormGroup className=\"text-center\">\n          <label  htmlFor=\"select\">Select Name</label>\n          <FormSelect id=\"select\" value={simulationId} onChange={(e) => getSingleSimulation(e.target.value) } >\n            <option value=\"\">Select Name</option>\n            {\n              allSimulations.map(simulation=>{\n                return <option value={simulation.id}>{simulation.name}</option>\n              })\n            }\n          </FormSelect>\n        </FormGroup>\n      </Row>\n      <Row>\n        <Col lg='12' md='12' sm='12'>\n          <Card>\n            <CardBody>\n\n              <div style={{ height: 590 }}>\n                <Calendar\n                  localizer={localizer}\n                  culture=\"en-GB\"\n                  views={[\"month\", \"week\"]}\n                  events={events}\n                  startAccessor=\"start\"\n                  endAccessor=\"end\"\n                />\n              </div>\n\n            </CardBody>\n          </Card>\n        </Col>\n      </Row>\n\n    </Container>\n  );\n};\n\nexport default MyCalendar;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}