{"ast":null,"code":"import _regeneratorRuntime from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/var/www/prod/smartfarm/backoffice/frontend/src/views/Overview.js\";\n\nimport React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useHistory } from 'react-router-dom';\nimport { Container, Row, Col, CardBody, Card, Button, Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from \"shards-react\";\nimport PageTitle from \"../components/common/PageTitle\";\nimport SmallStats from \"../components/common/SmallStats\";\nimport \"./../assets/Styles.css\";\nimport \"./Styles.css\";\nimport LeafletMap from \"./map\";\nimport SignalCellularNodataIcon from \"@mui/icons-material/SignalCellularNodata\";\nimport SignalCellular4BarIcon from \"@mui/icons-material/SignalCellular4Bar\";\nimport api from '../api/api';\nimport { useTranslation } from \"react-i18next\";\nimport FilterFields from './FilterFields';\nimport swal from \"sweetalert\";\nimport useSensorData from \"../utils/useSensorData\";\n\nvar Overview = function Overview(props) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      toggle = _useState2[0],\n      setToggle = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      farms = _useState4[0],\n      setFarms = _useState4[1];\n\n  var _useState5 = useState({\n    polygon: false,\n    circle: false,\n    rectangle: false,\n    polyline: false,\n    marker: false,\n    circlemarker: false\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      draw = _useState6[0],\n      setDraw = _useState6[1];\n\n  var history = useHistory(); // const [offer,setOffer] = useState(null)\n  // let user = JSON.parse(localStorage.getItem(\"user\"));\n  // let offerType = user.offer_type;\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t,\n      i18n = _useTranslation.i18n;\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      fieldStats = _useState8[0],\n      setFS = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      sensorStats = _useState10[0],\n      setSensorStats = _useState10[1];\n\n  var _useState11 = useState(\"#\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      userMapDetails = _useState12[0],\n      setUserMapDetails = _useState12[1];\n\n  var _useState13 = useState([]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      layerFarm = _useState14[0],\n      setLayerFarm = _useState14[1];\n\n  var _useState15 = useState({\n    zoom: \"\",\n    center: [],\n    fromAction: false\n  }),\n      _useState16 = _slicedToArray(_useState15, 2),\n      mapConfig = _useState16[0],\n      setMapConfig = _useState16[1];\n\n  var sensorsData = useSensorData('/sensor/sensor-update-data');\n\n  var toggleDropDown = function toggleDropDown() {\n    setToggle(!toggle);\n  };\n\n  var getFieldStats = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return api.get('/dashboard/fields');\n\n            case 2:\n              response = _context.sent;\n              setFS(response.data.farms);\n              setUserMapDetails(response.data.user_map_details.map_link_details);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getFieldStats() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var getSensorsStats = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return api.get('/dashboard/sensors');\n\n            case 2:\n              response = _context2.sent;\n              setSensorStats(response.data.sensors);\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function getSensorsStats() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var _useState17 = useState([]),\n      _useState18 = _slicedToArray(_useState17, 2),\n      crops = _useState18[0],\n      setCrops = _useState18[1];\n\n  var _useState19 = useState([]),\n      _useState20 = _slicedToArray(_useState19, 2),\n      dataCrops = _useState20[0],\n      setDataCrops = _useState20[1];\n\n  var fetchDataCrops = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return api.get('/crop/crops').then(function (response) {\n                var dataCrops = response.data.farms;\n                setDataCrops(dataCrops);\n                var Crops = [];\n                dataCrops.map(function (farm) {\n                  var fields = farm.fields;\n\n                  if (fields) {\n                    fields.map(function (field) {\n                      var crops = field.crops;\n\n                      if (crops) {\n                        crops.map(function (crop) {\n                          Crops.push({\n                            type: crop.type,\n                            id: crop.id,\n                            fieldId: crop.field_id\n                          });\n                        });\n                      }\n                    });\n                  }\n                });\n                setCrops(Crops);\n              }).catch(function (err) {\n                console.log(err);\n              });\n\n            case 2:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function fetchDataCrops() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var getLayerFarm = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return api.get('/farm/farms').then(function (res) {\n                var DataFarm = res.data.farms;\n                setLayerFarm(DataFarm);\n              });\n\n            case 2:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function getLayerFarm() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    // getLastDataSensor()\n    getLayerFarm();\n    getFieldStats();\n    getSensorsStats(); // fetchDataCrops()\n  }, []);\n  var critical = 0;\n  var full = 0;\n  var opt = 0;\n  fieldStats.map(function (item) {\n    item.fields.map(function (field) {\n      var status = field.status;\n\n      if (status) {\n        if (status == \"Optimal\") {\n          opt++;\n        }\n\n        if (status == \"Full\") {\n          full++;\n        }\n\n        if (status == \"Critical\") {\n          critical++;\n        }\n      }\n    });\n  });\n  var smallStats = [{\n    state: \"\".concat(t('Critical')),\n    icon: /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fas fa-tint-slash\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 15\n      }\n    }),\n    label: \"\".concat(t('fields')),\n    value: critical,\n    chartLabels: [null, null, null, null, null, null, null],\n    attrs: {\n      md: \"6\",\n      sm: \"6\"\n    },\n    datasets: [{\n      label: \"Today\",\n      fill: \"start\",\n      borderWidth: 1.5,\n      backgroundColor: \"rgba(0, 184, 216, 0.1)\",\n      borderColor: \"rgb(0, 184, 216)\",\n      data: []\n    }]\n  }, {\n    state: \"\".concat(t('Optimal')),\n    icon: /*#__PURE__*/React.createElement(\"i\", {\n      class: \"far fa-check-circle\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 15\n      }\n    }),\n    label: \"\".concat(t('fields')),\n    value: opt,\n    chartLabels: [null, null, null, null, null, null, null],\n    attrs: {\n      md: \"6\",\n      sm: \"6\"\n    },\n    datasets: [{\n      label: \"Today\",\n      fill: \"start\",\n      borderWidth: 1.5,\n      backgroundColor: \"rgba(23,198,113,0.1)\",\n      borderColor: \"rgb(23,198,113)\",\n      data: []\n    }]\n  }, {\n    state: \"\".concat(t('Full')),\n    icon: /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fas fa-tint\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 15\n      }\n    }),\n    label: \"\".concat(t('fields')),\n    value: full,\n    chartLabels: [null, null, null, null, null, null, null],\n    attrs: {\n      md: \"4\",\n      sm: \"6\"\n    },\n    datasets: [{\n      label: \"Today\",\n      fill: \"start\",\n      borderWidth: 1.5,\n      backgroundColor: \"rgba(255,180,0,0.1)\",\n      borderColor: \"rgb(255,180,0)\",\n      data: []\n    }]\n  }];\n  var online = 0;\n  var offline = 0;\n  var lowBatt = 0;\n  sensorStats.map(function (item) {\n    var sensor = item.id;\n\n    if (sensor) {\n      online++;\n    }\n  });\n  var smallStats2 = [{\n    state: \"\".concat(t('online')),\n    icon: /*#__PURE__*/React.createElement(SignalCellular4BarIcon, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 15\n      }\n    }),\n    label: \"\".concat(t('sensors')),\n    value: online,\n    chartLabels: [null, null, null, null, null, null, null],\n    attrs: {\n      md: \"4\",\n      sm: \"6\"\n    },\n    datasets: [{\n      label: \"Today\",\n      fill: \"start\",\n      borderWidth: 1.5,\n      backgroundColor: \"rgba(255,180,0,0.1)\",\n      borderColor: \"rgb(255,180,0)\",\n      data: []\n    }]\n  }, {\n    state: \"\".concat(t('low_batt')),\n    icon: /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fas fa-battery-quarter\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 15\n      }\n    }),\n    label: \"\".concat(t('sensors')),\n    value: lowBatt,\n    chartLabels: [null, null, null, null, null, null, null],\n    attrs: {\n      md: \"4\",\n      sm: \"6\"\n    },\n    datasets: [{\n      label: \"Today\",\n      fill: \"start\",\n      borderWidth: 1.5,\n      backgroundColor: \"rgba(255,180,0,0.1)\",\n      borderColor: \"rgb(255,180,0)\",\n      data: []\n    }]\n  }, {\n    state: \"\".concat(t('offline')),\n    icon: /*#__PURE__*/React.createElement(SignalCellularNodataIcon, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 15\n      }\n    }),\n    label: \"\".concat(t('sensors')),\n    value: offline,\n    chartLabels: [null, null, null, null, null, null, null],\n    attrs: {\n      md: \"4\",\n      sm: \"6\"\n    },\n    datasets: [{\n      label: \"Today\",\n      fill: \"start\",\n      borderWidth: 1.5,\n      backgroundColor: \"rgba(255,180,0,0.1)\",\n      borderColor: \"rgb(255,180,0)\",\n      data: []\n    }]\n  }];\n\n  var FilterByStatus = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(status) {\n      var data;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              data = {\n                status: status\n              };\n              _context5.next = 3;\n              return api.post('/field/field-status', data).then(function (response) {\n                var farmsData = response.data.farms;\n                setFarms(farmsData);\n              }).catch(function (err) {\n                swal({\n                  title: 'Error',\n                  icon: \"error\"\n                });\n              });\n\n            case 3:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function FilterByStatus(_x) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var ToSensorPage = function ToSensorPage() {\n    history.push('/Sensors');\n    window.location.reload();\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    fluid: true,\n    className: \"main-content-container px-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    noGutters: true,\n    className: \"page-header py-1 d-flex justify-content-between align-items-center border-bottom\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(PageTitle, {\n    title: t('overview'),\n    className: \"text-sm-left mb-1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-center align-items-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    theme: \"success\",\n    className: \"rounded-circle\",\n    style: {\n      height: 50,\n      width: 50\n    },\n    onClick: toggleDropDown,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"material-icons\",\n    style: {\n      fontSize: 30,\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 11\n    }\n  }, \"\\uE145\")))), /*#__PURE__*/React.createElement(Row, {\n    className: \"mt-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: \"4\",\n    md: \"6\",\n    sm: \"6\",\n    className: \"mb-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      margin: 0\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 9\n    }\n  }, t('field_stats')), /*#__PURE__*/React.createElement(Card, {\n    small: true,\n    className: \"stats-small h-75\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CardBody, {\n    className: \"p-2 d-flex  justify-content-center align-items-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      flexWrap: \"wrap\",\n      width: \"100%\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 13\n    }\n  }, smallStats.map(function (stats, idx) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(SmallStats, {\n      FilterByStatus: FilterByStatus,\n      style: {\n        borderColor: \"blue\",\n        borderWidth: 2,\n        borderStyle: \"solid\"\n      },\n      id: \"small-stats-\".concat(idx),\n      variation: \"1\",\n      chartData: stats.datasets,\n      chartLabels: stats.chartLabels,\n      label: stats.label,\n      value: stats.value,\n      icon: stats.icon,\n      state: stats.state,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 19\n      }\n    }), idx != 2 ? /*#__PURE__*/React.createElement(\"hr\", {\n      style: {\n        backgroundColor: \"#ebebeb\",\n        width: \"1px\",\n        height: \"75%\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 21\n      }\n    }) : /*#__PURE__*/React.createElement(React.Fragment, null));\n  }))))), /*#__PURE__*/React.createElement(Col, {\n    lg: \"4\",\n    md: \"6\",\n    sm: \"6\",\n    className: \"mb-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      margin: 0\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 364,\n      columnNumber: 9\n    }\n  }, t('sensor_stats')), /*#__PURE__*/React.createElement(Card, {\n    small: true,\n    className: \"stats-small h-75\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CardBody, {\n    className: \"p-2 d-flex justify-content-center align-items-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      flexWrap: \"wrap\",\n      width: \"100%\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 13\n    }\n  }, smallStats2.map(function (stats, idx) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(SmallStats, {\n      ToSensorPage: ToSensorPage,\n      style: {\n        borderColor: \"blue\",\n        borderWidth: 2,\n        borderStyle: \"solid\"\n      },\n      id: \"small-stats-\".concat(idx),\n      variation: \"1\",\n      chartData: stats.datasets,\n      chartLabels: stats.chartLabels,\n      label: stats.label,\n      value: stats.value,\n      icon: stats.icon,\n      state: stats.state,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 19\n      }\n    }), idx != 2 ? /*#__PURE__*/React.createElement(\"hr\", {\n      style: {\n        backgroundColor: \"#ebebeb\",\n        width: \"1px\",\n        height: \"75%\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 21\n      }\n    }) : /*#__PURE__*/React.createElement(React.Fragment, null));\n  }))))), /*#__PURE__*/React.createElement(Col, {\n    lg: \"4\",\n    md: \"12\",\n    sm: \"12\",\n    className: \"mb-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(LeafletMap, {\n    data: layerFarm,\n    sensor: sensorStats,\n    draw: draw,\n    zoom: mapConfig.zoom,\n    center: mapConfig.center,\n    fromAcrion: mapConfig.fromAction,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 412,\n      columnNumber: 9\n    }\n  }))), /*#__PURE__*/React.createElement(Row, {\n    className: \"d-flex justify-content-center align-items-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(FilterFields, {\n    smallStats: smallStats,\n    sensorsData: sensorsData,\n    crops: crops,\n    filteredByStatus: farms,\n    sensorStats: sensorStats,\n    fieldStats: fieldStats,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default Overview;","map":{"version":3,"names":["React","useEffect","useState","PropTypes","useHistory","Container","Row","Col","CardBody","Card","Button","Dropdown","DropdownToggle","DropdownMenu","DropdownItem","PageTitle","SmallStats","LeafletMap","SignalCellularNodataIcon","SignalCellular4BarIcon","api","useTranslation","FilterFields","swal","useSensorData","Overview","props","toggle","setToggle","farms","setFarms","polygon","circle","rectangle","polyline","marker","circlemarker","draw","setDraw","history","t","i18n","fieldStats","setFS","sensorStats","setSensorStats","userMapDetails","setUserMapDetails","layerFarm","setLayerFarm","zoom","center","fromAction","mapConfig","setMapConfig","sensorsData","toggleDropDown","getFieldStats","get","response","data","user_map_details","map_link_details","getSensorsStats","sensors","crops","setCrops","dataCrops","setDataCrops","fetchDataCrops","then","Crops","map","farm","fields","field","crop","push","type","id","fieldId","field_id","catch","err","console","log","getLayerFarm","res","DataFarm","critical","full","opt","item","status","smallStats","state","icon","label","value","chartLabels","attrs","md","sm","datasets","fill","borderWidth","backgroundColor","borderColor","online","offline","lowBatt","sensor","smallStats2","FilterByStatus","post","farmsData","title","ToSensorPage","window","location","reload","height","width","fontSize","display","justifyContent","alignItems","margin","flexDirection","flexWrap","stats","idx","borderStyle"],"sources":["/var/www/prod/smartfarm/backoffice/frontend/src/views/Overview.js"],"sourcesContent":["import React ,{useEffect,useState} from \"react\";\nimport PropTypes from \"prop-types\";\nimport {useHistory} from 'react-router-dom'\nimport { Container, Row, Col, CardBody, Card,Button,Dropdown,DropdownToggle,DropdownMenu,DropdownItem } from \"shards-react\";\nimport PageTitle from \"../components/common/PageTitle\";\nimport SmallStats from \"../components/common/SmallStats\";\nimport \"./../assets/Styles.css\";\nimport \"./Styles.css\";\nimport LeafletMap from \"./map\";\nimport SignalCellularNodataIcon from \"@mui/icons-material/SignalCellularNodata\";\nimport SignalCellular4BarIcon from \"@mui/icons-material/SignalCellular4Bar\";\n\nimport api from '../api/api';\nimport { useTranslation } from \"react-i18next\";\nimport FilterFields from './FilterFields'\nimport swal from \"sweetalert\";\nimport useSensorData from \"../utils/useSensorData\";\n\n\n\nconst Overview = (props) => {\n  const [toggle,setToggle] = useState(false)\n  const [farms,setFarms] = useState([]);\n  const [draw,setDraw] = useState({\n         polygon: false,\n        circle: false,\n        rectangle: false,\n        polyline: false,\n        marker: false,\n        circlemarker: false\n  })\n  const history = useHistory();\n  // const [offer,setOffer] = useState(null)\n\n  // let user = JSON.parse(localStorage.getItem(\"user\"));\n  // let offerType = user.offer_type;\n  const { t, i18n } = useTranslation();\n\n  const [fieldStats , setFS] = useState([])\n  const [sensorStats , setSensorStats] = useState([])\n\n  const [userMapDetails , setUserMapDetails] = useState(\"#\")\n  const [layerFarm , setLayerFarm] = useState([])\n  const [mapConfig,setMapConfig] = useState({\n    zoom:\"\",\n    center:[],\n    fromAction: false,\n  })\n  let sensorsData = useSensorData('/sensor/sensor-update-data')\n\n  const toggleDropDown = () => {\n    setToggle(!toggle)\n  }\n\n  const getFieldStats = async () => {\n    const response = await api.get('/dashboard/fields');\n    setFS(response.data.farms); \n    setUserMapDetails(response.data.user_map_details.map_link_details)\n  }\n\n  const getSensorsStats = async () => {\n    const response = await api.get('/dashboard/sensors');                            \n      setSensorStats(response.data.sensors);\n    }\n    const [crops , setCrops] =useState([])\n    const [dataCrops, setDataCrops] = useState([]);\n\n    const fetchDataCrops = async () => {\n        await api.get('/crop/crops')\n        .then(response => {\n          let dataCrops = response.data.farms;\n          setDataCrops(dataCrops)\n          let Crops = [];\n          dataCrops.map(farm => {\n            let fields = farm.fields;\n            if (fields) {\n              fields.map(field => {\n               let crops = field.crops\n               if(crops){\n                crops.map(crop=>{\n                  Crops.push({\n                    type : crop.type,\n                    id : crop.id,\n                    fieldId : crop.field_id\n                  })\n                })\n               }\n              })\n            }\n          })\n          setCrops(Crops)\n        }).catch(err=>{\n          console.log(err)\n        })\n      }\n\n     const getLayerFarm = async () =>{\n      await api.get('/farm/farms').then(res =>{\n        const DataFarm = res.data.farms;\n        setLayerFarm(DataFarm);\n      })\n     } \n\n    useEffect(()=>{\n      // getLastDataSensor()\n      getLayerFarm()\n      getFieldStats(); \n      getSensorsStats();\n      // fetchDataCrops()\n    },[])\n    let critical = 0;\n    let full = 0;\n    let opt = 0;\n            \n    fieldStats.map(item => {\n      item.fields.map(field=>{\n        let status = field.status\n        if(status){\n          if(status == \"Optimal\") {\n            opt++\n          }\n          if(status == \"Full\") {\n            full++\n          }\n          if(status == \"Critical\") {\n            critical++\n          }\n        }\n\n      })\n    });\n    \n \n\n\n    let smallStats = [\n      {\n        state: `${t('Critical')}`,\n        icon: <i class=\"fas fa-tint-slash\"></i>,\n        label: `${t('fields')}`,\n        value: critical,\n        chartLabels: [null, null, null, null, null, null, null],\n        attrs: { md: \"6\", sm: \"6\" },\n        datasets: [\n          {\n            label: \"Today\",\n            fill: \"start\",\n            borderWidth: 1.5,\n            backgroundColor: \"rgba(0, 184, 216, 0.1)\",\n            borderColor: \"rgb(0, 184, 216)\",\n            data: []\n          }\n        ]\n      },\n      {\n        state: `${t('Optimal')}`,\n        icon: <i class={\"far fa-check-circle\"}></i>,\n        label: `${t('fields')}`,\n        value: opt,\n        chartLabels: [null, null, null, null, null, null, null],\n        attrs: { md: \"6\", sm: \"6\" },\n        datasets: [\n          {\n            label: \"Today\",\n            fill: \"start\",\n            borderWidth: 1.5,\n            backgroundColor: \"rgba(23,198,113,0.1)\",\n            borderColor: \"rgb(23,198,113)\",\n            data: []\n          }\n        ]\n      },\n      {\n        state: `${t('Full')}`,\n        icon: <i class=\"fas fa-tint\"></i>,\n        label: `${t('fields')}`,\n        value:full,\n        chartLabels: [null, null, null, null, null, null, null],\n        attrs: { md: \"4\", sm: \"6\" },\n        datasets: [\n          {\n            label: \"Today\",\n            fill: \"start\",\n            borderWidth: 1.5,\n            backgroundColor: \"rgba(255,180,0,0.1)\",\n            borderColor: \"rgb(255,180,0)\",\n            data: []\n          }\n        ]\n      }\n    ]\n\n      let online = 0;\n      let offline = 0;\n      let lowBatt = 0;\n\n    sensorStats.map(item => {\n      let sensor = item.id;\n      if(sensor){\n        online++;\n      }\n    });\n\n    \n   let smallStats2 = [\n      {\n        state: `${t('online')}`,\n        icon: <SignalCellular4BarIcon />,\n        label: `${t('sensors')}`,\n        value: online,\n        chartLabels: [null, null, null, null, null, null, null],\n        attrs: { md: \"4\", sm: \"6\" },\n        datasets: [\n          {\n            label: \"Today\",\n            fill: \"start\",\n            borderWidth: 1.5,\n            backgroundColor: \"rgba(255,180,0,0.1)\",\n            borderColor: \"rgb(255,180,0)\",\n            data: []\n          }\n        ]\n      },\n      {\n        state: `${t('low_batt')}`,\n        icon: <i class=\"fas fa-battery-quarter\"></i>,\n        label: `${t('sensors')}`,\n        value: lowBatt,\n        chartLabels: [null, null, null, null, null, null, null],\n        attrs: { md: \"4\", sm: \"6\" },\n        datasets: [\n          {\n            label: \"Today\",\n            fill: \"start\",\n            borderWidth: 1.5,\n            backgroundColor: \"rgba(255,180,0,0.1)\",\n            borderColor: \"rgb(255,180,0)\",\n            data: []\n          }\n        ]\n      },\n      {\n        state: `${t('offline')}`,\n        icon: <SignalCellularNodataIcon />,\n        label: `${t('sensors')}`,\n        value: offline,\n        chartLabels: [null, null, null, null, null, null, null],\n        attrs: { md: \"4\", sm: \"6\" },\n        datasets: [\n          {\n            label: \"Today\",\n            fill: \"start\",\n            borderWidth: 1.5,\n            backgroundColor: \"rgba(255,180,0,0.1)\",\n            borderColor: \"rgb(255,180,0)\",\n            data: []\n          }\n        ]\n      }\n    ]\n\n \n\n     const  FilterByStatus = async (status) =>{\n        let data = {\n          status :status\n        }\n         await api.post('/field/field-status',data)\n         .then(response =>{ \n           let farmsData = response.data.farms\n           setFarms(farmsData);\n         }).catch((err)=>{\n          swal({\n            title: 'Error',\n            icon: \"error\"\n        });\n         })\n      }\n\n      const ToSensorPage =() => {\n        history.push('/Sensors') \n        window.location.reload()\n      }\n\n\n\nreturn(\n  <Container fluid className=\"main-content-container px-3\">\n    {/* Page Header */}\n    <Row noGutters className=\"page-header py-1 d-flex justify-content-between align-items-center border-bottom\">\n      <PageTitle title={t('overview')} className=\"text-sm-left mb-1\" />\n      <div className=\"d-flex justify-content-center align-items-center\">\n        <Button theme=\"success\" className=\"rounded-circle\" style={{ height: 50, width: 50 }} onClick={toggleDropDown} >\n          <i className=\"material-icons\" style={{ fontSize: 30, display: \"flex\", justifyContent: \"center\", alignItems: \"center\" }}>&#xe145;</i>\n        </Button>\n\n      </div>\n      {/* <Dropdown open={toggle} toggle={toggleDropDown} className=\"d-table\" style={{zIndex:3}}>\n        <DropdownToggle>Right Align</DropdownToggle>\n        <DropdownMenu right>\n          <DropdownItem>Action</DropdownItem>\n          <DropdownItem>Another action</DropdownItem>\n          <DropdownItem>Something else here</DropdownItem>\n        </DropdownMenu>\n      </Dropdown> */}\n    </Row>\n    {/* <Row >\n      <Col lg=\"12\" md=\"6\" sm=\"6\" className=\"mb-4\">\n        <h4 style={{ marginBottom: \"-15px\" }}>{t('stats')}</h4>\n      </Col>\n    </Row> */}\n\n    {/* Small Stats Blocks */}\n    <Row className=\"mt-4\">\n      <Col lg=\"4\" md=\"6\" sm=\"6\" className=\"mb-4\">\n        <p style={{ margin: 0 }}>{t('field_stats')}</p>\n        <Card small className=\"stats-small h-75\">\n          <CardBody className=\"p-2 d-flex  justify-content-center align-items-center\">\n            <div\n              style={{\n                display: \"flex\",\n                flexDirection: \"row\",\n                flexWrap: \"wrap\",\n                width: \"100%\"\n              }}\n            >\n              {/* <Stats /> */}\n              {smallStats.map((stats, idx) => (\n                <>\n                  <SmallStats\n                      FilterByStatus={FilterByStatus}\n                    style={{\n                      borderColor: \"blue\",\n                      borderWidth: 2,\n                      borderStyle: \"solid\"\n                    }}\n                    id={`small-stats-${idx}`}\n                    variation=\"1\"\n                    chartData={stats.datasets}\n                    chartLabels={stats.chartLabels}\n                    label={stats.label}\n                    value={stats.value}\n                    icon={stats.icon}\n                    state={stats.state}\n                  />\n                  {idx != 2 ? (\n                    <hr\n                      style={{\n                        backgroundColor: \"#ebebeb\",\n                        width: \"1px\",\n                        height: \"75%\"\n                      }}\n                    />\n                  ) : (\n                    <></>\n                  )}\n                </>\n              ))}\n            </div>\n          </CardBody>\n        </Card>\n      </Col>\n      <Col lg=\"4\" md=\"6\" sm=\"6\" className=\"mb-4\">\n        <p style={{ margin: 0 }}>{t('sensor_stats')}</p>\n        <Card small className=\"stats-small h-75\">\n          <CardBody className=\"p-2 d-flex justify-content-center align-items-center\">\n            <div\n              style={{\n                display: \"flex\",\n                flexDirection: \"row\",\n                flexWrap: \"wrap\",\n                width: \"100%\"\n              }}\n            >\n              {smallStats2.map((stats, idx) => (\n                <>\n                  <SmallStats\n                  ToSensorPage={ToSensorPage}\n                    style={{\n                      borderColor: \"blue\",\n                      borderWidth: 2,\n                      borderStyle: \"solid\"\n                    }}\n                    id={`small-stats-${idx}`}\n                    variation=\"1\"\n                    chartData={stats.datasets}\n                    chartLabels={stats.chartLabels}\n                    label={stats.label}\n                    value={stats.value}\n                    icon={stats.icon}\n                    state={stats.state}\n                  />\n                  {idx != 2 ? (\n                    <hr\n                      style={{\n                        backgroundColor: \"#ebebeb\",\n                        width: \"1px\",\n                        height: \"75%\"\n                      }}\n                    />\n                  ) : (\n                    <></>\n                  )}\n                </>\n              ))}\n            </div>\n          </CardBody>\n        </Card>\n      </Col>\n      <Col lg=\"4\" md=\"12\" sm=\"12\" className=\"mb-4\">\n        {/* <h4 style={{ marginBottom: \"-15px\" }}>{t('map')}</h4> */}\n        <LeafletMap data={layerFarm} sensor={sensorStats}  draw={draw} zoom={mapConfig.zoom} center={mapConfig.center} fromAcrion={mapConfig.fromAction}/>\n      </Col>\n    </Row>\n    <Row className=\"d-flex justify-content-center align-items-center\">\n    </Row>\n    <Row>\n        <FilterFields \n          smallStats={smallStats}\n          sensorsData={sensorsData}\n          crops={crops}\n          filteredByStatus={farms} \n          sensorStats={sensorStats} \n          fieldStats={fieldStats}\n          />\n    </Row>\n  </Container>\n  )}\n\n\nexport default Overview;\n"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAAyBC,QAAzB,QAAwC,OAAxC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAAQC,UAAR,QAAyB,kBAAzB;AACA,SAASC,SAAT,EAAoBC,GAApB,EAAyBC,GAAzB,EAA8BC,QAA9B,EAAwCC,IAAxC,EAA6CC,MAA7C,EAAoDC,QAApD,EAA6DC,cAA7D,EAA4EC,YAA5E,EAAyFC,YAAzF,QAA6G,cAA7G;AACA,OAAOC,SAAP,MAAsB,gCAAtB;AACA,OAAOC,UAAP,MAAuB,iCAAvB;AACA,OAAO,wBAAP;AACA,OAAO,cAAP;AACA,OAAOC,UAAP,MAAuB,OAAvB;AACA,OAAOC,wBAAP,MAAqC,0CAArC;AACA,OAAOC,sBAAP,MAAmC,wCAAnC;AAEA,OAAOC,GAAP,MAAgB,YAAhB;AACA,SAASC,cAAT,QAA+B,eAA/B;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,IAAP,MAAiB,YAAjB;AACA,OAAOC,aAAP,MAA0B,wBAA1B;;AAIA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,KAAD,EAAW;EAAA,gBACCxB,QAAQ,CAAC,KAAD,CADT;EAAA;EAAA,IACnByB,MADmB;EAAA,IACZC,SADY;;EAAA,iBAED1B,QAAQ,CAAC,EAAD,CAFP;EAAA;EAAA,IAEnB2B,KAFmB;EAAA,IAEbC,QAFa;;EAAA,iBAGH5B,QAAQ,CAAC;IACzB6B,OAAO,EAAE,KADgB;IAE1BC,MAAM,EAAE,KAFkB;IAG1BC,SAAS,EAAE,KAHe;IAI1BC,QAAQ,EAAE,KAJgB;IAK1BC,MAAM,EAAE,KALkB;IAM1BC,YAAY,EAAE;EANY,CAAD,CAHL;EAAA;EAAA,IAGnBC,IAHmB;EAAA,IAGdC,OAHc;;EAW1B,IAAMC,OAAO,GAAGnC,UAAU,EAA1B,CAX0B,CAY1B;EAEA;EACA;;EAf0B,sBAgBNiB,cAAc,EAhBR;EAAA,IAgBlBmB,CAhBkB,mBAgBlBA,CAhBkB;EAAA,IAgBfC,IAhBe,mBAgBfA,IAhBe;;EAAA,iBAkBGvC,QAAQ,CAAC,EAAD,CAlBX;EAAA;EAAA,IAkBnBwC,UAlBmB;EAAA,IAkBNC,KAlBM;;EAAA,iBAmBazC,QAAQ,CAAC,EAAD,CAnBrB;EAAA;EAAA,IAmBnB0C,WAnBmB;EAAA,IAmBLC,cAnBK;;EAAA,kBAqBmB3C,QAAQ,CAAC,GAAD,CArB3B;EAAA;EAAA,IAqBnB4C,cArBmB;EAAA,IAqBFC,iBArBE;;EAAA,kBAsBS7C,QAAQ,CAAC,EAAD,CAtBjB;EAAA;EAAA,IAsBnB8C,SAtBmB;EAAA,IAsBPC,YAtBO;;EAAA,kBAuBO/C,QAAQ,CAAC;IACxCgD,IAAI,EAAC,EADmC;IAExCC,MAAM,EAAC,EAFiC;IAGxCC,UAAU,EAAE;EAH4B,CAAD,CAvBf;EAAA;EAAA,IAuBnBC,SAvBmB;EAAA,IAuBTC,YAvBS;;EA4B1B,IAAIC,WAAW,GAAG/B,aAAa,CAAC,4BAAD,CAA/B;;EAEA,IAAMgC,cAAc,GAAG,SAAjBA,cAAiB,GAAM;IAC3B5B,SAAS,CAAC,CAACD,MAAF,CAAT;EACD,CAFD;;EAIA,IAAM8B,aAAa;IAAA,oEAAG;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OACGrC,GAAG,CAACsC,GAAJ,CAAQ,mBAAR,CADH;;YAAA;cACdC,QADc;cAEpBhB,KAAK,CAACgB,QAAQ,CAACC,IAAT,CAAc/B,KAAf,CAAL;cACAkB,iBAAiB,CAACY,QAAQ,CAACC,IAAT,CAAcC,gBAAd,CAA+BC,gBAAhC,CAAjB;;YAHoB;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAH;;IAAA,gBAAbL,aAAa;MAAA;IAAA;EAAA,GAAnB;;EAMA,IAAMM,eAAe;IAAA,qEAAG;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OACC3C,GAAG,CAACsC,GAAJ,CAAQ,oBAAR,CADD;;YAAA;cAChBC,QADgB;cAEpBd,cAAc,CAACc,QAAQ,CAACC,IAAT,CAAcI,OAAf,CAAd;;YAFoB;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAH;;IAAA,gBAAfD,eAAe;MAAA;IAAA;EAAA,GAArB;;EAxC0B,kBA4CE7D,QAAQ,CAAC,EAAD,CA5CV;EAAA;EAAA,IA4CjB+D,KA5CiB;EAAA,IA4CTC,QA5CS;;EAAA,kBA6CUhE,QAAQ,CAAC,EAAD,CA7ClB;EAAA;EAAA,IA6CjBiE,SA7CiB;EAAA,IA6CNC,YA7CM;;EA+CxB,IAAMC,cAAc;IAAA,qEAAG;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OACbjD,GAAG,CAACsC,GAAJ,CAAQ,aAAR,EACLY,IADK,CACA,UAAAX,QAAQ,EAAI;gBAChB,IAAIQ,SAAS,GAAGR,QAAQ,CAACC,IAAT,CAAc/B,KAA9B;gBACAuC,YAAY,CAACD,SAAD,CAAZ;gBACA,IAAII,KAAK,GAAG,EAAZ;gBACAJ,SAAS,CAACK,GAAV,CAAc,UAAAC,IAAI,EAAI;kBACpB,IAAIC,MAAM,GAAGD,IAAI,CAACC,MAAlB;;kBACA,IAAIA,MAAJ,EAAY;oBACVA,MAAM,CAACF,GAAP,CAAW,UAAAG,KAAK,EAAI;sBACnB,IAAIV,KAAK,GAAGU,KAAK,CAACV,KAAlB;;sBACA,IAAGA,KAAH,EAAS;wBACRA,KAAK,CAACO,GAAN,CAAU,UAAAI,IAAI,EAAE;0BACdL,KAAK,CAACM,IAAN,CAAW;4BACTC,IAAI,EAAGF,IAAI,CAACE,IADH;4BAETC,EAAE,EAAGH,IAAI,CAACG,EAFD;4BAGTC,OAAO,EAAGJ,IAAI,CAACK;0BAHN,CAAX;wBAKD,CAND;sBAOA;oBACD,CAXD;kBAYD;gBACF,CAhBD;gBAiBAf,QAAQ,CAACK,KAAD,CAAR;cACD,CAvBK,EAuBHW,KAvBG,CAuBG,UAAAC,GAAG,EAAE;gBACZC,OAAO,CAACC,GAAR,CAAYF,GAAZ;cACD,CAzBK,CADa;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAH;;IAAA,gBAAdd,cAAc;MAAA;IAAA;EAAA,GAApB;;EA6BC,IAAMiB,YAAY;IAAA,qEAAG;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OACdlE,GAAG,CAACsC,GAAJ,CAAQ,aAAR,EAAuBY,IAAvB,CAA4B,UAAAiB,GAAG,EAAG;gBACtC,IAAMC,QAAQ,GAAGD,GAAG,CAAC3B,IAAJ,CAAS/B,KAA1B;gBACAoB,YAAY,CAACuC,QAAD,CAAZ;cACD,CAHK,CADc;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAH;;IAAA,gBAAZF,YAAY;MAAA;IAAA;EAAA,GAAlB;;EAODrF,SAAS,CAAC,YAAI;IACZ;IACAqF,YAAY;IACZ7B,aAAa;IACbM,eAAe,GAJH,CAKZ;EACD,CANQ,EAMP,EANO,CAAT;EAOA,IAAI0B,QAAQ,GAAG,CAAf;EACA,IAAIC,IAAI,GAAG,CAAX;EACA,IAAIC,GAAG,GAAG,CAAV;EAEAjD,UAAU,CAAC8B,GAAX,CAAe,UAAAoB,IAAI,EAAI;IACrBA,IAAI,CAAClB,MAAL,CAAYF,GAAZ,CAAgB,UAAAG,KAAK,EAAE;MACrB,IAAIkB,MAAM,GAAGlB,KAAK,CAACkB,MAAnB;;MACA,IAAGA,MAAH,EAAU;QACR,IAAGA,MAAM,IAAI,SAAb,EAAwB;UACtBF,GAAG;QACJ;;QACD,IAAGE,MAAM,IAAI,MAAb,EAAqB;UACnBH,IAAI;QACL;;QACD,IAAGG,MAAM,IAAI,UAAb,EAAyB;UACvBJ,QAAQ;QACT;MACF;IAEF,CAdD;EAeD,CAhBD;EAqBA,IAAIK,UAAU,GAAG,CACf;IACEC,KAAK,YAAKvD,CAAC,CAAC,UAAD,CAAN,CADP;IAEEwD,IAAI,eAAE;MAAG,KAAK,EAAC,mBAAT;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EAFR;IAGEC,KAAK,YAAKzD,CAAC,CAAC,QAAD,CAAN,CAHP;IAIE0D,KAAK,EAAET,QAJT;IAKEU,WAAW,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,IAAzB,EAA+B,IAA/B,EAAqC,IAArC,CALf;IAMEC,KAAK,EAAE;MAAEC,EAAE,EAAE,GAAN;MAAWC,EAAE,EAAE;IAAf,CANT;IAOEC,QAAQ,EAAE,CACR;MACEN,KAAK,EAAE,OADT;MAEEO,IAAI,EAAE,OAFR;MAGEC,WAAW,EAAE,GAHf;MAIEC,eAAe,EAAE,wBAJnB;MAKEC,WAAW,EAAE,kBALf;MAME/C,IAAI,EAAE;IANR,CADQ;EAPZ,CADe,EAmBf;IACEmC,KAAK,YAAKvD,CAAC,CAAC,SAAD,CAAN,CADP;IAEEwD,IAAI,eAAE;MAAG,KAAK,EAAE,qBAAV;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EAFR;IAGEC,KAAK,YAAKzD,CAAC,CAAC,QAAD,CAAN,CAHP;IAIE0D,KAAK,EAAEP,GAJT;IAKEQ,WAAW,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,IAAzB,EAA+B,IAA/B,EAAqC,IAArC,CALf;IAMEC,KAAK,EAAE;MAAEC,EAAE,EAAE,GAAN;MAAWC,EAAE,EAAE;IAAf,CANT;IAOEC,QAAQ,EAAE,CACR;MACEN,KAAK,EAAE,OADT;MAEEO,IAAI,EAAE,OAFR;MAGEC,WAAW,EAAE,GAHf;MAIEC,eAAe,EAAE,sBAJnB;MAKEC,WAAW,EAAE,iBALf;MAME/C,IAAI,EAAE;IANR,CADQ;EAPZ,CAnBe,EAqCf;IACEmC,KAAK,YAAKvD,CAAC,CAAC,MAAD,CAAN,CADP;IAEEwD,IAAI,eAAE;MAAG,KAAK,EAAC,aAAT;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EAFR;IAGEC,KAAK,YAAKzD,CAAC,CAAC,QAAD,CAAN,CAHP;IAIE0D,KAAK,EAACR,IAJR;IAKES,WAAW,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,IAAzB,EAA+B,IAA/B,EAAqC,IAArC,CALf;IAMEC,KAAK,EAAE;MAAEC,EAAE,EAAE,GAAN;MAAWC,EAAE,EAAE;IAAf,CANT;IAOEC,QAAQ,EAAE,CACR;MACEN,KAAK,EAAE,OADT;MAEEO,IAAI,EAAE,OAFR;MAGEC,WAAW,EAAE,GAHf;MAIEC,eAAe,EAAE,qBAJnB;MAKEC,WAAW,EAAE,gBALf;MAME/C,IAAI,EAAE;IANR,CADQ;EAPZ,CArCe,CAAjB;EAyDE,IAAIgD,MAAM,GAAG,CAAb;EACA,IAAIC,OAAO,GAAG,CAAd;EACA,IAAIC,OAAO,GAAG,CAAd;EAEFlE,WAAW,CAAC4B,GAAZ,CAAgB,UAAAoB,IAAI,EAAI;IACtB,IAAImB,MAAM,GAAGnB,IAAI,CAACb,EAAlB;;IACA,IAAGgC,MAAH,EAAU;MACRH,MAAM;IACP;EACF,CALD;EAQD,IAAII,WAAW,GAAG,CACf;IACEjB,KAAK,YAAKvD,CAAC,CAAC,QAAD,CAAN,CADP;IAEEwD,IAAI,eAAE,oBAAC,sBAAD;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EAFR;IAGEC,KAAK,YAAKzD,CAAC,CAAC,SAAD,CAAN,CAHP;IAIE0D,KAAK,EAAEU,MAJT;IAKET,WAAW,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,IAAzB,EAA+B,IAA/B,EAAqC,IAArC,CALf;IAMEC,KAAK,EAAE;MAAEC,EAAE,EAAE,GAAN;MAAWC,EAAE,EAAE;IAAf,CANT;IAOEC,QAAQ,EAAE,CACR;MACEN,KAAK,EAAE,OADT;MAEEO,IAAI,EAAE,OAFR;MAGEC,WAAW,EAAE,GAHf;MAIEC,eAAe,EAAE,qBAJnB;MAKEC,WAAW,EAAE,gBALf;MAME/C,IAAI,EAAE;IANR,CADQ;EAPZ,CADe,EAmBf;IACEmC,KAAK,YAAKvD,CAAC,CAAC,UAAD,CAAN,CADP;IAEEwD,IAAI,eAAE;MAAG,KAAK,EAAC,wBAAT;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EAFR;IAGEC,KAAK,YAAKzD,CAAC,CAAC,SAAD,CAAN,CAHP;IAIE0D,KAAK,EAAEY,OAJT;IAKEX,WAAW,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,IAAzB,EAA+B,IAA/B,EAAqC,IAArC,CALf;IAMEC,KAAK,EAAE;MAAEC,EAAE,EAAE,GAAN;MAAWC,EAAE,EAAE;IAAf,CANT;IAOEC,QAAQ,EAAE,CACR;MACEN,KAAK,EAAE,OADT;MAEEO,IAAI,EAAE,OAFR;MAGEC,WAAW,EAAE,GAHf;MAIEC,eAAe,EAAE,qBAJnB;MAKEC,WAAW,EAAE,gBALf;MAME/C,IAAI,EAAE;IANR,CADQ;EAPZ,CAnBe,EAqCf;IACEmC,KAAK,YAAKvD,CAAC,CAAC,SAAD,CAAN,CADP;IAEEwD,IAAI,eAAE,oBAAC,wBAAD;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EAFR;IAGEC,KAAK,YAAKzD,CAAC,CAAC,SAAD,CAAN,CAHP;IAIE0D,KAAK,EAAEW,OAJT;IAKEV,WAAW,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,IAAzB,EAA+B,IAA/B,EAAqC,IAArC,CALf;IAMEC,KAAK,EAAE;MAAEC,EAAE,EAAE,GAAN;MAAWC,EAAE,EAAE;IAAf,CANT;IAOEC,QAAQ,EAAE,CACR;MACEN,KAAK,EAAE,OADT;MAEEO,IAAI,EAAE,OAFR;MAGEC,WAAW,EAAE,GAHf;MAIEC,eAAe,EAAE,qBAJnB;MAKEC,WAAW,EAAE,gBALf;MAME/C,IAAI,EAAE;IANR,CADQ;EAPZ,CArCe,CAAlB;;EA2DE,IAAOqD,cAAc;IAAA,qEAAG,kBAAOpB,MAAP;MAAA;MAAA;QAAA;UAAA;YAAA;cACjBjC,IADiB,GACV;gBACTiC,MAAM,EAAEA;cADC,CADU;cAAA;cAAA,OAIdzE,GAAG,CAAC8F,IAAJ,CAAS,qBAAT,EAA+BtD,IAA/B,EACLU,IADK,CACA,UAAAX,QAAQ,EAAG;gBACf,IAAIwD,SAAS,GAAGxD,QAAQ,CAACC,IAAT,CAAc/B,KAA9B;gBACAC,QAAQ,CAACqF,SAAD,CAAR;cACD,CAJK,EAIHjC,KAJG,CAIG,UAACC,GAAD,EAAO;gBACf5D,IAAI,CAAC;kBACH6F,KAAK,EAAE,OADJ;kBAEHpB,IAAI,EAAE;gBAFH,CAAD,CAAJ;cAIA,CATK,CAJc;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAH;;IAAA,gBAAdiB,cAAc;MAAA;IAAA;EAAA,GAArB;;EAgBC,IAAMI,YAAY,GAAE,SAAdA,YAAc,GAAM;IACxB9E,OAAO,CAACsC,IAAR,CAAa,UAAb;IACAyC,MAAM,CAACC,QAAP,CAAgBC,MAAhB;EACD,CAHD;;EAON,oBACE,oBAAC,SAAD;IAAW,KAAK,MAAhB;IAAiB,SAAS,EAAC,6BAA3B;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBAEE,oBAAC,GAAD;IAAK,SAAS,MAAd;IAAe,SAAS,EAAC,kFAAzB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE,oBAAC,SAAD;IAAW,KAAK,EAAEhF,CAAC,CAAC,UAAD,CAAnB;IAAiC,SAAS,EAAC,mBAA3C;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EADF,eAEE;IAAK,SAAS,EAAC,kDAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE,oBAAC,MAAD;IAAQ,KAAK,EAAC,SAAd;IAAwB,SAAS,EAAC,gBAAlC;IAAmD,KAAK,EAAE;MAAEiF,MAAM,EAAE,EAAV;MAAcC,KAAK,EAAE;IAArB,CAA1D;IAAqF,OAAO,EAAElE,cAA9F;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE;IAAG,SAAS,EAAC,gBAAb;IAA8B,KAAK,EAAE;MAAEmE,QAAQ,EAAE,EAAZ;MAAgBC,OAAO,EAAE,MAAzB;MAAiCC,cAAc,EAAE,QAAjD;MAA2DC,UAAU,EAAE;IAAvE,CAArC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,YADF,CADF,CAFF,CAFF,eA0BE,oBAAC,GAAD;IAAK,SAAS,EAAC,MAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE,oBAAC,GAAD;IAAK,EAAE,EAAC,GAAR;IAAY,EAAE,EAAC,GAAf;IAAmB,EAAE,EAAC,GAAtB;IAA0B,SAAS,EAAC,MAApC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE;IAAG,KAAK,EAAE;MAAEC,MAAM,EAAE;IAAV,CAAV;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAA0BvF,CAAC,CAAC,aAAD,CAA3B,CADF,eAEE,oBAAC,IAAD;IAAM,KAAK,MAAX;IAAY,SAAS,EAAC,kBAAtB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE,oBAAC,QAAD;IAAU,SAAS,EAAC,uDAApB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE;IACE,KAAK,EAAE;MACLoF,OAAO,EAAE,MADJ;MAELI,aAAa,EAAE,KAFV;MAGLC,QAAQ,EAAE,MAHL;MAILP,KAAK,EAAE;IAJF,CADT;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GASG5B,UAAU,CAACtB,GAAX,CAAe,UAAC0D,KAAD,EAAQC,GAAR;IAAA,oBACd,uDACE,oBAAC,UAAD;MACI,cAAc,EAAElB,cADpB;MAEE,KAAK,EAAE;QACLN,WAAW,EAAE,MADR;QAELF,WAAW,EAAE,CAFR;QAGL2B,WAAW,EAAE;MAHR,CAFT;MAOE,EAAE,wBAAiBD,GAAjB,CAPJ;MAQE,SAAS,EAAC,GARZ;MASE,SAAS,EAAED,KAAK,CAAC3B,QATnB;MAUE,WAAW,EAAE2B,KAAK,CAAC/B,WAVrB;MAWE,KAAK,EAAE+B,KAAK,CAACjC,KAXf;MAYE,KAAK,EAAEiC,KAAK,CAAChC,KAZf;MAaE,IAAI,EAAEgC,KAAK,CAAClC,IAbd;MAcE,KAAK,EAAEkC,KAAK,CAACnC,KAdf;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EADF,EAiBGoC,GAAG,IAAI,CAAP,gBACC;MACE,KAAK,EAAE;QACLzB,eAAe,EAAE,SADZ;QAELgB,KAAK,EAAE,KAFF;QAGLD,MAAM,EAAE;MAHH,CADT;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EADD,gBASC,yCA1BJ,CADc;EAAA,CAAf,CATH,CADF,CADF,CAFF,CADF,eAiDE,oBAAC,GAAD;IAAK,EAAE,EAAC,GAAR;IAAY,EAAE,EAAC,GAAf;IAAmB,EAAE,EAAC,GAAtB;IAA0B,SAAS,EAAC,MAApC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE;IAAG,KAAK,EAAE;MAAEM,MAAM,EAAE;IAAV,CAAV;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAA0BvF,CAAC,CAAC,cAAD,CAA3B,CADF,eAEE,oBAAC,IAAD;IAAM,KAAK,MAAX;IAAY,SAAS,EAAC,kBAAtB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE,oBAAC,QAAD;IAAU,SAAS,EAAC,sDAApB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE;IACE,KAAK,EAAE;MACLoF,OAAO,EAAE,MADJ;MAELI,aAAa,EAAE,KAFV;MAGLC,QAAQ,EAAE,MAHL;MAILP,KAAK,EAAE;IAJF,CADT;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAQGV,WAAW,CAACxC,GAAZ,CAAgB,UAAC0D,KAAD,EAAQC,GAAR;IAAA,oBACf,uDACE,oBAAC,UAAD;MACA,YAAY,EAAEd,YADd;MAEE,KAAK,EAAE;QACLV,WAAW,EAAE,MADR;QAELF,WAAW,EAAE,CAFR;QAGL2B,WAAW,EAAE;MAHR,CAFT;MAOE,EAAE,wBAAiBD,GAAjB,CAPJ;MAQE,SAAS,EAAC,GARZ;MASE,SAAS,EAAED,KAAK,CAAC3B,QATnB;MAUE,WAAW,EAAE2B,KAAK,CAAC/B,WAVrB;MAWE,KAAK,EAAE+B,KAAK,CAACjC,KAXf;MAYE,KAAK,EAAEiC,KAAK,CAAChC,KAZf;MAaE,IAAI,EAAEgC,KAAK,CAAClC,IAbd;MAcE,KAAK,EAAEkC,KAAK,CAACnC,KAdf;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EADF,EAiBGoC,GAAG,IAAI,CAAP,gBACC;MACE,KAAK,EAAE;QACLzB,eAAe,EAAE,SADZ;QAELgB,KAAK,EAAE,KAFF;QAGLD,MAAM,EAAE;MAHH,CADT;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EADD,gBASC,yCA1BJ,CADe;EAAA,CAAhB,CARH,CADF,CADF,CAFF,CAjDF,eAgGE,oBAAC,GAAD;IAAK,EAAE,EAAC,GAAR;IAAY,EAAE,EAAC,IAAf;IAAoB,EAAE,EAAC,IAAvB;IAA4B,SAAS,EAAC,MAAtC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBAEE,oBAAC,UAAD;IAAY,IAAI,EAAEzE,SAAlB;IAA6B,MAAM,EAAEJ,WAArC;IAAmD,IAAI,EAAEP,IAAzD;IAA+D,IAAI,EAAEgB,SAAS,CAACH,IAA/E;IAAqF,MAAM,EAAEG,SAAS,CAACF,MAAvG;IAA+G,UAAU,EAAEE,SAAS,CAACD,UAArI;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAFF,CAhGF,CA1BF,eA+HE,oBAAC,GAAD;IAAK,SAAS,EAAC,kDAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EA/HF,eAiIE,oBAAC,GAAD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACI,oBAAC,YAAD;IACE,UAAU,EAAE0C,UADd;IAEE,WAAW,EAAEvC,WAFf;IAGE,KAAK,EAAEU,KAHT;IAIE,gBAAgB,EAAEpC,KAJpB;IAKE,WAAW,EAAEe,WALf;IAME,UAAU,EAAEF,UANd;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EADJ,CAjIF,CADF;AA6II,CAvZJ;;AA0ZA,eAAejB,QAAf"},"metadata":{},"sourceType":"module"}