{"ast":null,"code":"import _regeneratorRuntime from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/var/www/prod/smartfarm/backoffice/frontend/src/admin/CalculSimulation.js\";\n\nimport React, { useState, useEffect } from 'react';\nimport api from '../api/api';\nimport { Container, Row, Col, CardBody, CardHeader, CardFooter, FormGroup, FormInput, ButtonGroup, FormSelect } from 'shards-react';\nimport PageTitle from '../components/common/PageTitle';\nimport { useTranslation } from 'react-i18next';\nimport { Modal } from \"react-bootstrap\";\nimport swal from 'sweetalert';\nimport { useHistory, useLocation } from 'react-router-dom/cjs/react-router-dom.min'; // import {Button, IconButton} from '@mui/material';\n\nimport SendIcon from '@mui/icons-material/Send';\nimport { Recommend } from '@mui/icons-material';\nimport SmsIcon from '@mui/icons-material/Sms';\nimport SummarizeIcon from '@mui/icons-material/Summarize';\nimport HistoryIcon from '@mui/icons-material/History';\nimport PreviewIcon from '@mui/icons-material/Preview';\nimport DownloadIcon from '@mui/icons-material/Download';\nimport AddIcon from '@mui/icons-material/Add';\nimport { Calendar, momentLocalizer } from \"react-big-calendar\";\nimport \"react-big-calendar/lib/css/react-big-calendar.css\";\nimport moment from \"moment\";\nimport \"moment/locale/nb\";\nimport { TextField, Button, Card, CardContent, Typography, Switch, LinearProgress } from '@mui/material';\nimport SimulationChart from './SimulationChart';\nvar localizer = momentLocalizer(moment);\n\nvar CalculSimulation = function CalculSimulation() {\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t,\n      i18n = _useTranslation.i18n;\n\n  var history = useHistory();\n  var location = useLocation();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      events = _useState2[0],\n      setEvents = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      showAllEvents = _useState4[0],\n      setShowAllEvents = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isEditMode = _useState6[0],\n      setIsEditMode = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      isSaving = _useState8[0],\n      setIsSaving = _useState8[1];\n\n  var _useState9 = useState(null),\n      _useState10 = _slicedToArray(_useState9, 2),\n      fieldData = _useState10[0],\n      setFieldData = _useState10[1]; // const {calculData } = location.state;\n\n\n  var initialData = location.state ? location.state.calculData : null;\n\n  var _useState11 = useState(initialData),\n      _useState12 = _slicedToArray(_useState11, 2),\n      calculData = _useState12[0],\n      setCalculData = _useState12[1];\n\n  if (!calculData) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 12\n      }\n    }, \"No data available\");\n  }\n\n  var toHoursAndMinutes = function toHoursAndMinutes(totalMinutes) {\n    var minutes = totalMinutes % 60;\n    var hours = Math.floor(totalMinutes / 60); // const hours = Math.floor(totalMinutes);\n    // return `${hours}h`;\n\n    return \"\".concat(hours, \"h \").concat(parseFloat(minutes).toFixed(0), \"m\");\n  };\n\n  useEffect(function () {\n    var data = [];\n    calculData && calculData.forEach(function (event) {\n      var startDate = new Date(event.start_date).toISOString().slice(0, 10);\n      var endDate = new Date(event.end_date).toISOString().slice(0, 10);\n      var resultCalcul = event.result;\n      var filteredEvents = resultCalcul.filter(function (result) {\n        var resultDate = new Date(result.date).toISOString().slice(0, 10);\n        return result.irrigationNbr === 1 && resultDate >= startDate && resultDate < endDate;\n      });\n      filteredEvents && filteredEvents.forEach(function (event) {\n        data.push({\n          title: /*#__PURE__*/React.createElement(\"div\", {\n            style: {\n              fontSize: 11.5\n            },\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 17\n            }\n          }, /*#__PURE__*/React.createElement(\"div\", {\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 19\n            }\n          }, 'Irrigation Dose : ' + parseFloat(event.irrigation).toFixed(2) + ' mm'), /*#__PURE__*/React.createElement(\"div\", {\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 19\n            }\n          }, 'Irrigation Time : ' + toHoursAndMinutes(event.irrigationTime)), /*#__PURE__*/React.createElement(\"div\", {\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 19\n            }\n          }, 'Watering Rainfall : ' + parseFloat(event.pluieArrosage).toFixed(2) + ' mm')),\n          allDay: true,\n          start: new Date(event.date),\n          end: new Date(event.date),\n          source: \"resultCalcul\"\n        });\n      });\n    });\n    setEvents(data);\n  }, [calculData]);\n\n  var handleChange = function handleChange(index, field, value) {\n    var newData = _toConsumableArray(calculData);\n\n    newData[index].inputs[0][field] = Number(value);\n    setCalculData(newData);\n  };\n\n  var handleSave = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var updatePromises, updatedData;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              setIsSaving(true);\n              updatePromises = calculData.map( /*#__PURE__*/function () {\n                var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(data) {\n                  var field_id, inputs, _inputs$, RUmax, effPluie, effIrrig, irrigArea, ruPratique, profondeur, payload, response;\n\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          field_id = data.field_id, inputs = data.inputs;\n                          _inputs$ = inputs[0], RUmax = _inputs$.RUmax, effPluie = _inputs$.effPluie, effIrrig = _inputs$.effIrrig, irrigArea = _inputs$.irrigArea, ruPratique = _inputs$.ruPratique, profondeur = _inputs$.profondeur;\n                          payload = {\n                            fieldId: field_id,\n                            RUmax: RUmax,\n                            effPluie: effPluie,\n                            effIrrig: effIrrig,\n                            irrigArea: irrigArea,\n                            ruPratique: ruPratique,\n                            profondeur: profondeur\n                          };\n                          _context.next = 5;\n                          return api.post('/admin/edit-bilan-hydrique', payload);\n\n                        case 5:\n                          response = _context.sent;\n                          return _context.abrupt(\"return\", response.data);\n\n                        case 7:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                }));\n\n                return function (_x) {\n                  return _ref2.apply(this, arguments);\n                };\n              }());\n              _context2.next = 5;\n              return Promise.all(updatePromises);\n\n            case 5:\n              updatedData = _context2.sent;\n\n              if (updatedData && typeof updatedData !== 'undefined') {\n                setCalculData(updatedData[0].data);\n                swal(\"Success\", \"Data saved successfully!\", \"success\");\n              }\n\n              _context2.next = 13;\n              break;\n\n            case 9:\n              _context2.prev = 9;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.error('Error saving data:', _context2.t0);\n              swal(\"Error\", \"Failed to save data!\", \"error\");\n\n            case 13:\n              _context2.prev = 13;\n              setIsSaving(false);\n              return _context2.finish(13);\n\n            case 16:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 9, 13, 16]]);\n    }));\n\n    return function handleSave() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var _useState13 = useState([]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      chartData = _useState14[0],\n      setChartData = _useState14[1];\n\n  useEffect(function () {\n    var dataDisplayed = []; // let ET0 = 0\n\n    var RuMax = '';\n    var todayDate = new Date();\n    var today = todayDate.toISOString().slice(0, 10);\n    var filteredResult = [];\n    calculData && calculData.map(function (result) {\n      var resultData = result.result;\n      var startDate = new Date(result.start_date).toISOString().slice(0, 10);\n      var endDate = new Date(result.end_date).toISOString().slice(0, 10); // inputsCalcul = result.inputs\n\n      if (today >= startDate && today <= endDate) {\n        filteredResult = resultData.filter(function (result) {\n          var resultDate = new Date(result.date).toISOString().slice(0, 10);\n          return startDate <= resultDate && endDate >= resultDate;\n        });\n      }\n\n      if (resultData) {\n        filteredResult.map(function (data) {\n          dataDisplayed.push({\n            bilan: data.bilan,\n            ETC: data.Etc,\n            ET0: data.ET0,\n            kc: data.kc,\n            dates: data.date,\n            RUmax: data.RUmax,\n            RUmin: data.RUMin\n          });\n        });\n      }\n    });\n    setChartData(dataDisplayed);\n  }, [calculData]);\n  useEffect(function () {\n    var getFieldById = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var fieldId, response, data;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                fieldId = location.pathname.split('/')[3];\n                _context3.next = 4;\n                return api.get(\"/admin/fields/\".concat(fieldId));\n\n              case 4:\n                response = _context3.sent;\n                _context3.next = 7;\n                return response.data.field;\n\n              case 7:\n                data = _context3.sent;\n                setFieldData(data);\n                _context3.next = 14;\n                break;\n\n              case 11:\n                _context3.prev = 11;\n                _context3.t0 = _context3[\"catch\"](0);\n                console.log(_context3.t0);\n\n              case 14:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 11]]);\n      }));\n\n      return function getFieldById() {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    getFieldById();\n  }, []);\n\n  var extractDataForSimulation = function extractDataForSimulation(fieldData) {\n    if (fieldData) {\n      var Latitude = fieldData.Latitude,\n          Longitude = fieldData.Longitude,\n          crops = fieldData.crops,\n          zones = fieldData.zones;\n      var crop = crops[0];\n      var irrigation = crop.irrigations[0];\n      var zone = zones[0];\n      return {\n        DataIrrigations: [{\n          drippers: irrigation.drippers,\n          flowrate: irrigation.flowrate\n        }],\n        DataCrops: [{\n          surface: crop.surface\n        }],\n        ruPratiqueData: zone.ruPratique || crop.practical_fraction,\n        RUmaxData: zone.RUmax,\n        dosePercentage: crop.dose_efficiency || 100,\n        // Default to 100 if not provided\n        effPluie: zone.effPluie,\n        effIrrig: irrigation.effIrrig || zone.effIrrig,\n        irrigArea: zone.irrigArea || crop.surface,\n        days: crop.days,\n        profondeur: crop.rootDepth,\n        startPlantingDate: new Date(crop.plantingDate),\n        rainConfig: {\n          rainByDay: {},\n          // Fill with actual rain data if available\n          rainByMonth: {} // Fill with actual rain data if available\n\n        },\n        dataCrop: [{\n          all_kc: crop.croptypes.all_kc\n        }],\n        latField: Latitude,\n        lonField: Longitude,\n        fieldsId: fieldData.id,\n        codeSensor: fieldData.sensors[0].code\n      };\n    }\n  }; // API Call\n\n\n  var sendSimulationData = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(data) {\n      var dataCalcul, response, result;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              dataCalcul = {\n                DataIrrigations: data.DataIrrigations,\n                DataCrops: data.DataCrops,\n                ruPratiqueData: data.ruPratiqueData,\n                RUmaxData: data.RUmaxData,\n                dosePercentage: data.dosePercentage,\n                effPluie: data.effPluie,\n                effIrrig: data.effIrrig,\n                irrigArea: data.irrigArea,\n                days: data.days,\n                profondeur: data.profondeur,\n                startPlantingDate: data.startPlantingDate,\n                rainConfig: data.rainConfig,\n                dataCrop: data.dataCrop,\n                latField: data.latField,\n                lonField: data.lonField,\n                fieldsId: data.fieldsId,\n                codeSensor: data.codeSensor\n              };\n              _context4.prev = 1;\n              _context4.next = 4;\n              return api.post('/admin/calculSimulation', dataCalcul);\n\n            case 4:\n              response = _context4.sent;\n              _context4.next = 7;\n              return response.json();\n\n            case 7:\n              result = _context4.sent;\n              console.log('Simulation Result:', result);\n              _context4.next = 14;\n              break;\n\n            case 11:\n              _context4.prev = 11;\n              _context4.t0 = _context4[\"catch\"](1);\n              console.error('Error sending simulation data:', _context4.t0);\n\n            case 14:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[1, 11]]);\n    }));\n\n    return function sendSimulationData(_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }(); // Extract data and send to API\n\n\n  var simulationData = extractDataForSimulation(fieldData);\n  console.log(simulationData); //  sendSimulationData(simulationData);\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Container, {\n    className: \"p-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    noGutters: true,\n    className: \"page-header py-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(PageTitle, {\n    sm: \"4\",\n    title: t('Water Balance Simulation') // subtitle={t('Water Balance Simulation')}\n    ,\n    className: \"text-sm-left\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Row, {\n    className: \"mb-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xs: 12,\n    className: \"d-flex justify-content-end\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body1\",\n    className: \"mr-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 21\n    }\n  }, t('Edit Mode')), /*#__PURE__*/React.createElement(Switch, {\n    checked: isEditMode,\n    onChange: function onChange() {\n      return setIsEditMode(!isEditMode);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 21\n    }\n  }))), calculData && calculData.map(function (data, index) {\n    var inputs = data.inputs;\n    return /*#__PURE__*/React.createElement(Card, {\n      key: index,\n      className: \"my-3\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(CardContent, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h6\",\n      gutterBottom: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 23\n      }\n    }, t(\"Simulation \".concat(index + 1))), /*#__PURE__*/React.createElement(Row, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      xs: 12,\n      sm: 6,\n      md: 4,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      label: \"RU Pratique\",\n      value: inputs[0].ruPratique,\n      onChange: function onChange(e) {\n        return handleChange(index, 'ruPratique', e.target.value);\n      },\n      fullWidth: true,\n      margin: \"normal\",\n      type: \"number\",\n      InputProps: {\n        readOnly: !isEditMode\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 31\n      }\n    })), /*#__PURE__*/React.createElement(Col, {\n      xs: 12,\n      sm: 6,\n      md: 4,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      label: \"RU Max\",\n      value: inputs[0].RUmax,\n      onChange: function onChange(e) {\n        return handleChange(index, 'RUmax', e.target.value);\n      },\n      fullWidth: true,\n      margin: \"normal\",\n      type: \"number\",\n      InputProps: {\n        readOnly: !isEditMode\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 31\n      }\n    })), /*#__PURE__*/React.createElement(Col, {\n      xs: 12,\n      sm: 6,\n      md: 4,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      label: \"Effective Pluie\",\n      value: inputs[0].effPluie,\n      onChange: function onChange(e) {\n        return handleChange(index, 'effPluie', e.target.value);\n      },\n      fullWidth: true,\n      margin: \"normal\",\n      type: \"number\",\n      InputProps: {\n        readOnly: !isEditMode\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 31\n      }\n    })), /*#__PURE__*/React.createElement(Col, {\n      xs: 12,\n      sm: 6,\n      md: 4,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      label: \"Effective Irrigation\",\n      value: inputs[0].effIrrig,\n      onChange: function onChange(e) {\n        return handleChange(index, 'effIrrig', e.target.value);\n      },\n      fullWidth: true,\n      margin: \"normal\",\n      type: \"number\",\n      InputProps: {\n        readOnly: !isEditMode\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 31\n      }\n    })), /*#__PURE__*/React.createElement(Col, {\n      xs: 12,\n      sm: 6,\n      md: 4,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      label: \"Irrigation Area\",\n      value: inputs[0].irrigArea,\n      onChange: function onChange(e) {\n        return handleChange(index, 'irrigArea', e.target.value);\n      },\n      fullWidth: true,\n      margin: \"normal\",\n      type: \"number\",\n      InputProps: {\n        readOnly: !isEditMode\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 31\n      }\n    })), /*#__PURE__*/React.createElement(Col, {\n      xs: 12,\n      sm: 6,\n      md: 4,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      label: \"Profondeur\",\n      value: inputs[0].profondeur,\n      onChange: function onChange(e) {\n        return handleChange(index, 'profondeur', e.target.value);\n      },\n      fullWidth: true,\n      margin: \"normal\",\n      type: \"number\",\n      InputProps: {\n        readOnly: !isEditMode\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 31\n      }\n    })), /*#__PURE__*/React.createElement(Col, {\n      xs: 12,\n      sm: 6,\n      md: 4,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      label: \"Planting Date\",\n      value: inputs[0].plantingDate,\n      onChange: function onChange(e) {\n        return handleChange(index, 'plantingDate', e.target.value);\n      },\n      fullWidth: true,\n      margin: \"normal\",\n      type: \"date\",\n      InputLabelProps: {\n        shrink: true\n      },\n      InputProps: {\n        readOnly: !isEditMode\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 31\n      }\n    }))), /*#__PURE__*/React.createElement(Row, {\n      className: \"d-flex justify-content-center mt-4\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: handleSave,\n      disabled: !isEditMode,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 25\n      }\n    }, t('Save Changes')))));\n  }), isSaving ? /*#__PURE__*/React.createElement(LinearProgress, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 24\n    }\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: \"12\",\n    md: \"12\",\n    sm: \"12\",\n    className: \"mb-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 408,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(CardBody, {\n    className: \"p-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(SimulationChart, {\n    data: chartData,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 411,\n      columnNumber: 19\n    }\n  }))))), /*#__PURE__*/React.createElement(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: \"12\",\n    md: \"12\",\n    sm: \"12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 422,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(CardBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      height: 590\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Calendar, {\n    key: events.length,\n    localizer: localizer,\n    events: events,\n    culture: \"en-GB\",\n    views: [\"month\", \"week\", \"day\"],\n    startAccessor: \"start\",\n    endAccessor: \"end\",\n    eventPropGetter: function eventPropGetter(event, start, end, isSelected) {\n      return {\n        event: event,\n        start: start,\n        end: end,\n        isSelected: isSelected,\n        style: {\n          backgroundColor: \"#26A6B7\"\n        }\n      };\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 27\n    }\n  })))))))));\n};\n\nexport default CalculSimulation;","map":{"version":3,"names":["React","useState","useEffect","api","Container","Row","Col","CardBody","CardHeader","CardFooter","FormGroup","FormInput","ButtonGroup","FormSelect","PageTitle","useTranslation","Modal","swal","useHistory","useLocation","SendIcon","Recommend","SmsIcon","SummarizeIcon","HistoryIcon","PreviewIcon","DownloadIcon","AddIcon","Calendar","momentLocalizer","moment","TextField","Button","Card","CardContent","Typography","Switch","LinearProgress","SimulationChart","localizer","CalculSimulation","t","i18n","history","location","events","setEvents","showAllEvents","setShowAllEvents","isEditMode","setIsEditMode","isSaving","setIsSaving","fieldData","setFieldData","initialData","state","calculData","setCalculData","toHoursAndMinutes","totalMinutes","minutes","hours","Math","floor","parseFloat","toFixed","data","forEach","event","startDate","Date","start_date","toISOString","slice","endDate","end_date","resultCalcul","result","filteredEvents","filter","resultDate","date","irrigationNbr","push","title","fontSize","irrigation","irrigationTime","pluieArrosage","allDay","start","end","source","handleChange","index","field","value","newData","inputs","Number","handleSave","updatePromises","map","field_id","RUmax","effPluie","effIrrig","irrigArea","ruPratique","profondeur","payload","fieldId","post","response","Promise","all","updatedData","console","error","chartData","setChartData","dataDisplayed","RuMax","todayDate","today","filteredResult","resultData","bilan","ETC","Etc","ET0","kc","dates","RUmin","RUMin","getFieldById","pathname","split","get","log","extractDataForSimulation","Latitude","Longitude","crops","zones","crop","irrigations","zone","DataIrrigations","drippers","flowrate","DataCrops","surface","ruPratiqueData","practical_fraction","RUmaxData","dosePercentage","dose_efficiency","days","rootDepth","startPlantingDate","plantingDate","rainConfig","rainByDay","rainByMonth","dataCrop","all_kc","croptypes","latField","lonField","fieldsId","id","codeSensor","sensors","code","sendSimulationData","dataCalcul","json","simulationData","e","target","readOnly","shrink","height","length","isSelected","style","backgroundColor"],"sources":["/var/www/prod/smartfarm/backoffice/frontend/src/admin/CalculSimulation.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport api from '../api/api'\r\nimport { Container, Row, Col, CardBody, CardHeader, CardFooter, FormGroup, FormInput, ButtonGroup, FormSelect } from 'shards-react'\r\nimport PageTitle from '../components/common/PageTitle'\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Modal } from \"react-bootstrap\";\r\nimport swal from 'sweetalert';\r\nimport { useHistory, useLocation } from 'react-router-dom/cjs/react-router-dom.min';\r\n// import {Button, IconButton} from '@mui/material';\r\nimport SendIcon from '@mui/icons-material/Send';\r\nimport { Recommend } from '@mui/icons-material';\r\nimport SmsIcon from '@mui/icons-material/Sms';\r\nimport SummarizeIcon from '@mui/icons-material/Summarize';\r\nimport HistoryIcon from '@mui/icons-material/History';\r\nimport PreviewIcon from '@mui/icons-material/Preview';\r\nimport DownloadIcon from '@mui/icons-material/Download';\r\nimport AddIcon from '@mui/icons-material/Add';\r\nimport { Calendar, momentLocalizer } from \"react-big-calendar\";\r\nimport \"react-big-calendar/lib/css/react-big-calendar.css\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/nb\";\r\nimport { TextField, Button, Card, CardContent, Typography ,Switch ,LinearProgress  } from '@mui/material';\r\nimport SimulationChart from './SimulationChart';\r\n\r\nconst localizer = momentLocalizer(moment);\r\n\r\nconst CalculSimulation = () => {\r\n  \r\n  const { t, i18n } = useTranslation();\r\n  const history = useHistory()\r\n  const location = useLocation();\r\n  const [events, setEvents] = useState([]);\r\n  const [showAllEvents, setShowAllEvents] = useState(true);\r\n  const [isEditMode, setIsEditMode] = useState(false);\r\n  const [isSaving, setIsSaving] = useState(false);\r\n  const [fieldData, setFieldData] = useState(null);\r\n    // const {calculData } = location.state;\r\n\r\n    const initialData = location.state ? location.state.calculData : null;\r\n    const [calculData, setCalculData] = useState(initialData);\r\n  if (!calculData) {\r\n    return <div>No data available</div>;\r\n  }\r\n  const toHoursAndMinutes = (totalMinutes) => {\r\n    const minutes = totalMinutes % 60;\r\n    const hours = Math.floor(totalMinutes / 60);\r\n    // const hours = Math.floor(totalMinutes);\r\n\r\n    // return `${hours}h`;\r\n     return `${hours}h ${parseFloat(minutes).toFixed(0)}m`;\r\n  }\r\n  useEffect(() => {\r\n    let data = [];\r\n    calculData &&\r\n      calculData.forEach((event) => {\r\n        let startDate = new Date(event.start_date).toISOString().slice(0, 10);\r\n        let endDate = new Date(event.end_date).toISOString().slice(0, 10);\r\n        let resultCalcul = event.result;\r\n\r\n        const filteredEvents = resultCalcul.filter((result) => {\r\n          let resultDate = new Date(result.date).toISOString().slice(0, 10);\r\n\r\n          return (\r\n            result.irrigationNbr === 1 &&\r\n            resultDate >= startDate &&\r\n            resultDate < endDate\r\n          );\r\n        });\r\n\r\n        filteredEvents &&\r\n          filteredEvents.forEach((event) => {\r\n            data.push({\r\n              title: (\r\n                <div style={{ fontSize: 11.5 }}>\r\n                  <div>{'Irrigation Dose : ' + parseFloat(event.irrigation).toFixed(2) + ' mm'}</div>\r\n                  <div>{'Irrigation Time : ' + toHoursAndMinutes(event.irrigationTime)}</div>\r\n                  <div>{'Watering Rainfall : ' + parseFloat(event.pluieArrosage).toFixed(2) + ' mm'}</div>\r\n                  {/* <div>{'Rain : ' + parseFloat(event.rain).toFixed(2) + ' mm'}</div> */}\r\n                </div>\r\n              ),\r\n              allDay: true,\r\n              start: new Date(event.date),\r\n              end: new Date(event.date),\r\n              source: \"resultCalcul\",\r\n            });\r\n          });\r\n      });\r\n    setEvents(data);\r\n  }, [calculData ]);\r\n\r\n  const handleChange = (index, field, value) => {\r\n    const newData = [...calculData];\r\n    newData[index].inputs[0][field] = Number(value);\r\n    setCalculData(newData);\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    try {\r\n      setIsSaving(true);\r\n      const updatePromises = calculData.map(async (data) => {\r\n        const { field_id, inputs } = data;\r\n        const { RUmax, effPluie, effIrrig, irrigArea, ruPratique, profondeur } = inputs[0];\r\n        \r\n        const payload = {\r\n          fieldId: field_id,\r\n          RUmax,\r\n          effPluie,\r\n          effIrrig,\r\n          irrigArea,\r\n          ruPratique,\r\n          profondeur\r\n        };\r\n        const response = await api.post('/admin/edit-bilan-hydrique', payload);\r\n        return response.data;\r\n      });\r\n      \r\n      const updatedData = await Promise.all(updatePromises);\r\n      if(updatedData && typeof updatedData !== 'undefined'){\r\n        setCalculData(updatedData[0].data)\r\n        swal(\"Success\", \"Data saved successfully!\", \"success\");\r\n\r\n      }\r\n    } catch (error) {\r\n      console.error('Error saving data:', error);\r\n      swal(\"Error\", \"Failed to save data!\", \"error\");\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n  const [chartData, setChartData] = useState([])\r\n\r\n  useEffect(() => {\r\n    let dataDisplayed = []\r\n    // let ET0 = 0\r\n    let RuMax = ''\r\n    let todayDate = new Date()\r\n    let today = todayDate.toISOString().slice(0, 10)\r\n    let filteredResult = [];\r\n\r\n    calculData && calculData.map(result => {\r\n      let resultData = result.result\r\n      let startDate = new Date(result.start_date).toISOString().slice(0, 10)\r\n      let endDate = new Date(result.end_date).toISOString().slice(0, 10)\r\n      // inputsCalcul = result.inputs\r\n      if (today >= startDate && today <= endDate) {\r\n          filteredResult = resultData.filter(result => {\r\n              let resultDate = new Date(result.date).toISOString().slice(0, 10)\r\n              return startDate <= resultDate && endDate >= resultDate\r\n          })\r\n      }\r\n      if (resultData) {\r\n        filteredResult.map(data=>{\r\n          dataDisplayed.push({\r\n            bilan: data.bilan,\r\n            ETC: data.Etc,\r\n            ET0: data.ET0,\r\n            kc:data.kc,\r\n            dates: data.date,\r\n            RUmax: data.RUmax,\r\n            RUmin: data.RUMin\r\n  \r\n          })\r\n\r\n        })\r\n      }\r\n    })\r\n\r\n    setChartData(dataDisplayed)\r\n  }, [calculData])\r\n\r\n  useEffect(() => {\r\n    const getFieldById = async () => {\r\n      try {\r\n        const fieldId = location.pathname.split('/')[3]\r\n       \r\n          const response = await api.get(`/admin/fields/${fieldId}`)\r\n          const data = await response.data.field\r\n          setFieldData(data)\r\n        \r\n      } catch (error) { \r\n          console.log(error)\r\n      }\r\n    }\r\n\r\n    getFieldById()\r\n  },[]) \r\n\r\n  const extractDataForSimulation = (fieldData) => {\r\n    if (fieldData) {\r\n      const { Latitude, Longitude, crops, zones } = fieldData;\r\n      const crop = crops[0];\r\n      const irrigation = crop.irrigations[0];\r\n      const zone = zones[0];\r\n    \r\n      return {\r\n        DataIrrigations: [\r\n          {\r\n            drippers: irrigation.drippers,\r\n            flowrate: irrigation.flowrate,\r\n          },\r\n        ],\r\n        DataCrops: [\r\n          {\r\n            surface: crop.surface,\r\n          },\r\n        ],\r\n        ruPratiqueData: zone.ruPratique || crop.practical_fraction,\r\n        RUmaxData: zone.RUmax,\r\n        dosePercentage: crop.dose_efficiency || 100, // Default to 100 if not provided\r\n        effPluie: zone.effPluie,\r\n        effIrrig: irrigation.effIrrig || zone.effIrrig,\r\n        irrigArea: zone.irrigArea || crop.surface,\r\n        days: crop.days,\r\n        profondeur: crop.rootDepth,\r\n        startPlantingDate: new Date(crop.plantingDate),\r\n        rainConfig: {\r\n          rainByDay: {}, // Fill with actual rain data if available\r\n          rainByMonth: {}, // Fill with actual rain data if available\r\n        },\r\n        dataCrop: [{all_kc : crop.croptypes.all_kc}],\r\n        latField: Latitude,\r\n        lonField: Longitude,\r\n        fieldsId: fieldData.id,\r\n        codeSensor: fieldData.sensors[0].code,\r\n      };\r\n\r\n    }\r\n  };\r\n  \r\n  // API Call\r\n  const sendSimulationData = async (data) => {\r\n    const dataCalcul = {\r\n      DataIrrigations: data.DataIrrigations,\r\n      DataCrops: data.DataCrops,\r\n      ruPratiqueData: data.ruPratiqueData,\r\n      RUmaxData: data.RUmaxData,\r\n      dosePercentage: data.dosePercentage,\r\n      effPluie: data.effPluie,\r\n      effIrrig: data.effIrrig,\r\n      irrigArea: data.irrigArea,\r\n      days: data.days,\r\n      profondeur: data.profondeur,\r\n      startPlantingDate: data.startPlantingDate,\r\n      rainConfig: data.rainConfig,\r\n      dataCrop: data.dataCrop,\r\n      latField: data.latField,\r\n      lonField: data.lonField,\r\n      fieldsId: data.fieldsId,\r\n      codeSensor: data.codeSensor,\r\n    }\r\n    try {\r\n      const response = await api.post('/admin/calculSimulation', dataCalcul);\r\n      const result = await response.json();\r\n      console.log('Simulation Result:', result);\r\n    } catch (error) {\r\n      console.error('Error sending simulation data:', error);\r\n    }\r\n  };\r\n  \r\n  // Extract data and send to API\r\n  const simulationData = extractDataForSimulation(fieldData);\r\n  console.log(simulationData)\r\n\r\n  //  sendSimulationData(simulationData);\r\n  return (\r\n    <>\r\n        <Container className=\"p-4\">\r\n            <Row noGutters className=\"page-header py-4\">\r\n            <PageTitle\r\n                sm=\"4\"\r\n                title={t('Water Balance Simulation')}\r\n                // subtitle={t('Water Balance Simulation')}\r\n                className=\"text-sm-left\"\r\n            />\r\n            </Row>\r\n            <Row className=\"mb-3\">\r\n                <Col xs={12} className=\"d-flex justify-content-end\">\r\n                    <Typography variant=\"body1\" className=\"mr-2\">{t('Edit Mode')}</Typography>\r\n                    <Switch checked={isEditMode} onChange={() => setIsEditMode(!isEditMode)} />\r\n                </Col>\r\n            </Row>\r\n            {\r\n          calculData && calculData.map((data, index) => {\r\n            let inputs = data.inputs\r\n           return (\r\n              <Card key={index} className=\"my-3\">\r\n                  <CardContent>\r\n                      <Typography variant=\"h6\" gutterBottom>\r\n                          {t(`Simulation ${index + 1}`)}\r\n                      </Typography>\r\n                      <Row>\r\n                          <Col xs={12} sm={6} md={4}>\r\n                              <TextField\r\n                                  label=\"RU Pratique\"\r\n                                  value={inputs[0].ruPratique}\r\n                                  onChange={(e) => handleChange(index, 'ruPratique', e.target.value)}\r\n                                  fullWidth\r\n                                  margin=\"normal\"\r\n                                  type=\"number\"\r\n                                  InputProps={{\r\n                                    readOnly: !isEditMode,\r\n                                }}\r\n                              />\r\n                          </Col>\r\n                          <Col xs={12} sm={6} md={4}>\r\n                              <TextField\r\n                                  label=\"RU Max\"\r\n                                  value={inputs[0].RUmax}\r\n                                   onChange={(e) => handleChange(index, 'RUmax', e.target.value)}\r\n                                  fullWidth\r\n                                  margin=\"normal\"\r\n                                  type=\"number\"\r\n                                  InputProps={{\r\n                                    readOnly: !isEditMode,\r\n                                }}\r\n                              />\r\n                          </Col>\r\n                          <Col xs={12} sm={6} md={4}>\r\n                              <TextField\r\n                                  label=\"Effective Pluie\"\r\n                                  value={inputs[0].effPluie}\r\n                                   onChange={(e) => handleChange(index, 'effPluie', e.target.value)}\r\n                                  fullWidth\r\n                                  margin=\"normal\"\r\n                                  type=\"number\"\r\n                                  InputProps={{\r\n                                    readOnly: !isEditMode,\r\n                                }}\r\n                              />\r\n                          </Col>\r\n                          <Col xs={12} sm={6} md={4}>\r\n                              <TextField\r\n                                  label=\"Effective Irrigation\"\r\n                                  value={inputs[0].effIrrig}\r\n                                   onChange={(e) => handleChange(index, 'effIrrig', e.target.value)}\r\n                                  fullWidth\r\n                                  margin=\"normal\"\r\n                                  type=\"number\"\r\n                                  InputProps={{\r\n                                    readOnly: !isEditMode,\r\n                                }}\r\n                              />\r\n                          </Col>\r\n                          <Col xs={12} sm={6} md={4}>\r\n                              <TextField\r\n                                  label=\"Irrigation Area\"\r\n                                  value={inputs[0].irrigArea}\r\n                                   onChange={(e) => handleChange(index, 'irrigArea', e.target.value)}\r\n                                  fullWidth\r\n                                  margin=\"normal\"\r\n                                  type=\"number\"\r\n                                  InputProps={{\r\n                                    readOnly: !isEditMode,\r\n                                }}\r\n                              />\r\n                          </Col>\r\n                          <Col xs={12} sm={6} md={4}>\r\n                              <TextField\r\n                                  label=\"Profondeur\"\r\n                                  value={inputs[0].profondeur}\r\n                                   onChange={(e) => handleChange(index, 'profondeur', e.target.value)}\r\n                                  fullWidth\r\n                                  margin=\"normal\"\r\n                                  type=\"number\"\r\n                                  InputProps={{\r\n                                    readOnly: !isEditMode,\r\n                                }}\r\n                              />\r\n                          </Col>\r\n                          <Col xs={12} sm={6} md={4}>\r\n                              <TextField\r\n                                  label=\"Planting Date\"\r\n                                  value={inputs[0].plantingDate}\r\n                                   onChange={(e) => handleChange(index, 'plantingDate', e.target.value)}\r\n                                  fullWidth\r\n                                  margin=\"normal\"\r\n                                  type=\"date\"\r\n                                  InputLabelProps={{ shrink: true }}\r\n                                  InputProps={{\r\n                                    readOnly: !isEditMode,\r\n                                }}\r\n                              />\r\n                          </Col>\r\n                      </Row>\r\n                      <Row className=\"d-flex justify-content-center mt-4\">\r\n                        <Button\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            onClick={handleSave}\r\n                            disabled={!isEditMode}\r\n                        >\r\n                            {t('Save Changes')}\r\n                        </Button>\r\n                    </Row>\r\n                  </CardContent>\r\n              </Card>\r\n            )}\r\n          )\r\n                                \r\n            }\r\n           \r\n\r\n            {\r\n            isSaving ? <LinearProgress /> : \r\n            <>\r\n             <Row>\r\n            <Col lg=\"12\" md=\"12\" sm=\"12\" className=\"mb-4\">\r\n              <Card>\r\n                <CardBody className=\"p-0\">\r\n\r\n                  <SimulationChart\r\n\r\n                    data={chartData}\r\n\r\n                  />\r\n                </CardBody>\r\n              </Card>\r\n\r\n            </Col>\r\n            </Row>\r\n            <Row>\r\n                  <Col lg='12' md='12' sm='12'>\r\n                    <Card>\r\n                      <CardBody>\r\n\r\n                        <div style={{ height: 590 }}>\r\n                          <Calendar\r\n                            key={events.length}\r\n                            localizer={localizer}\r\n                            events={events}\r\n                            culture=\"en-GB\"\r\n                            views={[\"month\", \"week\", \"day\"]}\r\n                            startAccessor=\"start\"\r\n                            endAccessor=\"end\"\r\n                            eventPropGetter={(event, start, end, isSelected) => ({\r\n                              event,\r\n                              start,\r\n                              end,\r\n                              isSelected,\r\n                              style: { backgroundColor: \"#26A6B7\" }\r\n                            })}\r\n                          />\r\n                        </div>\r\n\r\n                      </CardBody>\r\n                    </Card>\r\n                  </Col>\r\n                </Row>\r\n            </>\r\n            \r\n            }\r\n        </Container>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default CalculSimulation"],"mappings":"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"},"metadata":{},"sourceType":"module"}