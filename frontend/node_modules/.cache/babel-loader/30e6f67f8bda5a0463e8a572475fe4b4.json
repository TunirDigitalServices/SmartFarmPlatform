{"ast":null,"code":"import _regeneratorRuntime from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/var/www/prod/smartfarm/backoffice/frontend/src/views/AddFarm.js\";\nimport React from \"react\";\nimport { Container, Row, Col, Card, CardBody, CardHeader, Button, Form, FormGroup, FormInput, FormSelect, FormCheckbox } from \"shards-react\";\nimport PageTitle from \"../components/common/PageTitle\";\nimport \"./../assets/Styles.css\";\nimport Map from \"./leafletMap\";\nimport \"./Styles.css\";\nimport api from '../api/api';\nimport { withTranslation } from \"react-i18next\";\nimport FarmList from \"./FarmList\";\nimport LeafletMap from \"./map\";\n\nvar AddFarm = /*#__PURE__*/function (_React$Component) {\n  _inherits(AddFarm, _React$Component);\n\n  function AddFarm(props) {\n    var _this;\n\n    _classCallCheck(this, AddFarm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AddFarm).call(this, props));\n    _this.componentDidMount = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this.getFarms();\n\n              _this.getCities();\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    _this.getCities = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return api.get('/cities/get-cities').then(function (res) {\n                var cities = res.data.Cities;\n\n                _this.setState({\n                  cities: cities\n                });\n              });\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    _this.getFarms = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return api.get('/farm/farms').then(function (res) {\n                var DataFarm = res.data;\n\n                _this.setState({\n                  farmList: DataFarm.farms\n                });\n              });\n\n            case 2:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    _this._onCreated = function (e) {\n      var type = e.layerType;\n\n      _this.setState({\n        layerType: type\n      });\n\n      var layer = e.layer;\n\n      if (type === \"polygon\") {\n        var coords = layer._latlngs[0];\n        var Coordinates = coords.map(function (coord) {\n          return {\n            Lat: coord.lat,\n            Long: coord.lng\n          };\n        });\n        if (Coordinates) _this.setState({\n          layer: JSON.stringify(Coordinates)\n        });\n      } else {\n        _this.setState({\n          Latitude: layer.getLatLng().lat\n        });\n\n        _this.setState({\n          Longitude: layer.getLatLng().lng\n        });\n      }\n    };\n\n    _this.successCallback = function (position) {\n      _this.setState({\n        Latitude: position.coords.latitude\n      });\n\n      _this.setState({\n        Longitude: position.coords.longitude\n      });\n\n      _this.setState({\n        zoom: 10,\n        center: [position.coords.latitude, position.coords.longitude],\n        fromAction: true\n      });\n    };\n\n    _this.errorCallback = function (error) {\n      _this.setState({\n        checked: false\n      });\n\n      _this.setState({\n        Latitude: \"\"\n      });\n\n      _this.setState({\n        Longitude: \"\"\n      });\n\n      if (error.code == 1) {\n        alert(\"You've decided not to share your position, but it's OK. We won't ask you again.\");\n      } else if (error.code == 2) {\n        alert(\"The network is down or the positioning service can't be reached.\");\n      } else if (error.code == 3) {\n        alert(\"The attempt timed out before it could get the location data.\");\n      } else {\n        alert(\"Geolocation failed due to unknown error.\");\n      }\n    };\n\n    _this.checkPositon = function () {\n      if (_this.state.checked === true) {\n        if (navigator.geolocation) {\n          navigator.geolocation.getCurrentPosition(_this.successCallback, _this.errorCallback);\n        } else {\n          _this.setState({\n            Latitude: \"\"\n          });\n\n          _this.setState({\n            Longitude: \"\"\n          });\n\n          _this.setState({\n            checked: false\n          });\n\n          alert(\"Sorry, your browser does not support HTML5 geolocation.\");\n        }\n      }\n\n      if (_this.state.checked === false) {\n        _this.setState({\n          Latitude: \"\"\n        });\n\n        _this.setState({\n          Longitude: \"\"\n        });\n      }\n    };\n\n    _this.handleChange = function () {\n      _this.setState({\n        checked: !_this.state.checked\n      }, function () {\n        return _this.checkPositon();\n      });\n    };\n\n    _this.handleChangeZoom = function (e) {\n      var target = e.target.value;\n      var selected = e.target.selectedOptions[0].text;\n      var newCoords = target.split(\"_\");\n      var lat = parseFloat(newCoords[0]);\n      var lon = parseFloat(newCoords[1]);\n      var cityId = parseFloat(newCoords[2]);\n\n      _this.setState({\n        center: [lat, lon],\n        city: cityId,\n        zoom: 10,\n        fromAction: true\n      });\n    };\n\n    _this.validate = function () {\n      var nameError = '';\n      var classInputError = '';\n      var positionError = \"\";\n\n      if (!_this.state.name || _this.state.name == \"\") {\n        nameError = 'not_empty';\n        classInputError = 'is-invalid';\n\n        _this.setState({\n          nameError: nameError\n        });\n\n        _this.setState({\n          classInputError: classInputError\n        });\n\n        return false;\n      } else {\n        _this.setState({\n          nameError: ''\n        });\n\n        _this.setState({\n          classInputError: ''\n        });\n      }\n\n      if (!_this.state.Latitude || !_this.state.Longitude) {\n        positionError = 'Please select a farm position';\n\n        _this.setState({\n          positionError: positionError\n        });\n\n        return false;\n      } else {\n        _this.setState({\n          positionError: ''\n        });\n      }\n\n      return true;\n    };\n\n    _this.handleSubmit = function (event) {\n      event.preventDefault();\n\n      var isValid = _this.validate();\n\n      if (isValid) {\n        _this.addFarm();\n      } else {\n        return false;\n      }\n    };\n\n    _this.addFarm = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var name, name_group, description, city_id, Coordinates, Latitude, Longitude, user, user_uid;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              name = _this.state.name;\n              name_group = _this.state.name_group;\n              description = _this.state.description;\n              city_id = _this.state.city;\n              Coordinates = _this.state.layer;\n              Latitude = _this.state.Latitude;\n              Longitude = _this.state.Longitude;\n              user = JSON.parse(localStorage.getItem('user'));\n              user_uid = user.id;\n              _context4.next = 11;\n              return api.post('/farm/add-farm', {\n                name: name,\n                name_group: name_group,\n                description: description,\n                city_id: city_id,\n                user_uid: user_uid,\n                Coordinates: Coordinates,\n                Latitude: Latitude,\n                Longitude: Longitude\n              }).then(function (res) {\n                if (res.data.errors) {\n                  var errorsData = res.data.errors;\n                  errorsData.map(function (item, indx) {\n                    _this.setState({\n                      msgServer: item.msg\n                    });\n                  });\n\n                  _this.setState({\n                    classMsg: \"danger\"\n                  });\n\n                  _this.setState({\n                    displayMsg: \"show\"\n                  });\n                }\n\n                if (res.data.type && res.data.type === \"danger\") {\n                  _this.setState({\n                    msgServer: res.data.message\n                  });\n\n                  _this.setState({\n                    classMsg: \"danger\"\n                  });\n\n                  _this.setState({\n                    displayMsg: \"show\"\n                  });\n                }\n\n                if (res.data.type && res.data.type === \"success\") {\n                  _this.setState({\n                    added: true\n                  }, _this.resetForm());\n\n                  _this.setState({\n                    msgServer: \"farm_added\"\n                  });\n\n                  _this.setState({\n                    classMsg: \"success\"\n                  });\n\n                  _this.setState({\n                    displayMsg: \"show\"\n                  });\n\n                  _this.setState({\n                    iconMsg: \"check\"\n                  });\n\n                  _this.getFarms();\n                }\n              }).catch(function (error) {\n                _this.setState({\n                  msgServer: \"fail_add_farm\"\n                });\n\n                _this.setState({\n                  classMsg: \"danger\"\n                });\n\n                _this.setState({\n                  displayMsg: \"show\"\n                });\n              });\n\n            case 11:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    _this.resetForm = function () {\n      _this.setState({\n        name: \"\",\n        name_group: \"\",\n        description: \"\"\n      });\n\n      setTimeout(function () {\n        _this.setState({\n          displayMsg: \"hide\"\n        });\n\n        _this.setState({\n          nameError: ''\n        });\n\n        _this.setState({\n          classInputError: ''\n        });\n      }, 5000);\n    };\n\n    _this.state = {\n      cities: [],\n      city: '',\n      cityName: \"\",\n      name_group: null,\n      zoom: \"\",\n      center: [],\n      fromAction: false,\n      name: null,\n      description: null,\n      added: false,\n      nameError: \"\",\n      classInputError: \"\",\n      msgServer: \"\",\n      classMsg: \"\",\n      displayMsg: \"hide\",\n      iconMsg: \"info\",\n      farmList: [],\n      Latitude: \"\",\n      Longitude: \"\",\n      positionError: \"\",\n      layer: null,\n      draw: {\n        polygon: true,\n        circle: false,\n        rectangle: false,\n        polyline: false,\n        marker: true,\n        circlemarker: true\n      },\n      edit: {\n        delete: false,\n        edit: false\n      },\n      layerType: \"\",\n      checked: false\n    };\n    return _this;\n  }\n\n  _createClass(AddFarm, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var t = this.props.t;\n      return /*#__PURE__*/React.createElement(Container, {\n        fluid: true,\n        className: \"main-content-container px-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        lg: \"12\",\n        md: \"12\",\n        sm: \"12\",\n        className: \"mb-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        noGutters: true,\n        className: \"page-header py-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(PageTitle, {\n        sm: \"4\",\n        title: t('my_farms'),\n        subtitle: t('my_farms'),\n        className: \"text-sm-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(Row, {\n        className: \"px-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(FarmList, {\n        farmList: this.state.farmList,\n        Farms: this.getFarms,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mb-0 alert alert-\".concat(this.state.classMsg, \" fade \").concat(this.state.displayMsg),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        class: \"fa fa-\".concat(this.state.iconMsg, \" mx-2\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 17\n        }\n      }), \" \", t(this.state.msgServer)), /*#__PURE__*/React.createElement(Row, {\n        noGutters: true,\n        className: \"page-header py-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(PageTitle, {\n        sm: \"4\",\n        title: t('add_farm'),\n        subtitle: t('add_farm'),\n        className: \"text-sm-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(Card, {\n        small: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(CardHeader, {\n        className: \"border-bottom\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          display: \"flex\",\n          justifyContent: \"flex-start\",\n          width: \"auto\",\n          float: \"left\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"h6\", {\n        className: \"m-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 19\n        }\n      }, t('farm_setup')), \" \"), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          display: \"flex\",\n          justifyContent: \"flex-end\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        onClick: this.handleSubmit // theme=\"success\"\n        ,\n        className: \"mb-2 mr-1 btn btn-success\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        class: \"fa fa-check mx-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 21\n        }\n      }), t('save')), /*#__PURE__*/React.createElement(Button, {\n        onClick: this.resetForm // theme=\"success\"\n        ,\n        className: \"mb-2 mr-1 btn btn-danger\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        class: \"fa fa-times mx-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 21\n        }\n      }), t('cancel')))), /*#__PURE__*/React.createElement(CardBody, {\n        className: \"pt-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          display: \"flex\",\n          marginTop: \"20px\",\n          flexWrap: \"wrap\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        lg: \"6\",\n        sm: \"12\",\n        md: \"12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Form, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        form: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        md: \"6\",\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          margin: \"0px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 27\n        }\n      }, \" \", t('name_farm')), /*#__PURE__*/React.createElement(FormInput, {\n        className: this.state.classInputError,\n        value: this.state.name,\n        placeholder: t('name_farm'),\n        required: true,\n        onChange: function onChange(evt) {\n          _this2.setState({\n            name: evt.target.value\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 27\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"invalid-feedback\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 27\n        }\n      }, t(this.state.nameError))), /*#__PURE__*/React.createElement(Col, {\n        md: \"6\",\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          margin: \"0px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 27\n        }\n      }, t('group_name')), /*#__PURE__*/React.createElement(FormInput, {\n        value: this.state.name_group,\n        placeholder: t('group_name'),\n        onChange: function onChange(evt) {\n          _this2.setState({\n            name_group: evt.target.value\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 27\n        }\n      }))), /*#__PURE__*/React.createElement(FormGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          margin: \"0px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 25\n        }\n      }, t('desc')), /*#__PURE__*/React.createElement(\"textarea\", {\n        value: this.state.description,\n        onChange: function onChange(evt) {\n          return _this2.setState({\n            description: evt.target.value\n          });\n        },\n        style: {\n          height: \"275px\"\n        },\n        class: \"form-control\",\n        placeholder: t('desc'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(FormGroup, {\n        className: \"my-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(FormCheckbox, {\n        checked: this.state.checked,\n        onChange: this.handleChange,\n        toggle: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 25\n        }\n      }, \"Assign farm position to my current position\")))), /*#__PURE__*/React.createElement(Col, {\n        lg: \"6\",\n        md: \"12\",\n        sm: \"12\",\n        className: \"mb-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 411,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"my-2 d-flex jusitfy-content-center flex-column \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"h6\", {\n        className: \"text-center m-2 text-danger \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 23\n        }\n      }, this.state.positionError), /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          margin: \"0px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 23\n        }\n      }, t('select_city')), /*#__PURE__*/React.createElement(FormSelect, {\n        onChange: function onChange(e) {\n          return _this2.handleChangeZoom(e);\n        },\n        value: this.state.center[2],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 23\n        }\n      }, this.state.cities.map(function (city) {\n        return /*#__PURE__*/React.createElement(\"option\", {\n          key: city.id,\n          value: \"\".concat(city.lat, \"_\").concat(city.lon, \"_\").concat(city.id) || \"\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 31\n          }\n        }, city.city);\n      }))), /*#__PURE__*/React.createElement(LeafletMap, {\n        _onCreated: this._onCreated,\n        draw: this.state.draw,\n        edit: this.state.edit,\n        data: this.state.farmList,\n        zoom: this.state.zoom,\n        center: this.state.center,\n        fromAction: this.state.fromAction,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 21\n        }\n      }))))))), /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 9\n        }\n      }));\n    }\n  }]);\n\n  return AddFarm;\n}(React.Component);\n\nexport default withTranslation()(AddFarm);","map":{"version":3,"names":["React","Container","Row","Col","Card","CardBody","CardHeader","Button","Form","FormGroup","FormInput","FormSelect","FormCheckbox","PageTitle","Map","api","withTranslation","FarmList","LeafletMap","AddFarm","props","componentDidMount","getFarms","getCities","get","then","res","cities","data","Cities","setState","DataFarm","farmList","farms","_onCreated","e","type","layerType","layer","coords","_latlngs","Coordinates","map","coord","Lat","lat","Long","lng","JSON","stringify","Latitude","getLatLng","Longitude","successCallback","position","latitude","longitude","zoom","center","fromAction","errorCallback","error","checked","code","alert","checkPositon","state","navigator","geolocation","getCurrentPosition","handleChange","handleChangeZoom","target","value","selected","selectedOptions","text","newCoords","split","parseFloat","lon","cityId","city","validate","nameError","classInputError","positionError","name","handleSubmit","event","preventDefault","isValid","addFarm","name_group","description","city_id","user","parse","localStorage","getItem","user_uid","id","post","errors","errorsData","item","indx","msgServer","msg","classMsg","displayMsg","message","added","resetForm","iconMsg","catch","setTimeout","cityName","draw","polygon","circle","rectangle","polyline","marker","circlemarker","edit","delete","t","display","justifyContent","width","float","marginTop","flexWrap","margin","evt","height","Component"],"sources":["/var/www/prod/smartfarm/backoffice/frontend/src/views/AddFarm.js"],"sourcesContent":["import React from \"react\";\nimport {\n  Container,\n  Row,\n  Col,\n  Card,\n  CardBody,\n  CardHeader,\n  Button,\n  Form,\n  FormGroup,\n  FormInput,\n  FormSelect,\n  FormCheckbox\n} from \"shards-react\";\nimport PageTitle from \"../components/common/PageTitle\";\nimport \"./../assets/Styles.css\";\nimport Map from \"./leafletMap\";\nimport \"./Styles.css\";\nimport api from '../api/api';\nimport { withTranslation } from \"react-i18next\";\nimport FarmList from \"./FarmList\";\nimport LeafletMap from \"./map\";\n\nclass AddFarm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      cities: [],\n      city: '',\n      cityName:\"\",\n      name_group: null,\n      zoom: \"\",\n      center: [],\n      fromAction: false,\n      name: null,\n      description: null,\n      added: false,\n      nameError: \"\",\n      classInputError: \"\",\n      msgServer: \"\",\n      classMsg: \"\",\n      displayMsg: \"hide\",\n      iconMsg: \"info\",\n      farmList: [],\n      Latitude: \"\",\n      Longitude: \"\",\n      positionError: \"\",\n      layer: null,\n      draw: {\n        polygon: true,\n        circle: false,\n        rectangle: false,\n        polyline: false,\n        marker: true,\n        circlemarker: true,\n      },\n      edit: {\n        delete: false,\n        edit: false\n      },\n      layerType: \"\",\n      checked: false,\n\n\n    };\n  }\n  componentDidMount = async () => {\n    this.getFarms()\n    this.getCities()\n  }\n\n  getCities = async () => {\n    await api.get('/cities/get-cities').then(res => {\n      const cities = res.data.Cities;\n      this.setState({ cities: cities });\n\n    })\n  }\n\n  getFarms = async () => {\n    await api.get('/farm/farms').then(res => {\n      const DataFarm = res.data;\n      this.setState({ farmList: DataFarm.farms });\n\n    })\n  }\n\n  _onCreated = e => {\n    let type = e.layerType;\n    this.setState({ layerType: type })\n    let layer = e.layer;\n    if (type === \"polygon\") {\n      let coords = layer._latlngs[0];\n      const Coordinates = coords.map((coord) => ({\n        Lat: coord.lat,\n        Long: coord.lng,\n      }));\n      if (Coordinates)\n        this.setState({ layer: JSON.stringify(Coordinates) })\n    } else {\n      this.setState({ Latitude: layer.getLatLng().lat });\n      this.setState({ Longitude: layer.getLatLng().lng });\n    }\n\n  };\n  successCallback = (position) => {\n    this.setState({ Latitude: position.coords.latitude });\n    this.setState({ Longitude: position.coords.longitude });\n\n    this.setState({\n      zoom: 10,\n      center: [position.coords.latitude, position.coords.longitude],\n      fromAction: true\n    });\n  }\n  errorCallback = (error) => {\n    this.setState({\n      checked: false\n    });\n    this.setState({ Latitude: \"\" });\n    this.setState({ Longitude: \"\" });\n\n    if (error.code == 1) {\n      alert(\"You've decided not to share your position, but it's OK. We won't ask you again.\");\n    } else if (error.code == 2) {\n      alert(\"The network is down or the positioning service can't be reached.\");\n    } else if (error.code == 3) {\n      alert(\"The attempt timed out before it could get the location data.\");\n    } else {\n      alert(\"Geolocation failed due to unknown error.\");\n    }\n  }\n\n  checkPositon = () => {\n    if (this.state.checked === true) {\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(this.successCallback, this.errorCallback);\n      } else {\n        this.setState({ Latitude: \"\" });\n        this.setState({ Longitude: \"\" });\n        this.setState({\n          checked: false\n        });\n        alert(\"Sorry, your browser does not support HTML5 geolocation.\");\n      }\n\n    }\n    if (this.state.checked === false) {\n      this.setState({ Latitude: \"\" });\n      this.setState({ Longitude: \"\" });\n    }\n  }\n\n  handleChange = () => {\n    this.setState({\n      checked: !this.state.checked\n    },\n      () => this.checkPositon()\n    );\n  }\n  handleChangeZoom = (e) => {\n      const target = e.target.value;\n    let selected = e.target.selectedOptions[0].text\n    const newCoords = target.split(\"_\");\n    const lat = parseFloat(newCoords[0]);\n    const lon = parseFloat(newCoords[1]);\n    const cityId = parseFloat(newCoords[2]);\n    this.setState({\n      center: [lat, lon],\n      city: cityId,\n       zoom: 10,\n       fromAction: true\n    });\n  }\n\n  validate = () => {\n    let nameError = '';\n    let classInputError = '';\n    let positionError = \"\"\n    if (!this.state.name || this.state.name == \"\") {\n      nameError = 'not_empty';\n      classInputError = 'is-invalid'\n      this.setState({ nameError });\n      this.setState({ classInputError });\n      return false;\n    } else {\n      this.setState({ nameError: '' });\n      this.setState({ classInputError: '' });\n    }\n    if (!this.state.Latitude || !this.state.Longitude) {\n      positionError = 'Please select a farm position';\n      this.setState({ positionError });\n      return false;\n    } else {\n      this.setState({ positionError: '' });\n    }\n    return true\n\n  };\n\n\n  handleSubmit = (event) => {\n    event.preventDefault()\n    const isValid = this.validate();\n    if (isValid) {\n      this.addFarm()\n    } else {\n      return false;\n    }\n  }\n\n  addFarm = async () => {\n\n    const name = this.state.name\n    const name_group = this.state.name_group\n    const description = this.state.description\n    const city_id = this.state.city\n    let Coordinates = this.state.layer\n    let Latitude = this.state.Latitude\n    let Longitude = this.state.Longitude\n    \n\n    let user = JSON.parse(localStorage.getItem('user'));\n    let user_uid = user.id\n\n    await api.post('/farm/add-farm', { name, name_group, description,city_id, user_uid, Coordinates, Latitude, Longitude })\n      .then(res => {\n        if (res.data.errors) {\n          let errorsData = res.data.errors\n          errorsData.map((item, indx) => {\n            this.setState({ msgServer: item.msg })\n          })\n          this.setState({ classMsg: \"danger\" })\n          this.setState({ displayMsg: \"show\" })\n        }\n        if (res.data.type && res.data.type === \"danger\") {\n          this.setState({ msgServer: res.data.message })\n          this.setState({ classMsg: \"danger\" })\n          this.setState({ displayMsg: \"show\" })\n        }\n        if (res.data.type && res.data.type === \"success\") {\n          this.setState({ added: true }, this.resetForm())\n          this.setState({ msgServer: \"farm_added\" })\n          this.setState({ classMsg: \"success\" })\n          this.setState({ displayMsg: \"show\" })\n          this.setState({ iconMsg: \"check\" })\n          this.getFarms()\n        }\n\n      }).catch((error) => {\n        this.setState({ msgServer: \"fail_add_farm\" })\n        this.setState({ classMsg: \"danger\" })\n        this.setState({ displayMsg: \"show\" })\n      })\n  }\n\n  resetForm = () => {\n    this.setState({\n      name: \"\",\n      name_group: \"\",\n      description: \"\",\n    });\n\n    setTimeout(() => {\n      this.setState({ displayMsg: \"hide\" })\n      this.setState({ nameError: '' });\n      this.setState({ classInputError: '' });\n    }, 5000);\n  };\n\n\n  render() {\n    const { t } = this.props;\n    return (\n      <Container fluid className=\"main-content-container px-4\">\n        {/* Page Header */}\n\n\n        <Row>\n          <Col lg=\"12\" md=\"12\" sm=\"12\" className=\"mb-4\">\n            <Row noGutters className=\"page-header py-4\">\n              <PageTitle\n                sm=\"4\"\n                title={t('my_farms')}\n                subtitle={t('my_farms')}\n                className=\"text-sm-left\"\n              />\n            </Row>\n            <Row className=\"px-2\">\n              <FarmList\n                farmList={this.state.farmList}\n                Farms={this.getFarms}\n              />\n\n            </Row>\n              <div className={`mb-0 alert alert-${this.state.classMsg} fade ${this.state.displayMsg}`}>\n                <i class={`fa fa-${this.state.iconMsg} mx-2`}></i> {t(this.state.msgServer)}\n              </div>\n            <Row noGutters className=\"page-header py-4\">\n              <PageTitle\n                sm=\"4\"\n                title={t('add_farm')}\n                subtitle={t('add_farm')}\n                className=\"text-sm-left\"\n              />\n            </Row>\n            <Card small>\n              <CardHeader className=\"border-bottom\">\n                <div\n                  style={{\n                    display: \"flex\",\n                    justifyContent: \"flex-start\",\n                    width: \"auto\",\n                    float: \"left\"\n                  }}\n                >\n                  <h6 className=\"m-0\">{t('farm_setup')}</h6>{\" \"}\n                </div>\n                <div\n                  style={{\n                    display: \"flex\",\n                    justifyContent: \"flex-end\",\n\n                  }}\n                >\n                  <Button\n                    onClick={this.handleSubmit}\n                    // theme=\"success\"\n                    className=\"mb-2 mr-1 btn btn-success\"\n                  >\n                    <i class={`fa fa-check mx-2`}></i>\n                    {t('save')}\n                  </Button>\n                  <Button\n                    onClick={this.resetForm}\n                    // theme=\"success\"\n                    className=\"mb-2 mr-1 btn btn-danger\"\n                  >\n                    <i class={`fa fa-times mx-2`}></i>\n                    {t('cancel')}\n                  </Button>\n                </div>\n              </CardHeader>\n              <CardBody className=\"pt-0\">\n                <div\n                  style={{\n                    display: \"flex\",\n                    marginTop: \"20px\",\n                    flexWrap: \"wrap\"\n                  }}\n                >\n                  <Col lg=\"6\" sm=\"12\" md=\"12\" >\n                    <Form>\n                      <Row form>\n                        <Col md=\"6\" className=\"form-group\">\n                          <p style={{ margin: \"0px\" }}> {t('name_farm')}</p>\n                          <FormInput\n                            className={this.state.classInputError}\n                            value={this.state.name}\n                            placeholder={t('name_farm')}\n                            required\n                            onChange={evt => {\n                              this.setState({\n                                name: evt.target.value\n                              });\n                            }}\n\n                          />\n                          <div className=\"invalid-feedback\" >{t(this.state.nameError)}</div>\n                        </Col>\n                        <Col md=\"6\" className=\"form-group\">\n                          <p style={{ margin: \"0px\" }}>{t('group_name')}</p>\n                          <FormInput\n                            value={this.state.name_group}\n                            placeholder={t('group_name')}\n                            onChange={evt => {\n                              this.setState({\n                                name_group: evt.target.value\n                              });\n                            }}\n                          />\n                        </Col>\n                      </Row>\n                      <FormGroup>\n                        <p style={{ margin: \"0px\" }}>{t('desc')}</p>\n                        <textarea\n                          value={this.state.description}\n                          onChange={evt =>\n                            this.setState({\n                              description: evt.target.value\n                            })\n                          }\n                          style={{ height: \"275px\" }}\n                          class=\"form-control\"\n                          placeholder={t('desc')}\n                        ></textarea>\n                      </FormGroup>\n                      <FormGroup className=\"my-4\">\n\n                        <FormCheckbox\n                          checked={this.state.checked}\n                          onChange={this.handleChange}\n                          toggle\n                        >\n                          Assign farm position to my current position\n                        </FormCheckbox>\n                      </FormGroup>\n                    </Form>\n                  </Col>\n                  <Col lg=\"6\" md=\"12\" sm=\"12\" className=\"mb-4\">\n                    <div className=\"my-2 d-flex jusitfy-content-center flex-column \">\n                      <h6 className=\"text-center m-2 text-danger \">{this.state.positionError}</h6>\n                      <p style={{ margin: \"0px\" }}>{t('select_city')}</p>\n                      <FormSelect\n                        onChange={e => this.handleChangeZoom(e)}\n                        value={this.state.center[2]}\n                      >\n                        {\n                          this.state.cities.map(city => {\n                            return (\n                              <option key={city.id} value={`${city.lat}_${city.lon}_${city.id}` || \"\"}>{city.city}</option>\n                            )\n                          })\n                        }\n                      </FormSelect>\n\n\n                    </div>\n                    <LeafletMap _onCreated={this._onCreated} draw={this.state.draw} edit={this.state.edit} data={this.state.farmList} zoom={this.state.zoom} center={this.state.center} fromAction={this.state.fromAction} />\n                  </Col>\n                </div>\n              </CardBody>\n            </Card>\n          </Col>\n        </Row>\n\n        <Row>\n\n        </Row>\n      </Container>\n    );\n  }\n}\n\nexport default withTranslation()(AddFarm);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}