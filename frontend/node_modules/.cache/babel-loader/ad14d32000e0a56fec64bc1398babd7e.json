{"ast":null,"code":"import _objectSpread from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/var/www/prod/smartfarm/backoffice/frontend/src/views/SensorHistory.js\";\n\nimport React, { useEffect, useState, useRef } from 'react';\nimport { Button, Row, Col, FormGroup, Form, FormInput, Container, Card, CardBody, CardHeader, FormSelect, Nav, NavItem, NavLink } from 'shards-react';\nimport PageTitle from '../components/common/PageTitle';\nimport { useTranslation } from \"react-i18next\";\nimport RangeDatePicker from '../components/common/RangeDatePicker';\nimport api from '../api/api';\nimport PaginateHistory from './PaginateHistory';\nimport { useHistory, useParams } from 'react-router-dom';\nimport moment from 'moment';\nimport { DownloadTableExcel } from \"react-export-table-to-excel\";\nimport SensorHistoryChart from './SensorHistoryChart';\nimport SolarRadiationChart from './SolarRadiationChart';\n\nvar SensorHistory = function SensorHistory() {\n  var table = useRef(null);\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      toggle = _useState2[0],\n      setToggle = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      toggleView = _useState4[0],\n      setToggleView = _useState4[1];\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t,\n      i18n = _useTranslation.i18n;\n\n  var history = useHistory();\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      codeSensor = _useState6[0],\n      setCodeSensor = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      clicked = _useState8[0],\n      setClicked = _useState8[1];\n\n  var _useState9 = useState(1),\n      _useState10 = _slicedToArray(_useState9, 2),\n      pageNum = _useState10[0],\n      setPageNum = _useState10[1];\n\n  var _useState11 = useState(10),\n      _useState12 = _slicedToArray(_useState11, 2),\n      limit = _useState12[0],\n      setLimit = _useState12[1];\n\n  var _useState13 = useState(''),\n      _useState14 = _slicedToArray(_useState13, 2),\n      historyData = _useState14[0],\n      setHistoryData = _useState14[1];\n\n  var _useState15 = useState(\"\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      sensorId = _useState16[0],\n      setSensorId = _useState16[1];\n\n  var _useState17 = useState([]),\n      _useState18 = _slicedToArray(_useState17, 2),\n      sensorList = _useState18[0],\n      setSensorList = _useState18[1];\n\n  var _useState19 = useState({\n    dateStart: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000),\n    dateEnd: new Date()\n  }),\n      _useState20 = _slicedToArray(_useState19, 2),\n      dateValue = _useState20[0],\n      setDateValue = _useState20[1];\n\n  var role = JSON.parse(localStorage.getItem('user')).role;\n\n  var _useState21 = useState([]),\n      _useState22 = _slicedToArray(_useState21, 2),\n      radData = _useState22[0],\n      setRadData = _useState22[1];\n\n  var _useState23 = useState([]),\n      _useState24 = _slicedToArray(_useState23, 2),\n      dataET0 = _useState24[0],\n      setDataET0 = _useState24[1];\n\n  var _useState25 = useState([]),\n      _useState26 = _slicedToArray(_useState25, 2),\n      mappingData = _useState26[0],\n      setMappingData = _useState26[1];\n\n  var _useState27 = useState(\"\"),\n      _useState28 = _slicedToArray(_useState27, 2),\n      mappingMv1 = _useState28[0],\n      setMappingMv1 = _useState28[1];\n\n  var _useState29 = useState(\"\"),\n      _useState30 = _slicedToArray(_useState29, 2),\n      mappingMv2 = _useState30[0],\n      setMappingMv2 = _useState30[1];\n\n  var _useState31 = useState(\"\"),\n      _useState32 = _slicedToArray(_useState31, 2),\n      mappingMv3 = _useState32[0],\n      setMappingMv3 = _useState32[1];\n\n  var _useParams = useParams(),\n      id = _useParams.id;\n\n  var _useState33 = useState(1),\n      _useState34 = _slicedToArray(_useState33, 2),\n      currentPage = _useState34[0],\n      setCurrentPage = _useState34[1];\n\n  var _useState35 = useState(0),\n      _useState36 = _slicedToArray(_useState35, 2),\n      totalPages = _useState36[0],\n      setTotalPages = _useState36[1];\n\n  useEffect(function () {\n    var getSunRadiation = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return api.get('/radiation').then(function (response) {\n                  var arr = [];\n\n                  if (response) {\n                    var dates = response.data.dateTime;\n                    var radValues = response.data.radiation;\n                    var _dataET = response.data.ET0;\n\n                    for (var index = 0; index < dates.length; index++) {\n                      arr.push({\n                        date: dates[index],\n                        value: radValues[index]\n                      });\n                    }\n\n                    setDataET0(_dataET);\n                    setRadData(arr);\n                  }\n                }).catch(function (err) {\n                  console.log(err);\n                });\n\n              case 3:\n                _context.next = 8;\n                break;\n\n              case 5:\n                _context.prev = 5;\n                _context.t0 = _context[\"catch\"](0);\n                console.log(_context.t0);\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 5]]);\n      }));\n\n      return function getSunRadiation() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    var getSensorsList = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return api.get(\"/sensor/sensors\").then(function (response) {\n                  var sensors = response.data;\n                  setSensorList(sensors);\n                }).catch(function (err) {\n                  console.log(err);\n                });\n\n              case 3:\n                _context2.next = 8;\n                break;\n\n              case 5:\n                _context2.prev = 5;\n                _context2.t0 = _context2[\"catch\"](0);\n                console.log(_context2.t0);\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 5]]);\n      }));\n\n      return function getSensorsList() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    getSunRadiation();\n    getSensorsList();\n  }, []);\n\n  var getHistorySensor = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(page) {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              console.log(dateValue.dateEnd);\n              _context3.next = 3;\n              return api.get(\"/sensor/sensor-history/\".concat(codeSensor, \"/\").concat(dateValue.dateStart, \"/\").concat(dateValue.dateEnd, \"?pageNum=\").concat(page, \"&limit=60\")).then(function (response) {\n                var historyResult = response.data.history;\n                var sensorCoords = response.data.sensor_id;\n                setHistoryData(historyResult);\n                setCurrentPage(page);\n                setTotalPages(response.data.totalPages);\n                setMappingData(response.data.dataMapping);\n              }).catch(function (err) {\n                console.log(err);\n              });\n\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function getHistorySensor(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    if (typeof id !== 'undefined') {\n      setCodeSensor(id);\n    }\n\n    if (codeSensor !== \"\" && clicked) {\n      getHistorySensor(currentPage);\n    }\n  }, [codeSensor, dateValue.dateEnd, dateValue.dateStart, clicked]);\n\n  var mappingMv = function mappingMv(date, idSensor, vals) {\n    var valaueAfterMapping = [];\n    var arrayDatemv1 = [];\n    var arrayDatemv2 = [];\n    var arrayDatemv3 = [];\n    mappingData.map(function (dataMapping) {\n      arrayDatemv1.push(dataMapping.date['Mv1_date']);\n      arrayDatemv2.push(dataMapping.date['Mv2_date']);\n      arrayDatemv3.push(dataMapping.date['Mv3_date']);\n    });\n    var dateMappingSelectedmv1 = \"\";\n    var dateMappingSelectedmv2 = \"\";\n    var dateMappingSelectedmv3 = \"\";\n\n    if (arrayDatemv1.length > 0) {\n      arrayDatemv1.push(date.slice(0, 10));\n      arrayDatemv1.sort();\n      arrayDatemv1.map(function (dateMapping, i) {\n        if (dateMapping == date.slice(0, 10)) {\n          if (typeof arrayDatemv1[i - 1] !== \"undefined\") {\n            dateMappingSelectedmv1 = arrayDatemv1[i - 1];\n          }\n        }\n      });\n    }\n\n    if (arrayDatemv2.length > 0) {\n      arrayDatemv2.push(date.slice(0, 10));\n      arrayDatemv2.sort();\n      arrayDatemv2.map(function (dateMapping, i) {\n        if (dateMapping == date.slice(0, 10)) {\n          if (typeof arrayDatemv2[i - 1] !== \"undefined\") {\n            dateMappingSelectedmv2 = arrayDatemv2[i - 1];\n          }\n        }\n      });\n    }\n\n    if (arrayDatemv3.length > 0) {\n      arrayDatemv3.push(date.slice(0, 10));\n      arrayDatemv3.sort();\n      arrayDatemv3.map(function (dateMapping, i) {\n        if (dateMapping == date.slice(0, 10)) {\n          if (typeof arrayDatemv3[i - 1] !== \"undefined\") {\n            dateMappingSelectedmv3 = arrayDatemv3[i - 1];\n          }\n        }\n      });\n    }\n\n    if (mappingData.length == 0) {\n      vals.map(function (val, index) {\n        valaueAfterMapping[index] = parseFloat(val);\n      });\n    }\n\n    mappingData.map(function (dataMapping) {\n      vals.map(function (val, index) {\n        valaueAfterMapping[index] = val;\n        var num = parseInt(index + 1);\n        var keyData = 'Mv' + num + '_date';\n        var keyDataMax = 'Mv' + num + '_max';\n        var keyDataMin = 'Mv' + num + '_min';\n\n        if (dateMappingSelectedmv1 != \"\" && num == 1) {\n          if (dateMappingSelectedmv1 == dataMapping.date[keyData]) {\n            if (val >= parseFloat(dataMapping.max[keyDataMax]) && val <= parseFloat(dataMapping.min[keyDataMin])) {\n              valaueAfterMapping[index] = ((parseFloat(val) - dataMapping.max[keyDataMax]) / (dataMapping.min[keyDataMin] - dataMapping.max[keyDataMax]) * 100).toFixed(2);\n            }\n          }\n        }\n\n        if (dateMappingSelectedmv2 != \"\" && num == 2) {\n          if (dateMappingSelectedmv2 == dataMapping.date[keyData]) {\n            if (val >= parseFloat(dataMapping.max[keyDataMax]) && val <= parseFloat(dataMapping.min[keyDataMin])) {\n              valaueAfterMapping[index] = ((parseFloat(val) - parseFloat(dataMapping.max[keyDataMax])) / (dataMapping.min[keyDataMin] - dataMapping.max[keyDataMax]) * 100).toFixed(2);\n            }\n          }\n        }\n\n        if (dateMappingSelectedmv3 != \"\" && num == 3) {\n          if (dateMappingSelectedmv3 == dataMapping.date[keyData]) {\n            if (val >= parseFloat(dataMapping.max[keyDataMax]) && val <= parseFloat(dataMapping.min[keyDataMin])) {\n              valaueAfterMapping[index] = ((parseFloat(val) - parseFloat(dataMapping.max[keyDataMax])) / (dataMapping.min[keyDataMin] - dataMapping.max[keyDataMax]) * 100).toFixed(2);\n            }\n          }\n        }\n      });\n    });\n    return valaueAfterMapping;\n  }; //    const filteredHistory = historyData && historyData.filter(history => {\n  //         let arraymv = mappingMv(history.time, sensorId, [history.mv1, history.mv2, history.mv3]) \n  //         history.mv1 = arraymv[0];\n  //         history.mv2 = arraymv[1];\n  //         history.mv3 = arraymv[2];\n  //     let dates = new Date(history.time)\n  //         let filterHistory = true\n  //         if (dateValue.startDate) {\n  //           filterHistory = filterHistory && (new Date(dateValue.startDate) < dates)\n  //         }\n  //         if (dateValue.endDate) {\n  //           filterHistory = filterHistory && (new Date(dateValue.endDate) > dates)\n  //         }\n  //         return filterHistory\n  // })\n  // const paginate = (pageNumber) => setPageNum(pageNumber);\n  // const indexOfLastItem = pageNum * limit;\n  // const indexOfFirstItem = indexOfLastItem - limit;\n  // const currentItems = historyData.slice(indexOfFirstItem, indexOfLastItem);\n\n\n  var handlePageChange = function handlePageChange(page) {\n    getHistorySensor(page);\n  };\n\n  var downloadHistoryData = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var limit, response, historyResult, sensorCoords, csvContent, blob, downloadLink;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              limit = historyData.length * totalPages;\n              _context4.prev = 1;\n              _context4.next = 4;\n              return api.get(\"/sensor/sensor-history/\".concat(codeSensor, \"/\").concat(dateValue.dateStart, \"/\").concat(dateValue.dateEnd, \"?limit=\").concat(limit));\n\n            case 4:\n              response = _context4.sent;\n              historyResult = response.data.history;\n              sensorCoords = response.data.sensor_id;\n              csvContent = 'Date,Temp (°C),Humidity (%),Pressure (kPa),Altitude (M),Soil Temp (°C),Humidity 20cm (%),Humidity 40cm (%),Humidity 60cm (%),Humidity 20cm,Humidity 40cm,Humidity 60cm\\r\\n';\n              historyResult.forEach(function (history) {\n                csvContent += \"\".concat(history.time, \",\").concat(history.temperature, \",\").concat(history.humidity, \",\").concat(history.pressure, \",\").concat(history.altitude, \",\").concat(history.ts, \",\").concat(history.mv1, \",\").concat(history.mv2, \",\").concat(history.mv3, \",\").concat(history.niv1, \",\").concat(history.niv2, \",\").concat(history.niv3, \"\\r\\n\");\n              });\n              blob = new Blob([csvContent], {\n                type: 'text/csv;charset=utf-8'\n              });\n              downloadLink = document.createElement('a');\n              downloadLink.href = URL.createObjectURL(blob);\n              downloadLink.download = \"sensor_history_\".concat(sensorCoords, \"_\").concat(moment(dateValue.dateStart).format('YYYYMMDD'), \"_\").concat(moment(dateValue.dateEnd).format('YYYYMMDD'), \".csv\");\n              downloadLink.click();\n              _context4.next = 19;\n              break;\n\n            case 16:\n              _context4.prev = 16;\n              _context4.t0 = _context4[\"catch\"](1);\n              console.log(_context4.t0);\n\n            case 19:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[1, 16]]);\n    }));\n\n    return function downloadHistoryData() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(Container, {\n    fluid: true,\n    className: \"main-content-container p-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    noGutters: true,\n    className: \"page-header d-flex justify-content-between align-items-center py-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(PageTitle, {\n    sm: \"4\",\n    subtitle: t('View your sensors data history'),\n    title: \"My Sensors History\",\n    className: \"text-sm-left\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    theme: \"info\",\n    onClick: function onClick() {\n      return history.push('/AddSensor');\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"material-icons\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 81\n    }\n  }, \"\\uE145\"), \" Add Sensor\"))), /*#__PURE__*/React.createElement(Row, {\n    className: \"d-flex justify-content-around align-items-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 9\n    }\n  }, typeof id === 'undefined' ? /*#__PURE__*/React.createElement(Col, {\n    lg: \"4\",\n    md: \"12\",\n    sm: \"12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FormGroup, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FormSelect, {\n    onChange: function onChange(e) {\n      return setCodeSensor(e.target.value);\n    },\n    value: codeSensor,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 25\n    }\n  }, t('select_sensor')), sensorList.map(function (sensor) {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      style: {\n        cursor: \"pointer\"\n      },\n      value: sensor.code,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 45\n      }\n    }, sensor.code);\n  })))) : '', /*#__PURE__*/React.createElement(Col, {\n    lg: \"4\",\n    md: \"12\",\n    sm: \"12\",\n    className: \"form-group\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      margin: \"0px\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 25\n    }\n  }, t('start_date')), /*#__PURE__*/React.createElement(FormInput, {\n    type: \"date\",\n    value: dateValue.dateStart,\n    onChange: function onChange(e) {\n      return setDateValue(_objectSpread({}, dateValue, {\n        dateStart: e.target.value\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    lg: \"4\",\n    md: \"12\",\n    sm: \"12\",\n    className: \"form-group\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      margin: \"0px\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 25\n    }\n  }, t('end_date')), /*#__PURE__*/React.createElement(FormInput, {\n    type: \"date\",\n    value: dateValue.dateEnd,\n    onChange: function onChange(e) {\n      return setDateValue(_objectSpread({}, dateValue, {\n        dateEnd: e.target.value\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    lg: \"4\",\n    md: \"12\",\n    sm: \"12\",\n    className: \"form-group\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      margin: \"0px\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 25\n    }\n  }, t('search')), /*#__PURE__*/React.createElement(Button, {\n    onClick: function onClick() {\n      return setClicked(true);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 25\n    }\n  }, t('search'))), totalPages > 0 && /*#__PURE__*/React.createElement(PaginateHistory, {\n    totalPages: totalPages,\n    currentPage: currentPage,\n    onPageChange: handlePageChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: \"12\",\n    md: \"12\",\n    sm: \"12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(CardHeader, {\n    className: \"border-bottom\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 21\n    }\n  }, codeSensor !== \"\" ? /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 80\n    }\n  }, t('sensor_code'), \" : \", codeSensor) : null), /*#__PURE__*/React.createElement(CardBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: function onClick() {\n      return setToggleView(!toggleView);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 25\n    }\n  }, toggleView ? 'View Solar Radiation' : 'View Sensor History'), toggleView ? /*#__PURE__*/React.createElement(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: \"12\",\n    md: \"12\",\n    sm: \"12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 41\n    }\n  }, historyData.length > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-end\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(DownloadTableExcel, {\n    filename: \"history table\",\n    sheet: \"history\",\n    currentTableRef: table.current,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    theme: \"info\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"material-icons\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 71\n    }\n  }, \"\\uF090\"), \" Download this page\")), /*#__PURE__*/React.createElement(Button, {\n    className: \"mx-2\",\n    theme: \"info\",\n    onClick: downloadHistoryData,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 56\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"material-icons\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 62\n    }\n  }, \"\\uF090\"), \" Download History\"), /*#__PURE__*/React.createElement(Button, {\n    className: \"mx-2\",\n    onClick: function onClick() {\n      return setToggle(!toggle);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 49\n    }\n  }, toggle ? \"View Chart\" : \"View Table\")) : null, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"table-wrapper\",\n    className: \"\".concat(toggle ? '' : 'd-none'),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"table-scroll\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    ref: table,\n    className: \"table mb-4 table-hover table-bordered  tabel-responsive-lg \",\n    style: {\n      overflowX: \"scroll\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 53\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    className: \"bg-light text-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      fontSize: 12\n    },\n    scope: \"col\",\n    className: \"border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 49\n    }\n  }, t('Date'), \" (GMT)\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      fontSize: 12\n    },\n    scope: \"col\",\n    className: \"border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 49\n    }\n  }, t('Temp.'), \" (\\xB0C)\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      fontSize: 12\n    },\n    scope: \"col\",\n    className: \"border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 49\n    }\n  }, t('Humidity'), \" (%)\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      fontSize: 12\n    },\n    scope: \"col\",\n    className: \"border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 49\n    }\n  }, t('Pressure'), \" (kPa)\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      fontSize: 12\n    },\n    scope: \"col\",\n    className: \"border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 49\n    }\n  }, t('Altitude'), \" (M)\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      fontSize: 12\n    },\n    scope: \"col\",\n    className: \"border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 49\n    }\n  }, t('subsoil_Temp.'), \" (\\xB0C)\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      fontSize: 12\n    },\n    scope: \"col\",\n    className: \"border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 49\n    }\n  }, t('Humidity'), \" 20cm(%)\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      fontSize: 12\n    },\n    scope: \"col\",\n    className: \"border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 49\n    }\n  }, t('Humidity'), \" 40cm(%)\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      fontSize: 12\n    },\n    scope: \"col\",\n    className: \"border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 49\n    }\n  }, t('Humidity'), \" 60cm(%)\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      fontSize: 12\n    },\n    scope: \"col\",\n    className: \"border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 49\n    }\n  }, t('Humidity 20cm'), \" (%)\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      fontSize: 12\n    },\n    scope: \"col\",\n    className: \"border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 49\n    }\n  }, t('Humidity 40cm'), \" (%)\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      fontSize: 12\n    },\n    scope: \"col\",\n    className: \"border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 49\n    }\n  }, t('Humidity 60cm'), \" (%)\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      fontSize: 12\n    },\n    scope: \"col\",\n    className: \"border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 49\n    }\n  }, t('Charge')))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 45\n    }\n  }, historyData && historyData.map(function (sensorData) {\n    // let date = sensorData.time.slice(0,10)\n    var dailyET0 = \"\";\n    var lat = \"\";\n    var lon = \"\"; // dataET0.map(value=>{\n    //     if(value.date == date){\n    //         dailyET0 = value.ET0\n    //     }\n    // })\n\n    var press = Number(sensorData.pressure) / 1000;\n    var subSoilTemp = \"-\";\n\n    if (sensorData.ts !== \"-127.000\") {\n      subSoilTemp = sensorData.ts;\n    }\n\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 69\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 73\n      }\n    }, sensorData.time, \" \"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 73\n      }\n    }, sensorData.temperature), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 73\n      }\n    }, sensorData.humidity), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 73\n      }\n    }, parseFloat(press).toFixed(2)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 73\n      }\n    }, sensorData.altitude), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"text-center\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 73\n      }\n    }, subSoilTemp), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 73\n      }\n    }, sensorData.mv1), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 73\n      }\n    }, sensorData.mv2), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 417,\n        columnNumber: 73\n      }\n    }, sensorData.mv3), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 73\n      }\n    }, sensorData.niv1), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 73\n      }\n    }, sensorData.niv2), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 73\n      }\n    }, sensorData.niv3), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 73\n      }\n    }, Number(sensorData.charge)));\n  })))))), /*#__PURE__*/React.createElement(Col, {\n    className: \"\".concat(toggle ? 'd-none' : ''),\n    lg: \"12\",\n    md: \"8\",\n    sm: \"8\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(SensorHistoryChart, {\n    data: historyData,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 440,\n      columnNumber: 49\n    }\n  }))) : /*#__PURE__*/React.createElement(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 444,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: \"12\",\n    md: \"12\",\n    sm: \"12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 445,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-end\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 447,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(DownloadTableExcel, {\n    filename: \"history table\",\n    sheet: \"history\",\n    currentTableRef: table.current,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 448,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    theme: \"info\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"material-icons\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 71\n    }\n  }, \"\\uF090\"))), /*#__PURE__*/React.createElement(Button, {\n    className: \"mx-2\",\n    onClick: function onClick() {\n      return setToggle(!toggle);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 456,\n      columnNumber: 49\n    }\n  }, toggle ? \"View Chart\" : \"View Table\")), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"table-wrapper\",\n    className: \"\".concat(toggle ? '' : 'd-none'),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 459,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"text-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 460,\n      columnNumber: 49\n    }\n  }, \"Week Solar Radiation\"), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"table-scroll\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 461,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    ref: table,\n    className: \"table mb-4 table-hover table-bordered  tabel-responsive-lg \",\n    style: {\n      overflowX: \"scroll\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 462,\n      columnNumber: 53\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    className: \"bg-light text-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 463,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 464,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    className: \"border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 465,\n      columnNumber: 49\n    }\n  }, t('Date')), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    className: \"border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 466,\n      columnNumber: 49\n    }\n  }, t('Solar Radiation')))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 45\n    }\n  }, radData && radData.map(function (data) {\n    var date = moment(data.date).locale('en-EN').format(\"ddd, h a\");\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 69\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 477,\n        columnNumber: 73\n      }\n    }, date), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 73\n      }\n    }, data.value));\n  })))))), /*#__PURE__*/React.createElement(Col, {\n    className: \"\".concat(toggle ? 'd-none' : ''),\n    lg: \"12\",\n    md: \"8\",\n    sm: \"8\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 495,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(SolarRadiationChart, {\n    data: radData,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 496,\n      columnNumber: 49\n    }\n  }))))))));\n};\n\nexport default SensorHistory;","map":{"version":3,"names":["React","useEffect","useState","useRef","Button","Row","Col","FormGroup","Form","FormInput","Container","Card","CardBody","CardHeader","FormSelect","Nav","NavItem","NavLink","PageTitle","useTranslation","RangeDatePicker","api","PaginateHistory","useHistory","useParams","moment","DownloadTableExcel","SensorHistoryChart","SolarRadiationChart","SensorHistory","table","toggle","setToggle","toggleView","setToggleView","t","i18n","history","codeSensor","setCodeSensor","clicked","setClicked","pageNum","setPageNum","limit","setLimit","historyData","setHistoryData","sensorId","setSensorId","sensorList","setSensorList","dateStart","Date","now","dateEnd","dateValue","setDateValue","role","JSON","parse","localStorage","getItem","radData","setRadData","dataET0","setDataET0","mappingData","setMappingData","mappingMv1","setMappingMv1","mappingMv2","setMappingMv2","mappingMv3","setMappingMv3","id","currentPage","setCurrentPage","totalPages","setTotalPages","getSunRadiation","get","then","response","arr","dates","data","dateTime","radValues","radiation","ET0","index","length","push","date","value","catch","err","console","log","getSensorsList","sensors","getHistorySensor","page","historyResult","sensorCoords","sensor_id","dataMapping","mappingMv","idSensor","vals","valaueAfterMapping","arrayDatemv1","arrayDatemv2","arrayDatemv3","map","dateMappingSelectedmv1","dateMappingSelectedmv2","dateMappingSelectedmv3","slice","sort","dateMapping","i","val","parseFloat","num","parseInt","keyData","keyDataMax","keyDataMin","max","min","toFixed","handlePageChange","downloadHistoryData","csvContent","forEach","time","temperature","humidity","pressure","altitude","ts","mv1","mv2","mv3","niv1","niv2","niv3","blob","Blob","type","downloadLink","document","createElement","href","URL","createObjectURL","download","format","click","e","target","sensor","cursor","code","margin","current","overflowX","fontSize","sensorData","dailyET0","lat","lon","press","Number","subSoilTemp","charge","locale"],"sources":["/var/www/prod/smartfarm/backoffice/frontend/src/views/SensorHistory.js"],"sourcesContent":["import React ,{useEffect,useState,useRef} from 'react'\nimport { Button, Row, Col, FormGroup, Form, FormInput, Container, Card,CardBody,CardHeader ,FormSelect, Nav, NavItem, NavLink } from 'shards-react'\nimport PageTitle from '../components/common/PageTitle'\nimport { useTranslation } from \"react-i18next\";\nimport RangeDatePicker from '../components/common/RangeDatePicker';\nimport api from '../api/api';\nimport PaginateHistory from './PaginateHistory';\nimport { useHistory, useParams   } from 'react-router-dom';\nimport moment from 'moment';\nimport { DownloadTableExcel } from \"react-export-table-to-excel\";\nimport SensorHistoryChart from './SensorHistoryChart';\nimport SolarRadiationChart from './SolarRadiationChart';\n\n\nconst SensorHistory = () => {\n    const table = useRef(null)\n    const [toggle, setToggle] = useState(true)\n    const [toggleView, setToggleView] = useState(true)\n    const { t, i18n } = useTranslation();\n    const history = useHistory()\n    const [codeSensor,setCodeSensor] = useState('')\n    const [clicked,setClicked] = useState(false)\n    const [pageNum,setPageNum] = useState(1)\n    const [limit,setLimit] = useState(10)\n    const [historyData,setHistoryData] = useState('')\n    const [sensorId,setSensorId] = useState(\"\")\n    const [sensorList,setSensorList] = useState([])\n    const [dateValue,setDateValue] = useState({\n        dateStart: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000),\n        dateEnd : new Date()\n    })\n    let role = JSON.parse(localStorage.getItem('user')).role\n    const [radData,setRadData] = useState([])\n    const [dataET0,setDataET0] = useState([])\n    const [mappingData,setMappingData] = useState([])\n    const [mappingMv1,setMappingMv1] = useState(\"\")\n    const [mappingMv2,setMappingMv2] = useState(\"\")\n    const [mappingMv3,setMappingMv3] = useState(\"\")\n    let { id } = useParams();\n    const [currentPage, setCurrentPage] = useState(1);\n    const [totalPages, setTotalPages] = useState(0);\n   useEffect(()=>{\n       \n        const getSunRadiation = async () => {\n                try {\n                    await api.get('/radiation')\n                    .then(response =>{\n                        let arr = []\n                        if(response){\n                            let dates = response.data.dateTime\n                            let radValues = response.data.radiation\n                            let dataET0 = response.data.ET0\n                            for (let index = 0; index < dates.length; index++) {\n                                arr.push({\n                                    date: dates[index],\n                                    value : radValues[index]\n                                });\n                                \n                            }\n                            setDataET0(dataET0)\n                            setRadData(arr)\n                        }\n                    })\n                    .catch(err =>{\n                        console.log(err)\n                    })\n                } catch (error) {\n                    console.log(error)\n                }\n        }\n        \n       const getSensorsList = async () => {\n        try {\n            await api.get(`/sensor/sensors`)\n            .then(response=>{\n                let sensors = response.data\n                setSensorList(sensors)\n            }).catch(err=>{\n                console.log(err)\n            })\n            \n        } catch (error) {\n            console.log(error)\n        }\n        \n           \n        }\n        getSunRadiation()\n        getSensorsList()\n   },[]) \n\n\n   const getHistorySensor = async (page) => {\n    console.log(dateValue.dateEnd)\n      await  api.get(`/sensor/sensor-history/${codeSensor}/${dateValue.dateStart}/${dateValue.dateEnd}?pageNum=${page}&limit=60`)\n        .then(response=>{\n            let historyResult = response.data.history\n            let sensorCoords = response.data.sensor_id\n            setHistoryData(historyResult)\n            setCurrentPage(page);\n            setTotalPages(response.data.totalPages);\n            setMappingData(response.data.dataMapping)\n\n        })\n        .catch(err=>{\n            console.log(err)\n        })\n\n    \n   }\n    useEffect(()=>{\n        if(typeof id !== 'undefined'){\n            setCodeSensor(id)\n        }\n        if(codeSensor !== \"\" && clicked) {\n            getHistorySensor(currentPage)\n\n        }\n    },[codeSensor,dateValue.dateEnd,dateValue.dateStart,clicked])\n    const mappingMv = ( date, idSensor, vals) => {\n        let valaueAfterMapping = []\n        \n        let arrayDatemv1 = [];\n        let arrayDatemv2 = [];\n        let arrayDatemv3 = [];\n        mappingData.map(dataMapping => {\n            arrayDatemv1.push(dataMapping.date['Mv1_date'])\n            arrayDatemv2.push(dataMapping.date['Mv2_date'])\n            arrayDatemv3.push(dataMapping.date['Mv3_date'])\n        })\n        let dateMappingSelectedmv1 = \"\";\n        let dateMappingSelectedmv2 = \"\";\n        let dateMappingSelectedmv3 = \"\";\n        \n        if(arrayDatemv1.length > 0){\n            arrayDatemv1.push(date.slice(0, 10));\n            arrayDatemv1.sort();\n            \n            arrayDatemv1.map((dateMapping, i) => {\n                if(dateMapping == date.slice(0, 10)){\n                    if(typeof arrayDatemv1[i-1] !== \"undefined\"){\n                        dateMappingSelectedmv1 = arrayDatemv1[i-1]\n                    }\n                }\n            })\n            \n        }\n        \n        if(arrayDatemv2.length > 0){\n            arrayDatemv2.push(date.slice(0, 10));\n            arrayDatemv2.sort();\n            arrayDatemv2.map((dateMapping, i) => {\n                if(dateMapping == date.slice(0, 10)){\n                    if(typeof arrayDatemv2[i-1] !== \"undefined\"){\n                        dateMappingSelectedmv2 = arrayDatemv2[i-1]\n                    }\n                }\n            })\n        }\n        if(arrayDatemv3.length > 0){\n            arrayDatemv3.push(date.slice(0, 10));\n            arrayDatemv3.sort();\n            arrayDatemv3.map((dateMapping, i) => {\n                if(dateMapping == date.slice(0, 10)){\n                    if(typeof arrayDatemv3[i-1] !== \"undefined\"){\n                        dateMappingSelectedmv3 = arrayDatemv3[i-1]\n                    }\n                }\n            })\n            \n        }\n        if(mappingData.length == 0){\n            vals.map((val, index) => {\n                valaueAfterMapping[index] = parseFloat(val);\n            })\n        }\n        mappingData.map(dataMapping => {\n            \n            vals.map((val, index) => {\n                valaueAfterMapping[index] = val;\n                let num = parseInt(index+1);\n\n                let keyData = 'Mv'+num+'_date'\n                let keyDataMax = 'Mv'+num+'_max'\n                let keyDataMin = 'Mv'+num+'_min'\n                if(dateMappingSelectedmv1 != \"\" && num == 1){\n                    \n                    \n                    if(dateMappingSelectedmv1 == dataMapping.date[keyData]){\n                        if(val >= parseFloat(dataMapping.max[keyDataMax])  && val <= parseFloat(dataMapping.min[keyDataMin])){\n                            valaueAfterMapping[index] = (((parseFloat(val) - dataMapping.max[keyDataMax]) / (dataMapping.min[keyDataMin] - dataMapping.max[keyDataMax])) * 100).toFixed(2)\n                        }\n\n                    }\n                    \n                }\n                if(dateMappingSelectedmv2 != \"\"  && num == 2){\n                    if(dateMappingSelectedmv2 == dataMapping.date[keyData]){\n                        if(val >= parseFloat(dataMapping.max[keyDataMax])  && val <= parseFloat(dataMapping.min[keyDataMin])){\n                            valaueAfterMapping[index]  = (((parseFloat(val) - parseFloat(dataMapping.max[keyDataMax]))  / (dataMapping.min[keyDataMin] - dataMapping.max[keyDataMax])) * 100).toFixed(2)\n                    }\n                    }\n                }\n                if(dateMappingSelectedmv3 != \"\" &&  num == 3){\n                    if(dateMappingSelectedmv3 == dataMapping.date[keyData]){\n                        if(val >= parseFloat(dataMapping.max[keyDataMax])  && val <= parseFloat(dataMapping.min[keyDataMin])){\n                            valaueAfterMapping[index]  = (((parseFloat(val) - parseFloat(dataMapping.max[keyDataMax])) / (dataMapping.min[keyDataMin] - dataMapping.max[keyDataMax])) * 100).toFixed(2)\n                        }\n                    }\n                }\n            })\n        })\n        return valaueAfterMapping;\n      }\n\n//    const filteredHistory = historyData && historyData.filter(history => {\n//         let arraymv = mappingMv(history.time, sensorId, [history.mv1, history.mv2, history.mv3]) \n\n//         history.mv1 = arraymv[0];\n//         history.mv2 = arraymv[1];\n//         history.mv3 = arraymv[2];\n//     let dates = new Date(history.time)\n//         let filterHistory = true\n//         if (dateValue.startDate) {\n//           filterHistory = filterHistory && (new Date(dateValue.startDate) < dates)\n//         }\n//         if (dateValue.endDate) {\n//           filterHistory = filterHistory && (new Date(dateValue.endDate) > dates)\n//         }\n//         return filterHistory\n\n// })\n\n// const paginate = (pageNumber) => setPageNum(pageNumber);\n\n// const indexOfLastItem = pageNum * limit;\n// const indexOfFirstItem = indexOfLastItem - limit;\n// const currentItems = historyData.slice(indexOfFirstItem, indexOfLastItem);\n\n      const handlePageChange = (page) => {\n        getHistorySensor(page);\n      };\n\n      const downloadHistoryData = async () => {\n        let limit = historyData.length * totalPages\n        try {\n          const response = await api.get(`/sensor/sensor-history/${codeSensor}/${dateValue.dateStart}/${dateValue.dateEnd}?limit=${limit}`);\n          const historyResult = response.data.history;\n          const sensorCoords = response.data.sensor_id;\n          \n          let csvContent = 'Date,Temp (°C),Humidity (%),Pressure (kPa),Altitude (M),Soil Temp (°C),Humidity 20cm (%),Humidity 40cm (%),Humidity 60cm (%),Humidity 20cm,Humidity 40cm,Humidity 60cm\\r\\n';\n          historyResult.forEach(history => {\n            csvContent += `${history.time},${history.temperature},${history.humidity},${history.pressure},${history.altitude},${history.ts},${history.mv1},${history.mv2},${history.mv3},${history.niv1},${history.niv2},${history.niv3}\\r\\n`;\n          });\n      \n          const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8' });\n      \n          const downloadLink = document.createElement('a');\n          downloadLink.href = URL.createObjectURL(blob);\n          downloadLink.download = `sensor_history_${sensorCoords}_${moment(dateValue.dateStart).format('YYYYMMDD')}_${moment(dateValue.dateEnd).format('YYYYMMDD')}.csv`;\n          downloadLink.click();\n        } catch (error) {\n          console.log(error);\n        }\n      };\n      \n      \nreturn (\n    <Container fluid className=\"main-content-container p-4\">\n        <Row noGutters className=\"page-header d-flex justify-content-between align-items-center py-4\">\n            <PageTitle \n                 sm=\"4\"\n                 subtitle={t('View your sensors data history')}\n                 title='My Sensors History'\n                 className=\"text-sm-left\"\n            />\n            <div>\n                <Button theme=\"info\" onClick={() => history.push('/AddSensor')}><i className='material-icons'>&#xe145;</i> Add Sensor</Button>\n\n            </div>\n        </Row>\n        <Row className=\"d-flex justify-content-around align-items-center\">\n            {\n           (typeof id === 'undefined')\n           ?\n            <Col lg='4' md=\"12\" sm=\"12\">\n            <FormGroup>\n                    <FormSelect\n                        onChange={(e) => setCodeSensor(e.target.value)}\n                        value={codeSensor}\n                    >\n                        <option value=\"\">{t('select_sensor')}</option>\n                            {\n                                    sensorList.map(sensor=>{\n                                        return(\n                                            \n                                            <option style={{cursor :\"pointer\"}} value={sensor.code}>{sensor.code}</option>\n                                            \n                                            \n                                            )\n                                        })\n                            }\n                    </FormSelect>\n            </FormGroup>\n            </Col>\n            :\n            ''\n            }\n             <Col lg='4' md=\"12\" sm='12' className=\"form-group\">\n                        <p style={{ margin: \"0px\" }}>{t('start_date')}</p>\n                        <FormInput type=\"date\" value={dateValue.dateStart} onChange={(e) => setDateValue({...dateValue,dateStart : e.target.value})} />\n                      </Col>\n                      <Col lg='4' md=\"12\" sm='12' className=\"form-group\">\n                        <p style={{ margin: \"0px\" }}>{t('end_date')}</p>\n                        <FormInput type=\"date\" value={dateValue.dateEnd} onChange={(e) => setDateValue({...dateValue,dateEnd : e.target.value})}/>\n\n\n                      </Col>\n                      <Col lg='4' md=\"12\" sm='12' className=\"form-group\">\n                        <p style={{ margin: \"0px\" }}>{t('search')}</p>\n                        <Button onClick={() =>  setClicked(true)}>{t('search')}</Button>\n\n                      </Col>\n                      {totalPages > 0 && (\n                        <PaginateHistory\n                        totalPages={totalPages}\n                        currentPage={currentPage}\n                        onPageChange={handlePageChange}\n                        />\n                    )}\n        </Row>\n        <Row>\n            <Col lg='12' md=\"12\" sm=\"12\">\n                <Card>\n                    <CardHeader className=\"border-bottom\">{codeSensor !== \"\" ? <span>{t('sensor_code')} : {codeSensor}</span> : null}</CardHeader>\n                    <CardBody>\n                        <Button onClick={() => setToggleView(!toggleView)}>{ toggleView ?  'View Solar Radiation' : 'View Sensor History' }</Button>\n                        {\n                                toggleView\n                                ?\n                                    <Row>\n                                        <Col lg='12'md=\"12\" sm=\"12\">\n                                            {\n                                                historyData.length > 0 \n                                                ?\n                                            <div className='d-flex justify-content-end'>\n                                                <DownloadTableExcel\n                                                    filename=\"history table\"\n                                                    sheet=\"history\"\n                                                    currentTableRef={table.current}\n                                                >\n                                                <Button theme=\"info\" ><i className='material-icons'>&#xf090;</i> Download this page</Button>\n\n                                                </DownloadTableExcel>\n                                                       <Button className=\"mx-2\" theme=\"info\" onClick={downloadHistoryData}>\n                                                             <i className='material-icons'>&#xf090;</i> Download History\n                                                        </Button>\n                                                <Button className=\"mx-2\" onClick={() => setToggle(!toggle)}>{toggle ? \"View Chart\"  : \"View Table\"}</Button>\n\n                                            </div>\n\n                                                :\n                                                null\n                                            }\n                                            <div id=\"table-wrapper\" className={`${toggle ? '' : 'd-none'}`}>\n                                                <div id=\"table-scroll\">\n                                                    <table ref={table} className=\"table mb-4 table-hover table-bordered  tabel-responsive-lg \" style={{overflowX : \"scroll\"}}>\n                                        <thead className=\"bg-light text-center\">\n                                            <tr>\n                                                <th style={{fontSize:12}} scope=\"col\" className=\"border-0\">{t('Date')} (GMT)</th>\n                                                <th style={{fontSize:12}} scope=\"col\" className=\"border-0\">{t('Temp.')} (°C)</th>\n                                                <th style={{fontSize:12}} scope=\"col\" className=\"border-0\">{t('Humidity')} (%)</th>\n                                                <th style={{fontSize:12}} scope=\"col\" className=\"border-0\">{t('Pressure')} (kPa)</th>\n                                                <th style={{fontSize:12}} scope=\"col\" className=\"border-0\">{t('Altitude')} (M)</th>\n                                                <th style={{fontSize:12}} scope=\"col\" className=\"border-0\">{t('subsoil_Temp.')} (°C)</th>\n                                                <th style={{fontSize:12}} scope=\"col\" className=\"border-0\">{t('Humidity')} 20cm(%)</th>\n                                                <th style={{fontSize:12}} scope=\"col\" className=\"border-0\">{t('Humidity')} 40cm(%)</th>\n                                                <th style={{fontSize:12}} scope=\"col\" className=\"border-0\">{t('Humidity')} 60cm(%)</th>\n                                                <th style={{fontSize:12}} scope=\"col\" className=\"border-0\">{t('Humidity 20cm')} (%)</th>\n                                                <th style={{fontSize:12}} scope=\"col\" className=\"border-0\">{t('Humidity 40cm')} (%)</th>\n                                                <th style={{fontSize:12}} scope=\"col\" className=\"border-0\">{t('Humidity 60cm')} (%)</th>\n                                                <th style={{fontSize:12}} scope=\"col\" className=\"border-0\">{t('Charge')}</th>    \n                                                {/* <th style={{fontSize:12}} scope=\"col\" className=\"border-0\">{t('Voltage adc')}</th>                                                                    \n                                                <th style={{fontSize:12}} scope=\"col\" className=\"border-0\">{t('ET0')}</th>                                     */}\n                                            </tr>\n                                        </thead>\n                                            <tbody>\n                                                        {\n                                                       historyData && historyData.map(sensorData=>{\n                                                            // let date = sensorData.time.slice(0,10)\n                                                            let dailyET0 = \"\" \n                                                            let lat = \"\"\n                                                            let lon = \"\"\n                                                            // dataET0.map(value=>{\n                                                            //     if(value.date == date){\n                                                            //         dailyET0 = value.ET0\n                                                                    \n                                                            //     }\n                                                            // })\n                                                            let press = Number(sensorData.pressure) / 1000\n                                                            let subSoilTemp = \"-\"\n                                                            if(sensorData.ts !== \"-127.000\"){\n                                                                subSoilTemp = sensorData.ts\n                                                            }\n                                                            return(\n                                                                    <tr>\n                                                                        <td>{sensorData.time} </td>\n                                                                        {/* <td>{coords.latitude}</td>\n                                                                        <td>{coords.longitude}</td> */}\n                                                                        <td>{sensorData.temperature}</td>\n                                                                        <td>{sensorData.humidity}</td>\n                                                                        <td>{parseFloat(press).toFixed(2)}</td>\n                                                                        <td>{sensorData.altitude}</td>\n                                                                        <td className='text-center'>{subSoilTemp}</td>\n                                                                        <td>{sensorData.mv1}</td>\n                                                                        <td>{sensorData.mv2}</td>\n                                                                        <td>{sensorData.mv3}</td>\n                                                                        <td>{sensorData.niv1}</td>\n                                                                        <td>{sensorData.niv2}</td>\n                                                                        <td>{sensorData.niv3}</td>\n                                                                        <td>{Number(sensorData.charge)}</td>\n                                                                        {/* <td>{Number(sensorData.adc) * -1}</td> */}\n\n                                                                        {/* <td>{dailyET0}</td> */}\n                                                                    </tr>\n                                                                    \n                                                                    )\n                                                                })\n                                                            }\n\n                                            </tbody>\n                                                    </table>\n                                                        \n                                                \n                                                </div>\n\n                                            </div>\n                                        </Col>\n                                        <Col className={`${toggle ? 'd-none' : ''}`} lg=\"12\" md=\"8\" sm=\"8\">\n                                                <SensorHistoryChart data={historyData} />\n                                            </Col>\n                                    </Row>\n                                :\n                                    <Row>\n                                        <Col lg='12'md=\"12\" sm=\"12\">\n                                            {/* <PaginateHistory nPages={nPages} currentPage={currentPage} setCurrentPage={setCurrentPage} /> */}\n                                            <div className='d-flex justify-content-end'>\n                                                <DownloadTableExcel\n                                                    filename=\"history table\"\n                                                    sheet=\"history\"\n                                                    currentTableRef={table.current}\n                                                >\n                                                <Button theme=\"info\" ><i className='material-icons'>&#xf090;</i></Button>\n\n                                                </DownloadTableExcel>\n                                                <Button className=\"mx-2\" onClick={() => setToggle(!toggle)}>{toggle ? \"View Chart\"  : \"View Table\"}</Button>\n\n                                            </div>\n                                            <div id=\"table-wrapper\" className={`${toggle ? '' : 'd-none'}`}>\n                                                <h5 className='text-center'>Week Solar Radiation</h5>\n                                                <div id=\"table-scroll\">\n                                                    <table ref={table} className=\"table mb-4 table-hover table-bordered  tabel-responsive-lg \" style={{overflowX : \"scroll\"}}>\n                                        <thead className=\"bg-light text-center\">\n                                            <tr>\n                                                <th scope=\"col\" className=\"border-0\">{t('Date')}</th>\n                                                <th scope=\"col\" className=\"border-0\">{t('Solar Radiation')}</th>\n                                                                    \n\n                                            </tr>\n                                        </thead>\n                                            <tbody>\n                                                        {\n                                                    radData && radData.map(data=>{\n                                                        let date = moment(data.date).locale('en-EN').format(\"ddd, h a\")\n                                                            return(\n                                                                    <tr>\n                                                                        <td>{date}</td>\n                                                                        <td>{data.value}</td>\n\n\n                                                                    </tr>\n                                                                    \n                                                                    )\n                                                                })\n                                                            }\n\n                                            </tbody>\n                                                    </table>\n                                                        \n                                                \n                                                </div>\n\n                                            </div> \n                                        </Col>\n                                        <Col className={`${toggle ? 'd-none' : ''}`} lg=\"12\" md=\"8\" sm=\"8\">\n                                                <SolarRadiationChart data={radData} />\n                                            </Col>\n                                \n                                    </Row>\n                        }\n                    </CardBody>\n                </Card>\n\n            </Col>\n        </Row>\n    </Container>\n  )\n}\n\nexport default SensorHistory"],"mappings":"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"},"metadata":{},"sourceType":"module"}