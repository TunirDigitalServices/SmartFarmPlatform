{"ast":null,"code":"import _regeneratorRuntime from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/var/www/prod/smartfarm/backoffice/frontend/src/views/SensorHistory.js\";\n\nimport React, { useEffect, useState, useRef } from 'react';\nimport { Button, Row, Col, FormGroup, Form, FormInput, Container, Card, CardBody, CardHeader, FormSelect, Nav, NavItem, NavLink } from 'shards-react';\nimport PageTitle from '../components/common/PageTitle';\nimport { useTranslation } from \"react-i18next\";\nimport RangeDatePicker from '../components/common/RangeDatePicker';\nimport api from '../api/api';\nimport PaginateHistory from './PaginateHistory';\nimport { useHistory, useParams } from 'react-router-dom';\nimport moment from 'moment';\nimport { DownloadTableExcel } from \"react-export-table-to-excel\";\nimport SensorHistoryChart from './SensorHistoryChart';\nimport SolarRadiationChart from './SolarRadiationChart';\n\nvar SensorHistory = function SensorHistory() {\n  var table = useRef(null);\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      toggle = _useState2[0],\n      setToggle = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      toggleView = _useState4[0],\n      setToggleView = _useState4[1];\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t,\n      i18n = _useTranslation.i18n;\n\n  var history = useHistory();\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      codeSensor = _useState6[0],\n      setCodeSensor = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      historyData = _useState8[0],\n      setHistoryData = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      sensorId = _useState10[0],\n      setSensorId = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      sensorList = _useState12[0],\n      setSensorList = _useState12[1];\n\n  var _useState13 = useState({\n    startDate: null,\n    endDate: null\n  }),\n      _useState14 = _slicedToArray(_useState13, 2),\n      dateValue = _useState14[0],\n      setDateValue = _useState14[1];\n\n  var _useState15 = useState([]),\n      _useState16 = _slicedToArray(_useState15, 2),\n      radData = _useState16[0],\n      setRadData = _useState16[1];\n\n  var _useState17 = useState([]),\n      _useState18 = _slicedToArray(_useState17, 2),\n      dataET0 = _useState18[0],\n      setDataET0 = _useState18[1];\n\n  var _useState19 = useState(\"\"),\n      _useState20 = _slicedToArray(_useState19, 2),\n      mappingMv1 = _useState20[0],\n      setMappingMv1 = _useState20[1];\n\n  var _useState21 = useState(\"\"),\n      _useState22 = _slicedToArray(_useState21, 2),\n      mappingMv2 = _useState22[0],\n      setMappingMv2 = _useState22[1];\n\n  var _useState23 = useState(\"\"),\n      _useState24 = _slicedToArray(_useState23, 2),\n      mappingMv3 = _useState24[0],\n      setMappingMv3 = _useState24[1];\n\n  var _useState25 = useState(1),\n      _useState26 = _slicedToArray(_useState25, 2),\n      currentPage = _useState26[0],\n      setCurrentPage = _useState26[1];\n\n  var _useState27 = useState(50),\n      _useState28 = _slicedToArray(_useState27, 1),\n      historyPerPage = _useState28[0];\n\n  var paginate = function paginate(pageNumber) {\n    return setCurrentPage(pageNumber);\n  };\n\n  var _useParams = useParams(),\n      id = _useParams.id;\n\n  useEffect(function () {\n    var getSunRadiation = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return api.get('/radiation').then(function (response) {\n                  var arr = [];\n\n                  if (response) {\n                    var dates = response.data.dateTime;\n                    var radValues = response.data.radiation;\n                    var _dataET = response.data.ET0;\n\n                    for (var index = 0; index < dates.length; index++) {\n                      arr.push({\n                        date: dates[index],\n                        value: radValues[index]\n                      });\n                    }\n\n                    setDataET0(_dataET);\n                    setRadData(arr);\n                  }\n                }).catch(function (err) {\n                  console.log(err);\n                });\n\n              case 3:\n                _context.next = 8;\n                break;\n\n              case 5:\n                _context.prev = 5;\n                _context.t0 = _context[\"catch\"](0);\n                console.log(_context.t0);\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 5]]);\n      }));\n\n      return function getSunRadiation() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    var getSensorsList = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return api.get(\"/sensor/sensors\").then(function (response) {\n                  var sensors = response.data;\n                  setSensorList(sensors);\n                }).catch(function (err) {\n                  console.log(err);\n                });\n\n              case 3:\n                _context2.next = 8;\n                break;\n\n              case 5:\n                _context2.prev = 5;\n                _context2.t0 = _context2[\"catch\"](0);\n                console.log(_context2.t0);\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 5]]);\n      }));\n\n      return function getSensorsList() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    getSunRadiation();\n    getSensorsList();\n  }, []);\n\n  var getHistorySensor = function getHistorySensor() {\n    api.get(\"/sensor/sensor-history/\".concat(codeSensor)).then(function (response) {\n      var historyResult = response.data.history;\n      var sensorCoords = response.data.sensor_id; // setCoords(sensorCoords)\n      // setSensorId(sensorCoords)\n\n      setHistoryData(historyResult);\n    }).catch(function (err) {\n      console.log(err);\n    });\n  };\n\n  useEffect(function () {\n    if (typeof id !== 'undefined') {\n      setCodeSensor(id);\n    }\n\n    if (codeSensor !== \"\") {\n      getHistorySensor();\n    }\n  }, [codeSensor]);\n\n  var mappingMv = function mappingMv(dateSensor, idSensor, vals) {\n    try {\n      var dataMapping = {\n        vals: vals,\n        date: dateSensor,\n        sensor_id: idSensor\n      };\n      var urlMapping = '/sensor/sensor-mapping';\n      api.post(urlMapping, dataMapping).then( /*#__PURE__*/function () {\n        var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(response) {\n          return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  if (response.data.type === \"success\") {\n                    setMappingMv1(response.data.valMapping[0]);\n                    setMappingMv2(response.data.valMapping[1]);\n                    setMappingMv3(response.data.valMapping[2]);\n                  }\n\n                case 1:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3);\n        }));\n\n        return function (_x) {\n          return _ref3.apply(this, arguments);\n        };\n      }()).catch(function (error) {\n        console.log(error);\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  var filteredHistory = historyData && historyData.filter(function (history) {\n    //mappingMv(history.time, sensorId, [history.mv1, history.mv2, history.mv3]) \n    var dates = new Date(history.time);\n    var filterHistory = true;\n\n    if (dateValue.startDate) {\n      filterHistory = filterHistory && new Date(dateValue.startDate) < dates;\n    }\n\n    if (dateValue.endDate) {\n      filterHistory = filterHistory && new Date(dateValue.endDate) > dates;\n    }\n\n    return filterHistory;\n  });\n  var indexOfLastRecord = currentPage * historyPerPage;\n  var indexOfFirstRecord = indexOfLastRecord - historyPerPage;\n  var currentHistory = filteredHistory.slice(indexOfFirstRecord, indexOfLastRecord);\n  var nPages = Math.ceil(historyData.length / historyPerPage);\n  return /*#__PURE__*/React.createElement(Container, {\n    fluid: true,\n    className: \"main-content-container p-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    noGutters: true,\n    className: \"page-header d-flex justify-content-between align-items-center py-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(PageTitle, {\n    sm: \"4\",\n    subtitle: t('View your sensors data history'),\n    title: \"My Sensors History\",\n    className: \"text-sm-left\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    theme: \"info\",\n    onClick: function onClick() {\n      return history.push('/AddSensor');\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"material-icons\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 81\n    }\n  }, \"\\uE145\"), \" Add Sensor\"))), /*#__PURE__*/React.createElement(Row, {\n    className: \"d-flex justify-content-around align-items-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 9\n    }\n  }, typeof id === 'undefined' ? /*#__PURE__*/React.createElement(Col, {\n    lg: \"4\",\n    md: \"12\",\n    sm: \"12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FormGroup, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FormSelect, {\n    onChange: function onChange(e) {\n      return setCodeSensor(e.target.value);\n    },\n    value: codeSensor,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 25\n    }\n  }, t('select_sensor')), sensorList.map(function (sensor) {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      style: {\n        cursor: \"pointer\"\n      },\n      value: sensor.code,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 45\n      }\n    }, sensor.code);\n  })))) : '', /*#__PURE__*/React.createElement(Col, {\n    className: \"mb-3\",\n    lg: \"4\",\n    md: \"12\",\n    sm: \"12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(RangeDatePicker, {\n    onChange: function onChange(value) {\n      return setDateValue({\n        endDate: value.endDate,\n        startDate: value.startDate\n      });\n    },\n    EndingDatePlaceHolder: \" Date\",\n    StartingDatePlaceHolder: \" Date\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: \"12\",\n    md: \"12\",\n    sm: \"12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(CardHeader, {\n    className: \"border-bottom\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 21\n    }\n  }, codeSensor !== \"\" ? /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 80\n    }\n  }, t('sensor_code'), \" : \", codeSensor) : null), /*#__PURE__*/React.createElement(CardBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: function onClick() {\n      return setToggleView(!toggleView);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 25\n    }\n  }, toggleView ? 'View Solar Radiation' : 'View Sensor History'), toggleView ? /*#__PURE__*/React.createElement(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: \"12\",\n    md: \"12\",\n    sm: \"12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-end\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(DownloadTableExcel, {\n    filename: \"history table\",\n    sheet: \"history\",\n    currentTableRef: table.current,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    theme: \"info\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"material-icons\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 71\n    }\n  }, \"\\uF090\"))), /*#__PURE__*/React.createElement(Button, {\n    className: \"mx-2\",\n    onClick: function onClick() {\n      return setToggle(!toggle);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 49\n    }\n  }, toggle ? \"View Chart\" : \"View Table\")), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"table-wrapper\",\n    className: \"\".concat(toggle ? '' : 'd-none'),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"table-scroll\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    ref: table,\n    className: \"table mb-4 table-hover table-bordered  tabel-responsive-lg \",\n    style: {\n      overflowX: \"scroll\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 53\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    className: \"bg-light text-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    className: \"border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 49\n    }\n  }, t('Date'), \"(GMT)\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    className: \"border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 49\n    }\n  }, t('Temp.'), \" (\\xB0C)\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    className: \"border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 49\n    }\n  }, t('Humidity'), \" (%)\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    className: \"border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 49\n    }\n  }, t('Pressure'), \" (hPa)\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    className: \"border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 49\n    }\n  }, t('Altitude'), \" (M)\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    className: \"border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 49\n    }\n  }, t('Temp.'), \" (\\xB0C)\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    className: \"border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 49\n    }\n  }, t('Humidity 1'), \" (%)\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    className: \"border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 49\n    }\n  }, t('Humidity 2'), \" (%)\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    className: \"border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 49\n    }\n  }, t('Humidity 3'), \" (%)\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    className: \"border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 49\n    }\n  }, t('Charge')), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    className: \"border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 49\n    }\n  }, t('Voltage adc')), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    className: \"border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 49\n    }\n  }, t('ET0')))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 45\n    }\n  }, filteredHistory && filteredHistory.map(function (sensorData) {\n    var date = sensorData.time.slice(0, 10);\n    var dailyET0 = \"\";\n    var lat = \"\";\n    var lon = \"\";\n    dataET0.map(function (value) {\n      if (value.date == date) {\n        dailyET0 = value.ET0;\n      }\n    });\n    var press = Number(sensorData.pressure) / 1000;\n    var subSoilTemp = \"-\";\n\n    if (sensorData.ts !== \"-127.000\") {\n      subSoilTemp = sensorData.ts;\n    }\n\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 69\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 73\n      }\n    }, sensorData.time, \" \"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 73\n      }\n    }, sensorData.temperature), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 73\n      }\n    }, sensorData.humidity), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 73\n      }\n    }, parseFloat(press).toFixed(2)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 73\n      }\n    }, sensorData.altitude), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"text-center\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 73\n      }\n    }, subSoilTemp), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 73\n      }\n    }, sensorData.mv1), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 73\n      }\n    }, sensorData.mv2), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 73\n      }\n    }, sensorData.mv3), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 73\n      }\n    }, Number(sensorData.charge) * 100), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 73\n      }\n    }, Number(sensorData.adc) * -1), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 73\n      }\n    }, dailyET0));\n  })))))), /*#__PURE__*/React.createElement(Col, {\n    className: \"\".concat(toggle ? 'd-none' : ''),\n    lg: \"12\",\n    md: \"8\",\n    sm: \"8\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(SensorHistoryChart, {\n    data: filteredHistory,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 49\n    }\n  }))) : /*#__PURE__*/React.createElement(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: \"12\",\n    md: \"12\",\n    sm: \"12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-end\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(DownloadTableExcel, {\n    filename: \"history table\",\n    sheet: \"history\",\n    currentTableRef: table.current,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    theme: \"info\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"material-icons\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 71\n    }\n  }, \"\\uF090\"))), /*#__PURE__*/React.createElement(Button, {\n    className: \"mx-2\",\n    onClick: function onClick() {\n      return setToggle(!toggle);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 49\n    }\n  }, toggle ? \"View Chart\" : \"View Table\")), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"table-wrapper\",\n    className: \"\".concat(toggle ? '' : 'd-none'),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"text-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 49\n    }\n  }, \"Week Solar Radiation\"), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"table-scroll\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    ref: table,\n    className: \"table mb-4 table-hover table-bordered  tabel-responsive-lg \",\n    style: {\n      overflowX: \"scroll\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 53\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    className: \"bg-light text-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    className: \"border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 49\n    }\n  }, t('Date')), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    className: \"border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 49\n    }\n  }, t('Solar Radiation')))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 45\n    }\n  }, radData && radData.map(function (data) {\n    var date = moment(data.date).locale('en-EN').format(\"ddd, h a\");\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 69\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 73\n      }\n    }, date), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 73\n      }\n    }, data.value));\n  })))))), /*#__PURE__*/React.createElement(Col, {\n    className: \"\".concat(toggle ? 'd-none' : ''),\n    lg: \"12\",\n    md: \"8\",\n    sm: \"8\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(SolarRadiationChart, {\n    data: radData,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 49\n    }\n  }))))))));\n};\n\nexport default SensorHistory;","map":{"version":3,"names":["React","useEffect","useState","useRef","Button","Row","Col","FormGroup","Form","FormInput","Container","Card","CardBody","CardHeader","FormSelect","Nav","NavItem","NavLink","PageTitle","useTranslation","RangeDatePicker","api","PaginateHistory","useHistory","useParams","moment","DownloadTableExcel","SensorHistoryChart","SolarRadiationChart","SensorHistory","table","toggle","setToggle","toggleView","setToggleView","t","i18n","history","codeSensor","setCodeSensor","historyData","setHistoryData","sensorId","setSensorId","sensorList","setSensorList","startDate","endDate","dateValue","setDateValue","radData","setRadData","dataET0","setDataET0","mappingMv1","setMappingMv1","mappingMv2","setMappingMv2","mappingMv3","setMappingMv3","currentPage","setCurrentPage","historyPerPage","paginate","pageNumber","id","getSunRadiation","get","then","response","arr","dates","data","dateTime","radValues","radiation","ET0","index","length","push","date","value","catch","err","console","log","getSensorsList","sensors","getHistorySensor","historyResult","sensorCoords","sensor_id","mappingMv","dateSensor","idSensor","vals","dataMapping","urlMapping","post","type","valMapping","error","filteredHistory","filter","Date","time","filterHistory","indexOfLastRecord","indexOfFirstRecord","currentHistory","slice","nPages","Math","ceil","e","target","map","sensor","cursor","code","current","overflowX","sensorData","dailyET0","lat","lon","press","Number","pressure","subSoilTemp","ts","temperature","humidity","parseFloat","toFixed","altitude","mv1","mv2","mv3","charge","adc","locale","format"],"sources":["/var/www/prod/smartfarm/backoffice/frontend/src/views/SensorHistory.js"],"sourcesContent":["import React ,{useEffect,useState,useRef} from 'react'\nimport { Button, Row, Col, FormGroup, Form, FormInput, Container, Card,CardBody,CardHeader ,FormSelect, Nav, NavItem, NavLink } from 'shards-react'\nimport PageTitle from '../components/common/PageTitle'\nimport { useTranslation } from \"react-i18next\";\nimport RangeDatePicker from '../components/common/RangeDatePicker';\nimport api from '../api/api';\nimport PaginateHistory from './PaginateHistory';\nimport { useHistory, useParams   } from 'react-router-dom';\nimport moment from 'moment';\nimport { DownloadTableExcel } from \"react-export-table-to-excel\";\nimport SensorHistoryChart from './SensorHistoryChart';\nimport SolarRadiationChart from './SolarRadiationChart';\n\n\nconst SensorHistory = () => {\n    const table = useRef(null)\n    const [toggle, setToggle] = useState(true)\n    const [toggleView, setToggleView] = useState(true)\n    const { t, i18n } = useTranslation();\n    const history = useHistory()\n    const [codeSensor,setCodeSensor] = useState('')\n    const [historyData,setHistoryData] = useState('')\n    const [sensorId,setSensorId] = useState(\"\")\n    const [sensorList,setSensorList] = useState([])\n    const [dateValue,setDateValue] = useState({\n        startDate : null,\n        endDate : null\n    })\n    const [radData,setRadData] = useState([])\n    const [dataET0,setDataET0] = useState([])\n    const [mappingMv1,setMappingMv1] = useState(\"\")\nconst [mappingMv2,setMappingMv2] = useState(\"\")\nconst [mappingMv3,setMappingMv3] = useState(\"\")\n    const [currentPage, setCurrentPage] = useState(1);\n    const [historyPerPage] = useState(50);\n    const paginate = pageNumber => setCurrentPage(pageNumber);\n    let { id } = useParams();\n   useEffect(()=>{\n       \n        const getSunRadiation = async () => {\n                try {\n                    await api.get('/radiation')\n                    .then(response =>{\n                        let arr = []\n                        if(response){\n                            let dates = response.data.dateTime\n                            let radValues = response.data.radiation\n                            let dataET0 = response.data.ET0\n                            for (let index = 0; index < dates.length; index++) {\n                                arr.push({\n                                    date: dates[index],\n                                    value : radValues[index]\n                                });\n                                \n                            }\n                            setDataET0(dataET0)\n                            setRadData(arr)\n                        }\n                    })\n                    .catch(err =>{\n                        console.log(err)\n                    })\n                } catch (error) {\n                    console.log(error)\n                }\n        }\n        \n       const getSensorsList = async () => {\n        try {\n            await api.get(`/sensor/sensors`)\n            .then(response=>{\n                let sensors = response.data\n                setSensorList(sensors)\n            }).catch(err=>{\n                console.log(err)\n            })\n            \n        } catch (error) {\n            console.log(error)\n        }\n        \n           \n        }\n        getSunRadiation()\n        getSensorsList()\n   },[]) \n\n\n   const getHistorySensor = () => {\n\n        api.get(`/sensor/sensor-history/${codeSensor}`)\n        .then(response=>{\n            let historyResult = response.data.history\n            let sensorCoords = response.data.sensor_id\n            // setCoords(sensorCoords)\n            // setSensorId(sensorCoords)\n            setHistoryData(historyResult)\n        })\n        .catch(err=>{\n            console.log(err)\n        })\n\n    \n   }\n    useEffect(()=>{\n        if(typeof id !== 'undefined'){\n            setCodeSensor(id)\n        }\n        if(codeSensor !== \"\") {\n            getHistorySensor()\n\n        }\n    },[codeSensor])\n    const mappingMv = ( dateSensor, idSensor, vals) => {\n        try {\n            let dataMapping = {\n                vals: vals,\n                date: dateSensor,\n                sensor_id: idSensor\n              }\n          let urlMapping = '/sensor/sensor-mapping'\n      \n          api.post(urlMapping,dataMapping)\n          .then(async response=>{\n              if(response.data.type === \"success\"){\n                setMappingMv1(response.data.valMapping[0])\n                setMappingMv2(response.data.valMapping[1])\n                setMappingMv3(response.data.valMapping[2])\n              }\n            }).catch(error=>{\n              console.log(error)\n            })\n          \n        } catch (error) {\n          console.log(error)\n      \n        }\n      }\n\n   const filteredHistory = historyData && historyData.filter(history => {\n        //mappingMv(history.time, sensorId, [history.mv1, history.mv2, history.mv3]) \n\n\n    let dates = new Date(history.time)\n        let filterHistory = true\n        if (dateValue.startDate) {\n          filterHistory = filterHistory && (new Date(dateValue.startDate) < dates)\n        }\n        if (dateValue.endDate) {\n          filterHistory = filterHistory && (new Date(dateValue.endDate) > dates)\n        }\n        return filterHistory\n\n})\n\nconst indexOfLastRecord = currentPage * historyPerPage;\nconst indexOfFirstRecord = indexOfLastRecord - historyPerPage;\nconst currentHistory = filteredHistory.slice(indexOfFirstRecord, indexOfLastRecord);\nconst nPages = Math.ceil(historyData.length / historyPerPage)\n\n\n\n\nreturn (\n    <Container fluid className=\"main-content-container p-4\">\n        <Row noGutters className=\"page-header d-flex justify-content-between align-items-center py-4\">\n            <PageTitle \n                 sm=\"4\"\n                 subtitle={t('View your sensors data history')}\n                 title='My Sensors History'\n                 className=\"text-sm-left\"\n            />\n            <div>\n                <Button theme=\"info\" onClick={() => history.push('/AddSensor')}><i className='material-icons'>&#xe145;</i> Add Sensor</Button>\n\n            </div>\n        </Row>\n        <Row className=\"d-flex justify-content-around align-items-center\">\n            {\n           (typeof id === 'undefined')\n           ?\n            <Col lg='4' md=\"12\" sm=\"12\">\n            <FormGroup>\n                    <FormSelect\n                        onChange={(e) => setCodeSensor(e.target.value)}\n                        value={codeSensor}\n                    >\n                        <option value=\"\">{t('select_sensor')}</option>\n                            {\n                                    sensorList.map(sensor=>{\n                                        return(\n                                            \n                                            <option style={{cursor :\"pointer\"}} value={sensor.code}>{sensor.code}</option>\n                                            \n                                            \n                                            )\n                                        })\n                            }\n                    </FormSelect>\n            </FormGroup>\n            </Col>\n            :\n            ''\n            }\n            <Col className=\"mb-3\" lg='4' md=\"12\" sm=\"12\">\n                <RangeDatePicker\n                \n                onChange={value =>\n                    setDateValue({endDate : value.endDate , startDate : value.startDate})\n                }\n                EndingDatePlaceHolder=\" Date\"\n                StartingDatePlaceHolder=\" Date\"\n            />\n\n            </Col>\n        </Row>\n        <Row>\n            <Col lg='12' md=\"12\" sm=\"12\">\n                <Card>\n                    <CardHeader className=\"border-bottom\">{codeSensor !== \"\" ? <span>{t('sensor_code')} : {codeSensor}</span> : null}</CardHeader>\n                    <CardBody>\n                        <Button onClick={() => setToggleView(!toggleView)}>{ toggleView ?  'View Solar Radiation' : 'View Sensor History' }</Button>\n                        {\n                                toggleView\n                                ?\n                                    <Row>\n                                        <Col lg='12'md=\"12\" sm=\"12\">\n                                            {/* <PaginateHistory nPages={nPages} currentPage={currentPage} setCurrentPage={setCurrentPage} /> */}\n                                            <div className='d-flex justify-content-end'>\n                                                <DownloadTableExcel\n                                                    filename=\"history table\"\n                                                    sheet=\"history\"\n                                                    currentTableRef={table.current}\n                                                >\n                                                <Button theme=\"info\" ><i className='material-icons'>&#xf090;</i></Button>\n\n                                                </DownloadTableExcel>\n                                                <Button className=\"mx-2\" onClick={() => setToggle(!toggle)}>{toggle ? \"View Chart\"  : \"View Table\"}</Button>\n\n                                            </div>\n                                            <div id=\"table-wrapper\" className={`${toggle ? '' : 'd-none'}`}>\n                                                <div id=\"table-scroll\">\n                                                    <table ref={table} className=\"table mb-4 table-hover table-bordered  tabel-responsive-lg \" style={{overflowX : \"scroll\"}}>\n                                        <thead className=\"bg-light text-center\">\n                                            <tr>\n                                                <th scope=\"col\" className=\"border-0\">{t('Date')}(GMT)</th>\n                                                <th scope=\"col\" className=\"border-0\">{t('Temp.')} (°C)</th>\n                                                <th scope=\"col\" className=\"border-0\">{t('Humidity')} (%)</th>\n                                                <th scope=\"col\" className=\"border-0\">{t('Pressure')} (hPa)</th>\n                                                <th scope=\"col\" className=\"border-0\">{t('Altitude')} (M)</th>\n                                                <th scope=\"col\" className=\"border-0\">{t('Temp.')} (°C)</th>\n                                                <th scope=\"col\" className=\"border-0\">{t('Humidity 1')} (%)</th>\n                                                <th scope=\"col\" className=\"border-0\">{t('Humidity 2')} (%)</th>\n                                                <th scope=\"col\" className=\"border-0\">{t('Humidity 3')} (%)</th>\n                                                {/* <th scope=\"col\" className=\"border-0\">{t('Humidity Niveau 1')} (%)</th>\n                                                <th scope=\"col\" className=\"border-0\">{t('Humidity Niveau 2')} (%)</th>\n                                                <th scope=\"col\" className=\"border-0\">{t('Humidity Niveaur 3')} (%)</th> */}\n                                                <th scope=\"col\" className=\"border-0\">{t('Charge')}</th>    \n                                                <th scope=\"col\" className=\"border-0\">{t('Voltage adc')}</th>                                                                    \n                                                <th scope=\"col\" className=\"border-0\">{t('ET0')}</th>                                    \n                                            </tr>\n                                        </thead>\n                                            <tbody>\n                                                        {\n                                                        filteredHistory && filteredHistory.map(sensorData=>{\n                                                            let date = sensorData.time.slice(0,10)\n                                                            let dailyET0 = \"\" \n                                                            let lat = \"\"\n                                                            let lon = \"\"\n                                                            dataET0.map(value=>{\n                                                                if(value.date == date){\n                                                                    dailyET0 = value.ET0\n                                                                    \n                                                                }\n                                                            })\n                                                            let press = Number(sensorData.pressure) / 1000\n                                                            let subSoilTemp = \"-\"\n                                                            if(sensorData.ts !== \"-127.000\"){\n                                                                subSoilTemp = sensorData.ts\n                                                            }\n                                                            return(\n                                                                    <tr>\n                                                                        <td>{sensorData.time} </td>\n                                                                        {/* <td>{coords.latitude}</td>\n                                                                        <td>{coords.longitude}</td> */}\n                                                                        <td>{sensorData.temperature}</td>\n                                                                        <td>{sensorData.humidity}</td>\n                                                                        <td>{parseFloat(press).toFixed(2)}</td>\n                                                                        <td>{sensorData.altitude}</td>\n                                                                        <td className='text-center'>{subSoilTemp}</td>\n                                                                        <td>{sensorData.mv1}</td>\n                                                                        <td>{sensorData.mv2}</td>\n                                                                        <td>{sensorData.mv3}</td>\n                                                                        <td>{Number(sensorData.charge) * 100}</td>\n                                                                        <td>{Number(sensorData.adc) * -1}</td>\n\n                                                                        <td>{dailyET0}</td>\n                                                                    </tr>\n                                                                    \n                                                                    )\n                                                                })\n                                                            }\n\n                                            </tbody>\n                                                    </table>\n                                                        \n                                                \n                                                </div>\n\n                                            </div>\n                                        </Col>\n                                        <Col className={`${toggle ? 'd-none' : ''}`} lg=\"12\" md=\"8\" sm=\"8\">\n                                                <SensorHistoryChart data={filteredHistory} />\n                                            </Col>\n                                    </Row>\n                                :\n                                    <Row>\n                                        <Col lg='12'md=\"12\" sm=\"12\">\n                                            {/* <PaginateHistory nPages={nPages} currentPage={currentPage} setCurrentPage={setCurrentPage} /> */}\n                                            <div className='d-flex justify-content-end'>\n                                                <DownloadTableExcel\n                                                    filename=\"history table\"\n                                                    sheet=\"history\"\n                                                    currentTableRef={table.current}\n                                                >\n                                                <Button theme=\"info\" ><i className='material-icons'>&#xf090;</i></Button>\n\n                                                </DownloadTableExcel>\n                                                <Button className=\"mx-2\" onClick={() => setToggle(!toggle)}>{toggle ? \"View Chart\"  : \"View Table\"}</Button>\n\n                                            </div>\n                                            <div id=\"table-wrapper\" className={`${toggle ? '' : 'd-none'}`}>\n                                                <h5 className='text-center'>Week Solar Radiation</h5>\n                                                <div id=\"table-scroll\">\n                                                    <table ref={table} className=\"table mb-4 table-hover table-bordered  tabel-responsive-lg \" style={{overflowX : \"scroll\"}}>\n                                        <thead className=\"bg-light text-center\">\n                                            <tr>\n                                                <th scope=\"col\" className=\"border-0\">{t('Date')}</th>\n                                                <th scope=\"col\" className=\"border-0\">{t('Solar Radiation')}</th>\n                                                                    \n\n                                            </tr>\n                                        </thead>\n                                            <tbody>\n                                                        {\n                                                    radData && radData.map(data=>{\n                                                        let date = moment(data.date).locale('en-EN').format(\"ddd, h a\")\n                                                            return(\n                                                                    <tr>\n                                                                        <td>{date}</td>\n                                                                        <td>{data.value}</td>\n\n\n                                                                    </tr>\n                                                                    \n                                                                    )\n                                                                })\n                                                            }\n\n                                            </tbody>\n                                                    </table>\n                                                        \n                                                \n                                                </div>\n\n                                            </div> \n                                        </Col>\n                                        <Col className={`${toggle ? 'd-none' : ''}`} lg=\"12\" md=\"8\" sm=\"8\">\n                                                <SolarRadiationChart data={radData} />\n                                            </Col>\n                                \n                                    </Row>\n                        }\n                    </CardBody>\n                </Card>\n\n            </Col>\n        </Row>\n    </Container>\n  )\n}\n\nexport default SensorHistory"],"mappings":"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"},"metadata":{},"sourceType":"module"}