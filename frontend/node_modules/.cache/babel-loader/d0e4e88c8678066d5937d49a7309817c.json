{"ast":null,"code":"import _regeneratorRuntime from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/var/www/prod/smartfarm/backoffice/frontend/src/components/layout/MainNavbar/NavbarNav/Notifications.js\";\nimport React from \"react\";\nimport { NavItem, NavLink, Badge, Collapse, DropdownItem, Modal, ModalHeader, ModalBody } from \"shards-react\";\nimport api from '../../../../api/api';\nimport { Link } from \"react-router-dom\";\nimport { withRouter } from \"react-router-dom\";\n\nvar Notifications = /*#__PURE__*/function (_React$Component) {\n  _inherits(Notifications, _React$Component);\n\n  function Notifications(props) {\n    var _this;\n\n    _classCallCheck(this, Notifications);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Notifications).call(this, props));\n\n    _this.componentDidMount = function () {\n      _this.getNotifications();\n\n      setInterval(function () {\n        _this.getNotifications();\n      }, 60000);\n    };\n\n    _this.getNotifications = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return api.get('/notification/notifications').then(function (response) {\n                var notifs = response.data.notifications;\n\n                _this.setState({\n                  notifs: notifs\n                });\n\n                _this.setState({\n                  notifList: notifs.length\n                });\n              }).catch(function (err) {\n                console.log(err);\n              });\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    _this.markAsRead = function (itemUid) {\n      var notification_uid = itemUid;\n      api.post('/notification/viewed', {\n        notification_uid: notification_uid\n      }).then(function (response) {\n        _this.getNotifications();\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    _this.IconByType = function (type) {\n      switch (type) {\n        case 'Warning':\n          return /*#__PURE__*/React.createElement(\"i\", {\n            className: \"material-icons\",\n            __self: _assertThisInitialized(_assertThisInitialized(_this)),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 17\n            }\n          }, \"\\uE002\");\n\n        case 'Info':\n          return /*#__PURE__*/React.createElement(\"i\", {\n            className: \"material-icons\",\n            __self: _assertThisInitialized(_assertThisInitialized(_this)),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 19\n            }\n          }, \"\\uE645\");\n\n        case 'Success':\n          return /*#__PURE__*/React.createElement(\"i\", {\n            className: \"material-icons\",\n            __self: _assertThisInitialized(_assertThisInitialized(_this)),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 21\n            }\n          }, \"\\uE031\");\n\n        default:\n          break;\n      }\n    };\n\n    _this.goToAllNotifs = function () {\n      _this.props.history.push('/notifications');\n\n      window.location.reload();\n    };\n\n    _this.state = {\n      visible: false,\n      toggle: false,\n      notifs: [],\n      notifList: null\n    };\n    _this.toggleNotifications = _this.toggleNotifications.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Notifications, [{\n    key: \"toggleNotifications\",\n    value: function toggleNotifications() {\n      this.setState({\n        visible: !this.state.visible\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(NavItem, {\n        className: \"border-right dropdown notifications\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(NavLink, {\n        className: \"nav-link-icon text-center\",\n        onClick: this.toggleNotifications,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"nav-link-icon__wrapper\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"material-icons\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 15\n        }\n      }, \"\\uE7F4\"), this.state.notifList > 0 ? /*#__PURE__*/React.createElement(Badge, {\n        pill: true,\n        theme: \"danger\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 15\n        }\n      }, this.state.notifList) : null)), /*#__PURE__*/React.createElement(Collapse, {\n        open: this.state.visible,\n        className: \"dropdown-menu dropdown-menu-small\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }\n      }, this.state.notifs.map(function (notif) {\n        return /*#__PURE__*/React.createElement(Link, {\n          onClick: function onClick() {\n            return _this2.goToAllNotifs();\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(DropdownItem, {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \" notification__icon-wrapper\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"notification__icon\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 23\n          }\n        }, _this2.IconByType(notif.type))), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"notification__content\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          className: \"notification__category\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 23\n          }\n        }, notif.object), /*#__PURE__*/React.createElement(\"p\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 23\n          }\n        }, notif.description))));\n      }), /*#__PURE__*/React.createElement(Link, {\n        onClick: function onClick() {\n          return _this2.goToAllNotifs();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(DropdownItem, {\n        className: \"notification__all text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }\n      }, \"View all Notifications\")))));\n    }\n  }]);\n\n  return Notifications;\n}(React.Component);\n\nexport default withRouter(Notifications);","map":{"version":3,"names":["React","NavItem","NavLink","Badge","Collapse","DropdownItem","Modal","ModalHeader","ModalBody","api","Link","withRouter","Notifications","props","componentDidMount","getNotifications","setInterval","get","then","response","notifs","data","notifications","setState","notifList","length","catch","err","console","log","markAsRead","itemUid","notification_uid","post","IconByType","type","goToAllNotifs","history","push","window","location","reload","state","visible","toggle","toggleNotifications","bind","map","notif","object","description","Component"],"sources":["/var/www/prod/smartfarm/backoffice/frontend/src/components/layout/MainNavbar/NavbarNav/Notifications.js"],"sourcesContent":["import React from \"react\";\nimport { NavItem, NavLink, Badge, Collapse, DropdownItem,Modal,ModalHeader,ModalBody } from \"shards-react\";\nimport api from '../../../../api/api'\nimport { Link } from \"react-router-dom\";\nimport { withRouter } from \"react-router-dom\";\n\nclass Notifications extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      visible: false,\n      toggle :false,\n      notifs : [],\n      notifList : null\n    };\n\n    this.toggleNotifications = this.toggleNotifications.bind(this);\n  }\n\n  toggleNotifications() {\n    this.setState({\n      visible: !this.state.visible\n    });\n  }\n\n  componentDidMount = ()=>{\n    this.getNotifications()\n    setInterval(()=>{this.getNotifications()},60000)\n  }\n\n  getNotifications = async() => {\n    await api.get('/notification/notifications')\n    .then(response=>{\n      let notifs = response.data.notifications;\n      this.setState({notifs : notifs})\n      this.setState({notifList : notifs.length})\n\n    }).catch(err=>{\n      console.log(err)\n    })\n  }\n\n  markAsRead = (itemUid) =>{\n    let notification_uid = itemUid\n\n    api.post('/notification/viewed',{notification_uid})\n    .then(response=>{\n        this.getNotifications()\n    }).catch(err=>{\n        console.log(err)\n    })\n}\n\n\nIconByType = (type) =>{\n  switch (type) {\n    case 'Warning':\n        return  <i className=\"material-icons\">&#xe002;</i>\n        case 'Info':\n          return  <i className=\"material-icons\">&#xe645;</i>\n          case 'Success':\n            return  <i className=\"material-icons\">&#xE031;</i>\n    default:\n      break;\n  }\n}\n\ngoToAllNotifs = () => {\n  this.props.history.push('/notifications')\n  window.location.reload()\n}\n  \n  render() {\n    return (\n      <>\n        <NavItem className=\"border-right dropdown notifications\">\n          <NavLink\n            className=\"nav-link-icon text-center\"\n            onClick={this.toggleNotifications}\n          >\n            <div className=\"nav-link-icon__wrapper\">\n              <i className=\"material-icons\">&#xE7F4;</i>\n            {\n              this.state.notifList > 0\n              ?\n              <Badge pill theme=\"danger\">\n                {this.state.notifList}\n              </Badge>\n              :\n              null\n            }\n            </div>\n          </NavLink>\n          <Collapse\n            open={this.state.visible}\n            className=\"dropdown-menu dropdown-menu-small\"\n          >\n            {\n              this.state.notifs.map(notif=>{\n                return(\n                  <Link onClick={() => this.goToAllNotifs()}> \n\n                  <DropdownItem >\n                    <div className=\" notification__icon-wrapper\">\n                      <div className=\"notification__icon\">\n                        {this.IconByType(notif.type)}\n                      </div>\n                    </div>\n                    <div  className=\"notification__content\">\n                      <span className=\"notification__category\">{notif.object}</span>\n                      <p>\n                        {notif.description}\n                      </p>\n                    </div>\n                  </DropdownItem>\n                  </Link> \n\n                )\n              })\n            }\n              <Link onClick={() => this.goToAllNotifs()}> \n            <DropdownItem className=\"notification__all text-center\">\n              View all Notifications\n            </DropdownItem>\n              </Link> \n          </Collapse>\n        </NavItem>\n      </>\n    );\n  }\n}\n\nexport default  withRouter(Notifications)"],"mappings":"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"},"metadata":{},"sourceType":"module"}