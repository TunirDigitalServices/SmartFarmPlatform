{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\HP\\\\Desktop\\\\SmartFarm app\\\\backoffice\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\HP\\\\Desktop\\\\SmartFarm app\\\\backoffice\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\HP\\\\Desktop\\\\SmartFarm app\\\\backoffice\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\SmartFarm app\\\\backoffice\\\\frontend\\\\src\\\\views\\\\SatelliteImages.js\";\n\nimport React, { useState, useEffect } from 'react';\nimport { Container, Row, Col, CardBody, CardHeader, Card, Dropdown, DropdownToggle, DropdownMenu, DropdownItem, Tooltip, FormInput, FormSelect, FormGroup, Form } from \"shards-react\";\nimport PageTitle from \"../components/common/PageTitle\";\nimport { useTranslation } from \"react-i18next\";\nimport LeafletMap from './map';\nimport { Line } from 'react-chartjs-2';\nimport SatteliteMap from './SatteliteMap';\nimport moment from 'moment';\nimport api from '../api/api';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport { Box, LinearProgress } from '@mui/material';\nimport Button from '@mui/material/Button';\nimport SatelliteAltIcon from '@mui/icons-material/SatelliteAlt';\nimport ListAltIcon from '@mui/icons-material/ListAlt';\nimport Calendar from 'react-calendar';\nimport 'react-calendar/dist/Calendar.css';\n\nvar SatelliteImages = function SatelliteImages() {\n  var _useState = useState({\n    Latitude: \"\",\n    Longitude: \"\",\n    zoom: \"\",\n    center: [],\n    fromAction: false\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      coords = _useState2[0],\n      setCoords = _useState2[1];\n\n  var _useState3 = useState({\n    zoom: \"\",\n    center: [],\n    fromAction: false,\n    draw: {\n      polygon: false,\n      circle: false,\n      rectangle: false,\n      polyline: false,\n      marker: false,\n      circlemarker: false\n    }\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      mapConfig = _useState4[0],\n      setMapConfig = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      dates = _useState6[0],\n      setDates = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      fields = _useState8[0],\n      setFields = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      farms = _useState10[0],\n      setFarms = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      selectedField = _useState12[0],\n      setSelectedField = _useState12[1];\n\n  var _useState13 = useState([]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      satellitesImages = _useState14[0],\n      setSatellitesImages = _useState14[1];\n\n  var _useState15 = useState([]),\n      _useState16 = _slicedToArray(_useState15, 2),\n      selectedImages = _useState16[0],\n      setSelectedImages = _useState16[1];\n\n  var _useState17 = useState([]),\n      _useState18 = _slicedToArray(_useState17, 2),\n      dataDisplayed = _useState18[0],\n      setDataDisplayed = _useState18[1];\n\n  var _useState19 = useState([]),\n      _useState20 = _slicedToArray(_useState19, 2),\n      polygonDisplayed = _useState20[0],\n      setPolygonDisplayed = _useState20[1];\n\n  var _useState21 = useState(moment().format('D MMM YYYY')),\n      _useState22 = _slicedToArray(_useState21, 2),\n      selectedDate = _useState22[0],\n      setSelectedDate = _useState22[1];\n\n  var getSatelliteImages = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var fieldId, apiUrl;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              try {\n                fieldId = selectedField[0].Id;\n                apiUrl = \"/field/get-sattelite-images/\".concat(fieldId);\n                api.get(apiUrl).then(function (response) {\n                  var fetchedData = response.data.imagesData;\n                  setSatellitesImages(fetchedData);\n                }).catch(function (error) {\n                  console.error('API error:', error);\n                });\n              } catch (error) {\n                console.error('API error:', error);\n              }\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getSatelliteImages() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    var getDataFields = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return api.get('/field/fields').then(function (res) {\n                  var newData = res.data.farms;\n                  setFarms(newData);\n                  var Fields = [];\n                  newData.map(function (item) {\n                    var fields = item.fields;\n\n                    if (fields) {\n                      fields.map(function (itemfield) {\n                        Fields.push({\n                          title: itemfield.name,\n                          status: itemfield.status,\n                          description: itemfield.description,\n                          Uid: itemfield.uid,\n                          farm_id: itemfield.farm_id,\n                          Latitude: itemfield.Latitude,\n                          Longitude: itemfield.Longitude,\n                          coordinates: itemfield.coordinates,\n                          Id: itemfield.id\n                        });\n                      });\n                    }\n                  });\n                  setFields(Fields);\n                });\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function getDataFields() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    getDataFields();\n  }, []);\n  useEffect(function () {\n    if (selectedField.length > 0) {\n      getSatelliteImages();\n    }\n  }, [selectedField]);\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t,\n      i18n = _useTranslation.i18n;\n\n  useEffect(function () {\n    // Generate an array of dates for the next 7 days\n    var next7Days = Array.from({\n      length: 6\n    }, function (_, index) {\n      return moment().subtract(index, 'days').format('D MMM YYYY');\n    });\n    var ascendingDates = next7Days.reverse();\n    setDates(ascendingDates);\n  }, []);\n\n  var formatDate = function formatDate(dateString) {\n    // Parse the input date string using Moment.js\n    var parsedDate = moment(dateString, 'D MMM YYYY'); // Format the date in the desired format (YYYY-MM-DD)\n\n    var formattedDate = parsedDate.format('YYYY-MM-DD');\n    return formattedDate;\n  };\n\n  var handleDateClick = function handleDateClick(date) {\n    setSelectedDate(date);\n    var filteredData = satellitesImages.filter(function (data) {\n      return moment(data.created_at).format('D MMM YYYY') === date && data.field_id === selectedField[0].Id;\n    });\n    setSelectedImages(filteredData);\n    var formattedDate = formatDate(date);\n    var currentDate = moment();\n    var twoDaysAgo = moment().subtract(1, 'days');\n\n    if (moment(formattedDate).isBefore(twoDaysAgo, 'day')) {\n      try {\n        var fieldId = selectedField[0].Id;\n        var userId = JSON.parse(localStorage.getItem('user')).id;\n        var apiUrl = \"/satellite-images/\".concat(userId, \"/\").concat(fieldId, \"/\").concat(formattedDate);\n        api.get(apiUrl).then(function (response) {\n          var fetchedData = response.data.imagesData;\n          console.log(fetchedData);\n        }).catch(function (error) {\n          console.error('API error:', error);\n        });\n      } catch (error) {\n        console.error('API error:', error);\n      }\n    } else {\n      console.log('Formatted date is not before 1 days ago.');\n    }\n  };\n\n  var getSelectedField = function getSelectedField(e) {\n    var selectedId = e.target.value;\n    var selected = fields && fields.filter(function (field) {\n      return field.Id == selectedId;\n    });\n    setSelectedField(selected);\n  };\n\n  useEffect(function () {\n    var filtredData = satellitesImages.filter(function (data) {\n      return moment(data.created_at).format('D MMM YYYY') === selectedDate && data.field_id === selectedField[0].Id;\n    });\n    setSelectedImages(filtredData);\n  }, [selectedDate, selectedField]);\n\n  var handleClick = function handleClick(data) {\n    if (data) {\n      setDataDisplayed(data.data);\n      setPolygonDisplayed(data.polygon);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    fluid: true,\n    className: \"main-content-container px-3 pb-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"page-header py-2 mb-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(PageTitle, {\n    subtitle: t('overview'),\n    title: t('Satellite Images'),\n    className: \" mb-1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Container, {\n    className: \"main-content-container p-3 border bg-light rounded\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: \"8\",\n    md: \"12\",\n    sm: \"12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"pt-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: \"8\",\n    md: \"12\",\n    sm: \"12\",\n    className: \"d-md-block d-lg-none\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: \"mt-0\",\n    style: {\n      height: \"100%\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CardHeader, {\n    className: \"border-bottom\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FormSelect, {\n    value: selectedField,\n    onChange: getSelectedField,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 15\n    }\n  }, t('select_field')), fields.map(function (field) {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: field.Id,\n      value: field.Id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 21\n      }\n    }, field.title);\n  }))))), /*#__PURE__*/React.createElement(Col, {\n    lg: \"12\",\n    md: \"12\",\n    sm: \"12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(SatteliteMap, {\n    farms: farms,\n    data: selectedField,\n    satellitesImages: selectedImages,\n    selectedData: dataDisplayed,\n    drawn: polygonDisplayed,\n    draw: mapConfig.draw,\n    edit: mapConfig.edit,\n    zoom: coords.zoom,\n    center: coords.center,\n    fromAction: coords.fromAction,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 17\n    }\n  })))), /*#__PURE__*/React.createElement(Col, {\n    lg: \"4\",\n    md: \"12\",\n    sm: \"12\",\n    className: \"my-2 d-none d-lg-block\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: \"mt-0\",\n    style: {\n      height: \"100%\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 13\n    }\n  }, fields.length === 0 ? /*#__PURE__*/React.createElement(LinearProgress, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 17\n    }\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(CardHeader, {\n    className: \"border-bottom\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(FormSelect, {\n    value: selectedField,\n    onChange: getSelectedField,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 23\n    }\n  }, t('select_field')), fields.map(function (field) {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: field.Id,\n      value: field.Id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 29\n      }\n    }, field.title);\n  }))), /*#__PURE__*/React.createElement(CardBody, {\n    className: \"p-1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 19\n    }\n  }, selectedField.length > 0 && selectedField.map(function (field) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Row, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      lg: \"12\",\n      md: \"12\",\n      sm: \"12\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      style: {\n        fontSize: 14,\n        textAlign: \"center\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 33\n      }\n    }, t('lat'), \" \", /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        fontWeight: 'bold',\n        textAlign: \"center\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 94\n      }\n    }, field.Latitude))), /*#__PURE__*/React.createElement(Col, {\n      lg: \"12\",\n      md: \"12\",\n      sm: \"12\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      style: {\n        fontSize: 14,\n        textAlign: \"center\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 33\n      }\n    }, t('lon'), \" \", /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        fontWeight: 'bold',\n        textAlign: \"center\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 94\n      }\n    }, field.Longitude)))), /*#__PURE__*/React.createElement(Row, {\n      className: \"border-bottom\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      lg: \"12\",\n      md: \"12\",\n      sm: \"12\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(\"h6\", {\n      style: {\n        fontSize: 14,\n        textAlign: \"center\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 33\n      }\n    }, t('name_field'), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 101\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        fontWeight: 'bold',\n        textAlign: \"center\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 108\n      }\n    }, field.title)))));\n  }), selectedField.length === 0 && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      color: '#bebebe',\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      flexDirection: 'column',\n      padding: '10px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: '#bebebe',\n      textAlign: \"center\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 26\n    }\n  }, t('message_image')), /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-satellite\",\n    style: {\n      fontSize: \"40px\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 26\n    }\n  })), /*#__PURE__*/React.createElement(Row, {\n    className: \"my-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: \"12\",\n    md: \"12\",\n    sm: \"12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 23\n    }\n  }, selectedField.length > 0 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h5\", {\n    style: {\n      fontSize: 14,\n      textAlign: \"center\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 29\n    }\n  }, \" Satellite Images List\"), /*#__PURE__*/React.createElement(Calendar, {\n    onChange: function onChange(date) {\n      return handleDateClick(moment(date).format('D MMM YYYY'));\n    },\n    value: selectedDate ? new Date(moment(selectedDate, 'D MMM YYYY')) : null,\n    locale: localStorage.getItem('local') ? \"\".concat(localStorage.getItem('local'), \"-\").concat(localStorage.getItem('local').toUpperCase()) : 'en-EN',\n    tileContent: function tileContent(_ref3) {\n      var date = _ref3.date,\n          view = _ref3.view;\n      var formattedDate = moment(date).format('D MMM YYYY');\n      var hasSatelliteImages = satellitesImages.some(function (data) {\n        return moment(data.created_at).format('D MMM YYYY') === formattedDate;\n      });\n      return view === 'month' && hasSatelliteImages ? /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          fontWeight: 'bold',\n          color: '#29B2C4'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 35\n        }\n      }, \"\\u2022\") : null;\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 29\n    }\n  })))))))))));\n};\n\nexport default SatelliteImages;","map":{"version":3,"names":["React","useState","useEffect","Container","Row","Col","CardBody","CardHeader","Card","Dropdown","DropdownToggle","DropdownMenu","DropdownItem","Tooltip","FormInput","FormSelect","FormGroup","Form","PageTitle","useTranslation","LeafletMap","Line","SatteliteMap","moment","api","CircularProgress","Box","LinearProgress","Button","SatelliteAltIcon","ListAltIcon","Calendar","SatelliteImages","Latitude","Longitude","zoom","center","fromAction","coords","setCoords","draw","polygon","circle","rectangle","polyline","marker","circlemarker","mapConfig","setMapConfig","dates","setDates","fields","setFields","farms","setFarms","selectedField","setSelectedField","satellitesImages","setSatellitesImages","selectedImages","setSelectedImages","dataDisplayed","setDataDisplayed","polygonDisplayed","setPolygonDisplayed","format","selectedDate","setSelectedDate","getSatelliteImages","fieldId","Id","apiUrl","get","then","response","fetchedData","data","imagesData","catch","error","console","getDataFields","res","newData","Fields","map","item","itemfield","push","title","name","status","description","Uid","uid","farm_id","coordinates","id","length","t","i18n","next7Days","Array","from","_","index","subtract","ascendingDates","reverse","formatDate","dateString","parsedDate","formattedDate","handleDateClick","date","filteredData","filter","created_at","field_id","currentDate","twoDaysAgo","isBefore","userId","JSON","parse","localStorage","getItem","log","getSelectedField","e","selectedId","target","value","selected","field","filtredData","handleClick","height","edit","fontSize","textAlign","fontWeight","color","display","justifyContent","alignItems","flexDirection","padding","Date","toUpperCase","view","hasSatelliteImages","some"],"sources":["C:/Users/HP/Desktop/SmartFarm app/backoffice/frontend/src/views/SatelliteImages.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { Container, Row, Col, CardBody, CardHeader, Card, Dropdown, DropdownToggle, DropdownMenu, DropdownItem, Tooltip, FormInput, FormSelect, FormGroup, Form } from \"shards-react\";\r\nimport PageTitle from \"../components/common/PageTitle\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport LeafletMap from './map';\r\nimport { Line } from 'react-chartjs-2';\r\nimport SatteliteMap from './SatteliteMap';\r\nimport moment from 'moment';\r\nimport api from '../api/api';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport { Box, LinearProgress } from '@mui/material';\r\nimport Button from '@mui/material/Button';\r\nimport SatelliteAltIcon from '@mui/icons-material/SatelliteAlt';\r\nimport ListAltIcon from '@mui/icons-material/ListAlt';\r\nimport Calendar from 'react-calendar';\r\nimport 'react-calendar/dist/Calendar.css';\r\n\r\nconst SatelliteImages = () => {\r\n  const [coords, setCoords] = useState({\r\n    Latitude: \"\",\r\n    Longitude: \"\",\r\n    zoom: \"\",\r\n    center: [],\r\n    fromAction: false\r\n  })\r\n  const [mapConfig, setMapConfig] = useState({\r\n    zoom: \"\",\r\n    center: [],\r\n    fromAction: false,\r\n    draw: {\r\n      polygon: false,\r\n      circle: false,\r\n      rectangle: false,\r\n      polyline: false,\r\n      marker: false,\r\n      circlemarker: false,\r\n    }\r\n  })\r\n  const [dates, setDates] = useState([]);\r\n  const [fields, setFields] = useState([])\r\n  const [farms, setFarms] = useState([])\r\n  const [selectedField, setSelectedField] = useState([])\r\n  const [satellitesImages, setSatellitesImages] = useState([])\r\n  const [selectedImages, setSelectedImages] = useState([])\r\n  const [dataDisplayed, setDataDisplayed] = useState([])\r\n  const [polygonDisplayed, setPolygonDisplayed] = useState([])\r\n\r\n  const [selectedDate, setSelectedDate] = useState(moment().format('D MMM YYYY'));\r\n\r\n  const getSatelliteImages = async () => {\r\n    try {\r\n        const fieldId = selectedField[0].Id\r\n        const apiUrl = `/field/get-sattelite-images/${fieldId}`\r\n        api.get(apiUrl)\r\n          .then((response) => {\r\n            const fetchedData = response.data.imagesData\r\n            setSatellitesImages(fetchedData)\r\n          })\r\n          .catch((error) => {\r\n            console.error('API error:', error);\r\n          })\r\n      \r\n    } catch (error) {\r\n      console.error('API error:', error);\r\n\r\n    }\r\n\r\n  }\r\n  useEffect(() => {\r\n    const getDataFields = async () => {\r\n      await api.get('/field/fields').then(res => {\r\n        const newData = res.data.farms;\r\n        setFarms(newData)\r\n        let Fields = [];\r\n        newData.map(item => {\r\n          let fields = item.fields\r\n          if (fields) {\r\n            fields.map(itemfield => {\r\n              Fields.push({\r\n                title: itemfield.name,\r\n                status: itemfield.status,\r\n                description: itemfield.description,\r\n                Uid: itemfield.uid,\r\n                farm_id: itemfield.farm_id,\r\n                Latitude: itemfield.Latitude,\r\n                Longitude: itemfield.Longitude,\r\n                coordinates: itemfield.coordinates,\r\n                Id: itemfield.id\r\n              });\r\n            })\r\n          }\r\n        });\r\n        setFields(Fields)\r\n\r\n      })\r\n    }\r\n    getDataFields()\r\n  }, [])\r\n\r\n\r\n  useEffect(() => {\r\n    if(selectedField.length > 0){\r\n      getSatelliteImages()\r\n\r\n    }\r\n  }, [selectedField])\r\n\r\n  const { t, i18n } = useTranslation();\r\n\r\n  useEffect(() => {\r\n    // Generate an array of dates for the next 7 days\r\n    const next7Days = Array.from({ length: 6 }, (_, index) =>\r\n      moment().subtract(index, 'days').format('D MMM YYYY')\r\n    );\r\n\r\n    const ascendingDates = next7Days.reverse();\r\n\r\n    setDates(ascendingDates);\r\n  }, []);\r\n\r\n  const formatDate = (dateString) => {\r\n    // Parse the input date string using Moment.js\r\n    const parsedDate = moment(dateString, 'D MMM YYYY');\r\n    \r\n    // Format the date in the desired format (YYYY-MM-DD)\r\n    const formattedDate = parsedDate.format('YYYY-MM-DD');\r\n    \r\n    return formattedDate;\r\n  };\r\n\r\n  const handleDateClick = (date) => {\r\n    setSelectedDate(date);\r\n    const filteredData = satellitesImages.filter(data => moment(data.created_at).format('D MMM YYYY') === date && data.field_id === selectedField[0].Id);\r\n    setSelectedImages(filteredData);\r\n    const formattedDate = formatDate(date);\r\n    const currentDate = moment();\r\n    const twoDaysAgo = moment().subtract(1, 'days');\r\n  \r\n    if (moment(formattedDate).isBefore(twoDaysAgo, 'day')) {\r\n      try {\r\n        const fieldId = selectedField[0].Id\r\n        const userId = JSON.parse(localStorage.getItem('user')).id\r\n        const apiUrl = `/satellite-images/${userId}/${fieldId}/${formattedDate}`\r\n        api.get(apiUrl)\r\n          .then((response) => {\r\n            const fetchedData = response.data.imagesData\r\n            console.log(fetchedData)\r\n          })\r\n          .catch((error) => {\r\n            console.error('API error:', error);\r\n          })\r\n      \r\n    } catch (error) {\r\n      console.error('API error:', error);\r\n\r\n    }\r\n  \r\n    } else {\r\n      console.log('Formatted date is not before 1 days ago.');\r\n    }\r\n  };\r\n  const getSelectedField = (e) => {\r\n    const selectedId = e.target.value;\r\n    const selected = fields && fields.filter(field => (\r\n      field.Id == selectedId\r\n    ))\r\n    setSelectedField(selected)\r\n  }\r\n\r\n  useEffect(() => {\r\n\r\n    const filtredData = satellitesImages.filter(data => {\r\n      return moment(data.created_at).format('D MMM YYYY') === selectedDate && data.field_id === selectedField[0].Id\r\n\r\n    })\r\n    setSelectedImages(filtredData)\r\n\r\n  }, [selectedDate, selectedField])\r\n\r\n  const handleClick = (data) => {\r\n    if (data) {\r\n      setDataDisplayed(data.data)\r\n      setPolygonDisplayed(data.polygon)\r\n    }\r\n  }\r\n\r\n  \r\n\r\n\r\n  return (\r\n    <Container fluid className=\"main-content-container px-3 pb-2\">\r\n      <Row className=\"page-header py-2 mb-4\">\r\n        <PageTitle subtitle={t('overview')} title={t('Satellite Images')} className=\" mb-1\" />\r\n      </Row>\r\n\r\n      <Container className=\"main-content-container p-3 border bg-light rounded\">\r\n        <Row>\r\n          <Col lg='8' md=\"12\" sm=\"12\">\r\n            <Row className=\"pt-4\">\r\n            <Col lg='8' md=\"12\" sm=\"12\" className=\"d-md-block d-lg-none\">\r\n        {/* Select input on mobile view */}\r\n        <Card className=\"mt-0\" style={{ height: \"100%\" }}>\r\n          <CardHeader className=\"border-bottom\">\r\n            <FormSelect value={selectedField} onChange={getSelectedField}>\r\n              <option value=\"\">{t('select_field')}</option>\r\n              {\r\n                fields.map(field => {\r\n                  return (\r\n                    <option key={field.Id} value={field.Id}>{field.title}</option>\r\n\r\n                  )\r\n                })\r\n              }\r\n            </FormSelect>\r\n          </CardHeader>\r\n        </Card>\r\n      </Col>\r\n              <Col lg='12' md=\"12\" sm=\"12\">\r\n                <SatteliteMap farms={farms} data={selectedField} satellitesImages={selectedImages} selectedData={dataDisplayed} drawn={polygonDisplayed} draw={mapConfig.draw} edit={mapConfig.edit} zoom={coords.zoom} center={coords.center} fromAction={coords.fromAction} />\r\n              </Col>\r\n            </Row>\r\n          </Col>\r\n\r\n          <Col lg='4' md=\"12\" sm=\"12\" className='my-2 d-none d-lg-block'>\r\n            <Card className=\"mt-0\" style={{ height: \"100%\" }}>\r\n              {fields.length === 0\r\n\r\n                ?\r\n\r\n                <LinearProgress />\r\n\r\n                :\r\n                <>\r\n                  <CardHeader className=\"border-bottom\" >\r\n                    <FormSelect value={selectedField} onChange={getSelectedField}>\r\n                      <option value=\"\">{t('select_field')}</option>\r\n                      {\r\n                        fields.map(field => {\r\n                          return (\r\n                            <option key={field.Id} value={field.Id}>{field.title}</option>\r\n\r\n                          )\r\n                        })\r\n                      }\r\n                    </FormSelect>\r\n                  </CardHeader>\r\n                  <CardBody className=\"p-1\">\r\n                    {\r\n                      selectedField.length > 0 && selectedField.map(field => {\r\n                        return (\r\n                          <>\r\n                            <Row>\r\n                              <Col  lg='12' md=\"12\" sm=\"12\">\r\n                                <h5 style={{ fontSize: 14, textAlign: \"center\" }}>{t('lat')} <span style={{ fontWeight: 'bold', textAlign: \"center\" }}>{field.Latitude}</span></h5>\r\n                              </Col>\r\n                              <Col  lg='12' md=\"12\" sm=\"12\">\r\n                                <h5 style={{ fontSize: 14, textAlign: \"center\" }}>{t('lon')} <span style={{ fontWeight: 'bold', textAlign: \"center\" }}>{field.Longitude}</span></h5>\r\n                              </Col>\r\n                            </Row>\r\n                            <Row className=\"border-bottom\">\r\n                              <Col  lg='12' md=\"12\" sm=\"12\">\r\n                                <h6 style={{ fontSize: 14, textAlign: \"center\" }}>{t('name_field')} <br /> <span style={{fontWeight: 'bold', textAlign: \"center\" }}>{field.title}</span></h6>\r\n                              </Col>\r\n\r\n                            </Row>\r\n\r\n                          </>\r\n\r\n                        )\r\n                      })\r\n                    }\r\n                    {\r\n                      selectedField.length === 0 && (\r\n                        <div style={{ color: '#bebebe',display:'flex',justifyContent: 'center',alignItems:'center',flexDirection:'column',padding: '10px'}}>\r\n                         <p style={{ color: '#bebebe' ,textAlign:\"center\"}}>{t('message_image')}</p>\r\n                         <i className=\"fas fa-satellite\" style={{ fontSize: \"40px\" }}></i>\r\n                        </div>\r\n                      )\r\n                    }\r\n                    <Row className=\"my-2\" >\r\n                      <Col lg='12' md=\"12\" sm=\"12\">\r\n                        {\r\n                          selectedField.length > 0 && (\r\n                            <>\r\n                            <h5 style={{ fontSize: 14, textAlign: \"center\" }}> Satellite Images List</h5>\r\n                            <Calendar\r\n                              onChange={(date) => handleDateClick(moment(date).format('D MMM YYYY'))}\r\n                              value={selectedDate ? new Date(moment(selectedDate, 'D MMM YYYY')) : null}\r\n                              locale={localStorage.getItem('local') ? `${localStorage.getItem('local')}-${localStorage.getItem('local').toUpperCase()}` : 'en-EN'}\r\n                              tileContent={({ date, view }) => {\r\n                                const formattedDate = moment(date).format('D MMM YYYY');\r\n                                const hasSatelliteImages = satellitesImages.some(data => moment(data.created_at).format('D MMM YYYY') === formattedDate);\r\n\r\n                                return view === 'month' && hasSatelliteImages ? (\r\n                                  <span style={{ fontWeight: 'bold' , color:'#29B2C4' }}>•</span>\r\n                                ) : null;\r\n                              }}\r\n                            />\r\n                            </>\r\n                          )\r\n                        }\r\n                      </Col>\r\n\r\n                    </Row>\r\n\r\n\r\n\r\n\r\n                  </CardBody>\r\n                </>\r\n              }\r\n\r\n            </Card>\r\n\r\n          </Col>\r\n\r\n        </Row>\r\n\r\n      </Container>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default SatelliteImages"],"mappings":"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"},"metadata":{},"sourceType":"module"}