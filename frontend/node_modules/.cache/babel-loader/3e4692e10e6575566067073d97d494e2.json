{"ast":null,"code":"import _slicedToArray from \"/var/www/prod/smartfarm/backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/var/www/prod/smartfarm/backoffice/frontend/src/components/Simulation/WaterChart.js\";\n\nimport moment from 'moment';\nimport React, { useState, useEffect } from 'react';\nimport { Line } from 'react-chartjs-2';\nimport { useTranslation } from \"react-i18next\";\nimport { Col } from 'shards-react';\n\nvar WaterChart = function WaterChart(_ref) {\n  var data = _ref.data;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t,\n      i18n = _useTranslation.i18n;\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      ruMax = _useState4[0],\n      setRuMax = _useState4[1];\n\n  var getChartData = function getChartData() {\n    var labels = [];\n    var dataBilan = [];\n    var RuMax = [];\n    var RuMin = [];\n\n    for (var i = 0; i <= data.length; i++) {\n      if (data[i] && data[i].dates) {\n        var allDate = data[i].dates;\n        var date = moment(allDate).locale('En').format('MMM DD YYYY');\n        labels.push(date);\n        dataBilan.push(parseFloat(data[i].bilan).toFixed(2));\n        RuMax.push(data[i].RUmax);\n        RuMin.push(data[i].RUmin);\n      }\n    }\n\n    var state = {\n      labels: labels,\n      datasets: [{\n        label: \"\".concat(t('water_balance')),\n        fill: false,\n        lineTension: 0.5,\n        backgroundColor: 'rgba(75,192,192,1)',\n        borderColor: '#27A6B7',\n        borderWidth: 2,\n        data: dataBilan\n      }, {\n        label: \"\".concat(t('Ru max (mm)')),\n        fill: false,\n        lineTension: 0.5,\n        backgroundColor: '#32CB8D',\n        borderColor: '#32CB8D',\n        borderWidth: 2,\n        data: RuMax\n      }, {\n        label: \"\".concat(t('Ru min (mm)')),\n        fill: false,\n        lineTension: 0.5,\n        backgroundColor: '#e5331b',\n        borderColor: '#e5331b',\n        borderWidth: 2,\n        data: RuMin\n      }]\n    };\n    setState(state);\n    setRuMax(RuMax[0]);\n  };\n\n  useEffect(function () {\n    getChartData();\n  }, [data]);\n  return /*#__PURE__*/React.createElement(Line, {\n    data: state,\n    options: {\n      title: {\n        display: true,\n        text: \"\".concat(t('water_balance')),\n        fontSize: 14\n      },\n      legend: {\n        display: true,\n        position: 'bottom'\n      },\n      scales: {\n        yAxes: [{\n          ticks: {\n            beginAtZero: true,\n            max: ruMax > 100 ? ruMax + 10 : 100,\n            min: 0\n          }\n        }]\n      }\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  });\n};\n\nexport default WaterChart;","map":{"version":3,"names":["moment","React","useState","useEffect","Line","useTranslation","Col","WaterChart","data","state","setState","t","i18n","ruMax","setRuMax","getChartData","labels","dataBilan","RuMax","RuMin","i","length","dates","allDate","date","locale","format","push","parseFloat","bilan","toFixed","RUmax","RUmin","datasets","label","fill","lineTension","backgroundColor","borderColor","borderWidth","title","display","text","fontSize","legend","position","scales","yAxes","ticks","beginAtZero","max","min"],"sources":["/var/www/prod/smartfarm/backoffice/frontend/src/components/Simulation/WaterChart.js"],"sourcesContent":["import moment from 'moment';\nimport React , {useState,useEffect}from 'react'\nimport { Line } from  'react-chartjs-2';\nimport { useTranslation } from \"react-i18next\";\nimport { Col } from 'shards-react';\n\n\nconst WaterChart = ({data}) => {\n    const [state,setState] = useState(null)\n    const { t, i18n } = useTranslation();\n    const [ruMax,setRuMax] = useState(0)\n\n    const getChartData = () => {\n    \n        let labels = []   \n        let dataBilan = []\n        let RuMax = []\n        let RuMin = []\n\n        for (let i = 0; i <= data.length; i++) {\n          if(data[i] && data[i].dates){\n            let allDate = data[i].dates\n              let date = moment(allDate).locale('En').format('MMM DD YYYY')\n               labels.push(date)\n              dataBilan.push(parseFloat(data[i].bilan).toFixed(2))\n              RuMax.push(data[i].RUmax)\n              RuMin.push(data[i].RUmin)\n\n          }\n\n        }\n        const state = {\n            labels: labels,\n            datasets: [\n              {\n                label: `${t('water_balance')}`,\n                fill: false,\n                lineTension: 0.5,\n                backgroundColor: 'rgba(75,192,192,1)',\n                borderColor: '#27A6B7',\n                borderWidth: 2,\n                data: dataBilan,\n              },\n              {\n                label: `${t('Ru max (mm)')}`,\n                fill: false,\n                lineTension: 0.5,\n                backgroundColor: '#32CB8D',\n                borderColor: '#32CB8D',\n                borderWidth: 2,\n                data: RuMax\n              },\n              {\n                label: `${t('Ru min (mm)')}`,\n                fill: false,\n                lineTension: 0.5,\n                backgroundColor: '#e5331b',\n                borderColor: '#e5331b',\n                borderWidth: 2,\n                data: RuMin\n              }\n            ]\n          }\n          setState(state)\n          setRuMax(RuMax[0])\n    }\n\n    useEffect(()=>{\n        getChartData()\n    },[data])\n\n    return (\n      <Line\n      data={state}\n          options={{\n            title:{\n              display:true,\n              text:`${t('water_balance')}`,\n              fontSize:14\n            },\n            legend:{\n              display:true,\n              position:'bottom'\n            },\n            scales: {\n              yAxes: [{\n                  ticks: {\n                      beginAtZero: true,\n                      max: ruMax > 100 ? ruMax + 10 : 100,\n                      min: 0\n                  }\n              }]\n          },\n          }}\n      />\n\n  );\n}\n\nexport default WaterChart"],"mappings":"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"},"metadata":{},"sourceType":"module"}